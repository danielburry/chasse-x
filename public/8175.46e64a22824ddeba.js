"use strict";var ye=Object.defineProperty,he=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,ce=(U,C,n)=>C in U?ye(U,C,{enumerable:!0,configurable:!0,writable:!0,value:n}):U[C]=n,ee=(U,C)=>{for(var n in C||(C={}))me.call(C,n)&&ce(U,n,C[n]);if(le)for(var n of le(C))ge.call(C,n)&&ce(U,n,C[n]);return U},pe=(U,C)=>he(U,_e(C));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[8175],{58175:(U,C,n)=>{n.d(C,{q:()=>R});var p=n(15861),J=n(85931),Z=n(26584),H=n(58817),f=n(62208),h=n(1036),F=n(16730),_=n(5548),m=n(65401),S=n(32442),y=n(91179),x=n(13924),M=n(37053),V=n(82054),Q=n(50736),D=n(82959),X=n(87757),A=n(83308),G=n(53023),k=n(76530),j=n(6185),te=n(60466),re=n(46679),q=n(74447);const w="feature-store:unsupported-query",l=new h.WJ(2e6);let u=0;class R{constructor(e){this.capabilities={query:X.g},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new h.Xq(u+++"$$",l)),this.fieldsIndex=new te.Z(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,f.hw)(this._frameTask),this.clearCache(),(0,f.SC)(this._geometryQueryCache),this._changeHandle=(0,f.hw)(this._changeHandle),(0,f.SC)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return(0,f.Wi)(e)?null:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:(0,j.S2)(this.spatialReference)}}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=(0,k.R)(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){var e;null==(e=this._geometryQueryCache)||e.clear(),this._allItems=null,this._timeExtent=null}executeQuery(e,i){var t=this;return(0,p.Z)(function*(){try{return(yield t._executeQuery(e,{},i)).createQueryResponse()}catch(r){if(r!==j.vF)throw r;return new A.y([],e,t).createQueryResponse()}})()}executeQueryForCount(e={},i){var t=this;return(0,p.Z)(function*(){try{return(yield t._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},i)).createQueryResponseForCount()}catch(r){if(r!==j.vF)throw r;return 0}})()}executeQueryForExtent(e,i){var t=this;return(0,p.Z)(function*(){const r=e.outSR;try{const s=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},i),a=s.size;if(!a)return{count:0,extent:null};(0,_.t8)(g,_.Gv),t.featureStore.forEachBounds(s.items,d=>(0,_.TC)(g,d),P);const c={xmin:g[0],ymin:g[1],xmax:g[3],ymax:g[4],spatialReference:(0,j.S2)(t.spatialReference)};t.hasZ&&isFinite(g[2])&&isFinite(g[5])&&(c.zmin=g[2],c.zmax=g[5]);const o=(0,D.iV)(c,s.spatialReference,r);if(o.spatialReference=(0,j.S2)(r||t.spatialReference),o.xmax-o.xmin==0){const d=(0,F.c9)(o.spatialReference);o.xmin-=d,o.xmax+=d}if(o.ymax-o.ymin==0){const d=(0,F.c9)(o.spatialReference);o.ymin-=d,o.ymax+=d}if(t.hasZ&&null!=o.zmin&&null!=o.zmax&&o.zmax-o.zmin==0){const d=(0,F.c9)(o.spatialReference);o.zmin-=d,o.zmax+=d}return{count:a,extent:o}}catch(s){if(s===j.vF)return{count:0,extent:null};throw s}})()}executeQueryForIds(e,i){var t=this;return(0,p.Z)(function*(){return t.executeQueryForIdSet(e,i).then(r=>Array.from(r))})()}executeQueryForIdSet(e,i){var t=this;return(0,p.Z)(function*(){try{const r=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},i),s=r.items,a=new Set;return yield t._reschedule(()=>{for(const c of s)a.add(r.featureAdapter.getObjectId(c))},i),a}catch(r){if(r===j.vF)return new Set;throw r}})()}executeQueryForSnapping(e,i){var t=this;return(0,p.Z)(function*(){const{point:r,distance:s,types:a}=e;if(a===A.r.NONE)return{candidates:[]};const c=yield t._reschedule(()=>t._checkQuerySupport(e.query),i),o=!(0,M.fS)(r.spatialReference,t.spatialReference);o&&(yield(0,D._W)(r.spatialReference,t.spatialReference));const d="number"==typeof s?s:s.x,E="number"==typeof s?s:s.y,v={xmin:r.x-d,xmax:r.x+d,ymin:r.y-E,ymax:r.y+E,spatialReference:r.spatialReference},B=o?(0,D.iV)(v,t.spatialReference):v;if(!B)return{candidates:[]};const z=(yield(0,x.aX)((0,y.im)(r),null,{signal:i}))[0],b=(yield(0,x.aX)((0,y.im)(B),null,{signal:i}))[0];if((0,f.Wi)(z)||(0,f.Wi)(b))return{candidates:[]};const Y=new A.y(t._searchFeatures(t._getQueryBBoxes(b.toJSON())),c,t);yield t._reschedule(()=>t._executeObjectIdsQuery(Y),i),yield t._reschedule(()=>t._executeTimeQuery(Y),i),yield t._reschedule(()=>t._executeAttributesQuery(Y),i);const T=z.toJSON(),K=o?(0,D.iV)(T,t.spatialReference):T,N=o?Math.max(B.xmax-B.xmin,B.ymax-B.ymin)/2:s;return Y.createSnappingResponse(pe(ee({},e),{point:K,distance:N}),r.spatialReference)})()}executeQueryForLatestObservations(e,i){var t=this;return(0,p.Z)(function*(){if(!t.timeInfo||!t.timeInfo.trackIdField)throw new Z.Z(w,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:t.timeInfo});try{const r=yield t._executeQuery(e,{},i);return yield t._reschedule(()=>t._filterLatest(r),i),r.createQueryResponse()}catch(r){if(r!==j.vF)throw r;return new A.y([],e,t).createQueryResponse()}})()}executeQueryForSummaryStatistics(e={},i,t){var r=this;return(0,p.Z)(function*(){const{field:s,normalizationField:a,valueExpression:c}=i;return(yield r._getQueryEngineResultForStats(e,{field:s,normalizationField:a,valueExpression:c},t)).createSummaryStatisticsResponse(i)})()}executeQueryForUniqueValues(e={},i,t){var r=this;return(0,p.Z)(function*(){const{field:s,valueExpression:a}=i;return(yield r._getQueryEngineResultForStats(e,{field:s,valueExpression:a},t)).createUniqueValuesResponse(i)})()}executeQueryForClassBreaks(e={},i,t){var r=this;return(0,p.Z)(function*(){const{field:s,normalizationField:a,valueExpression:c}=i;return(yield r._getQueryEngineResultForStats(e,{field:s,normalizationField:a,valueExpression:c},t)).createClassBreaksResponse(i)})()}executeQueryForHistogram(e={},i,t){var r=this;return(0,p.Z)(function*(){const{field:s,normalizationField:a,valueExpression:c}=i;return(yield r._getQueryEngineResultForStats(e,{field:s,normalizationField:a,valueExpression:c},t)).createHistogramResponse(i)})()}_schedule(e,i){var t=this;return(0,p.Z)(function*(){return(0,f.pC)(t._frameTask)?t._frameTask.schedule(e,i):e(q.G5)})()}_reschedule(e,i){var t=this;return(0,p.Z)(function*(){return(0,f.pC)(t._frameTask)?t._frameTask.reschedule(e,i):e(q.G5)})()}_getAll(e){return(0,f.Wi)(this._allItems)&&(this._allItems=this.featureStore.toArray()),new A.y(this._allItems,e,this)}_executeQuery(e,i,t){var r=this;return(0,p.Z)(function*(){e=(0,H.d9)(e),e=yield r._schedule(()=>(0,j.Up)(e,r.definitionExpression,r.spatialReference),t),e=yield r._reschedule(()=>r._checkQuerySupport(e),t),e=ee(ee({},e),i);const s=yield r._reschedule(()=>r._executeSceneFilterQuery(e,t),t),a=yield r._reschedule(()=>r._executeGeometryQuery(e,s,t),t);return yield r._reschedule(()=>r._executeAggregateIdsQuery(a),t),yield r._reschedule(()=>r._executeObjectIdsQuery(a),t),yield r._reschedule(()=>r._executeTimeQuery(a),t),yield r._reschedule(()=>r._executeAttributesQuery(a),t),a})()}_executeSceneFilterQuery(e,i){var t=this;return(0,p.Z)(function*(){if((0,f.Wi)(e.sceneFilter))return null;const{outSR:r,returnGeometry:s,returnCentroid:a}=e,c=t.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,d=(0,f.Wi)(c)||(0,M.fS)(c,o.spatialReference)?o:(0,D.iV)(o,c);if(!d)return null;const E=s||a,v=(0,M.JY)(r)&&!(0,M.fS)(t.spatialReference,r)&&E?function(){var T=(0,p.Z)(function*(K){return t._project(K,r)});return function(K){return T.apply(this,arguments)}}():T=>T,B=t.featureAdapter,z=t._searchFeatures(t._getQueryBBoxes(d));if("disjoint"===e.sceneFilter.spatialRelationship){if(!z.length)return null;const T=new Set;for(const $ of z)T.add(B.getObjectId($));const K=yield t._reschedule(()=>t.featureStore.toArray(),i);return v(yield t._reschedule((0,p.Z)(function*(){const $=yield(0,G.cW)("esriSpatialRelDisjoint",d,t.geometryType,t.hasZ,t.hasM),W=yield t._runSpatialFilter(K,L=>!T.has(B.getObjectId(L))||$(B.getGeometry(L)),i);return new A.y(W,e,t)}),i))}if(!z.length)return new A.y([],e,t);if(t._canExecuteSinglePass(d,e))return v(new A.y(z,e,t));const b=yield(0,G.cW)("esriSpatialRelContains",d,t.geometryType,t.hasZ,t.hasM),Y=yield t._runSpatialFilter(z,T=>b(B.getGeometry(T)),i);return v(new A.y(Y,e,t))})()}_executeGeometryQuery(e,i,t){var r=this;return(0,p.Z)(function*(){if((0,f.pC)(i)&&0===i.items.length)return i;e=(0,f.pC)(i)?i.query:e;const{geometry:s,outSR:a,spatialRel:c,returnGeometry:o,returnCentroid:d}=e,E=r.featureStore.featureSpatialReference,v=!s||(0,f.Wi)(E)||(0,M.fS)(E,s.spatialReference)?s:(0,D.iV)(s,E),B=o||d,z=(0,M.JY)(a)&&!(0,M.fS)(r.spatialReference,a),b=r._geometryQueryCache&&(0,f.Wi)(i)?z&&B?JSON.stringify({originalFilterGeometry:s,spatialRelationship:c,outSpatialReference:a}):JSON.stringify({originalFilterGeometry:s,spatialRelationship:c}):null,Y=b?r._geometryQueryCache.get(b):null;if((0,f.pC)(Y))return new A.y(Y,e,r);const T=function(){var W=(0,p.Z)(function*(L){return z&&B&&(yield r._project(L,a)),b&&r._geometryQueryCache.put(b,L.items,L.items.length+1),L});return function(oe){return W.apply(this,arguments)}}();if(!v)return T((0,f.pC)(i)?i:r._getAll(e));const K=r.featureAdapter;let N=r._searchFeatures(r._getQueryBBoxes(s));if("esriSpatialRelDisjoint"===c){if(!N.length)return T((0,f.pC)(i)?i:r._getAll(e));const W=new Set;for(const ne of N)W.add(K.getObjectId(ne));const L=(0,f.pC)(i)?i.items:yield r._reschedule(()=>r.featureStore.toArray(),t);return T(yield r._reschedule((0,p.Z)(function*(){const ne=yield(0,G.cW)(c,v,r.geometryType,r.hasZ,r.hasM),fe=yield r._runSpatialFilter(L,ue=>!W.has(K.getObjectId(ue))||ne(K.getGeometry(ue)),t);return new A.y(fe,e,r)}),t))}if((0,f.pC)(i)){const W=new J.SO;N=N.filter(L=>(0,J.cq)(i.items,L,i.items.length,W)>=0)}if(!N.length){const W=new A.y([],e,r);return b&&r._geometryQueryCache.put(b,W.items,1),W}if(r._canExecuteSinglePass(v,e))return T(new A.y(N,e,r));const $=yield(0,G.cW)(c,v,r.geometryType,r.hasZ,r.hasM),se=yield r._runSpatialFilter(N,W=>$(K.getGeometry(W)),t);return T(new A.y(se,e,r))})()}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||(0,f.Wi)(this.aggregateAdapter))return;const i=new Set;for(const r of e.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(r).forEach(s=>i.add(s));const t=this.featureAdapter.getObjectId;e.items=e.items.filter(r=>i.has(t(r)))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const i=new Set(e.query.objectIds),t=this.featureAdapter.getObjectId;e.items=e.items.filter(r=>i.has(t(r)))}_executeTimeQuery(e){if(0===e.items.length)return;const i=(0,k.y)(this.timeInfo,e.query.timeExtent,this.featureAdapter);(0,f.Wi)(i)||(e.items=e.items.filter(i))}_executeAttributesQuery(e){if(0===e.items.length)return;const i=(0,Q.Jc)(e.query.where,this.fieldsIndex);if(i){if(!i.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter(t=>i.testFeature(t,this.featureAdapter))}}_runSpatialFilter(e,i,t){var r=this;return(0,p.Z)(function*(){if(!i)return e;if((0,f.Wi)(r._frameTask))return e.filter(o=>i(o));let s=0;const a=new Array,c=function(){var o=(0,p.Z)(function*(d){for(;s<e.length;){const E=e[s++];i(E)&&(a.push(E),d.madeProgress()),d.done&&(yield r._reschedule(v=>c(v),t))}});return function(E){return o.apply(this,arguments)}}();return r._reschedule(o=>c(o),t).then(()=>a)})()}_filterLatest(e){const{trackIdField:i,startTimeField:t,endTimeField:r}=this.timeInfo,s=r||t,a=new Map,c=this.featureAdapter.getAttribute;for(const o of e.items){const d=c(o,i),E=c(o,s),v=a.get(d);(!v||E>c(v,s))&&a.set(d,o)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,i){const{spatialRel:t}=i;return(0,G.hN)(e)&&("esriSpatialRelEnvelopeIntersects"===t||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t||"esriSpatialRelWithin"===t))}_project(e,i){var t=this;return(0,p.Z)(function*(){if(!i||(0,M.fS)(t.spatialReference,i))return e;const r=t.featureAdapter,s=yield(0,D.oj)(e.items.map(a=>(0,j.Op)(t.geometryType,t.hasZ,t.hasM,r.getGeometry(a))),t.spatialReference,i);return e.items=s.map((a,c)=>r.cloneWithGeometry(e.items[c],(0,V.GH)(a,t.hasZ,t.hasM))),e})()}_getQueryBBoxes(e){if((0,G.hN)(e)){if((0,y.YX)(e))return[(0,m.al)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,y.oU)(e))return e.rings.map(i=>(0,m.al)(Math.min(i[0][0],i[2][0]),Math.min(i[0][1],i[2][1]),Math.max(i[0][0],i[2][0]),Math.max(i[0][1],i[2][1])))}return[(0,S.$P)((0,m.Ue)(),e)]}_searchFeatures(e){for(const t of e)this.featureStore.forEachInBounds(t,r=>I.add(r));const i=Array.from(I.values());return I.clear(),i}_checkStatisticsSupport(e,i){var t=this;return(0,p.Z)(function*(){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new Z.Z(w,"Unsupported query options",{query:e});return t._checkAttributesQuerySupport(e),Promise.all([t._checkStatisticsParamsSupport(i),(0,G.P0)(e,t.geometryType,t.spatialReference),(0,D._W)(t.spatialReference,e.outSR)]).then(()=>e)})()}_checkStatisticsParamsSupport(e){var i=this;return(0,p.Z)(function*(){let t=[];if(e.valueExpression){const{arcadeUtils:r}=yield(0,re.LC)();t=r.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new Z.Z(w,"params should have at least a field or valueExpression",{params:e});(0,Q.Of)(i.fieldsIndex,t,"params contains missing fields")})()}_checkQuerySupport(e){var i=this;return(0,p.Z)(function*(){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new Z.Z(w,"Unsupported query options",{query:e});return i._checkAttributesQuerySupport(e),i._checkStatisticsQuerySupport(e),Promise.all([(0,G.P0)(e,i.geometryType,i.spatialReference),(0,D._W)(i.spatialReference,e.outSR)]).then(()=>e)})()}_checkAttributesQuerySupport(e){const{outFields:i,orderByFields:t,returnDistinctValues:r,outStatistics:s}=e,a=s?s.map(c=>c.outStatisticFieldName&&c.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(t&&t.length>0){const c=" asc",o=" desc",d=t.map(E=>{const v=E.toLowerCase();return v.includes(c)?v.split(c)[0]:v.includes(o)?v.split(o)[0]:E}).filter(E=>!a.includes(E));(0,Q.Of)(this.fieldsIndex,d,"orderByFields contains missing fields")}if(i&&i.length>0)(0,Q.Of)(this.fieldsIndex,i,"outFields contains missing fields");else if(r)throw new Z.Z(w,"outFields should be specified for returnDistinctValues",{query:e});(0,Q.hO)(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:i,groupByFieldsForStatistics:t,having:r}=e,s=t&&t.length,a=i&&i.length;if(r){if(!s||!a)throw new Z.Z(w,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});(0,Q.z4)(this.fieldsIndex,r,i)}if(a){if(!function ie(O){return O.every(e=>"exceedslimit"!==e.statisticType)}(i))return;const c=i.map(o=>o.onStatisticField).filter(Boolean);(0,Q.Of)(this.fieldsIndex,c,"onStatisticFields contains missing fields"),s&&(0,Q.Of)(this.fieldsIndex,t,"groupByFieldsForStatistics contains missing fields");for(const o of i){const{onStatisticField:d,statisticType:E}=o;if("percentile_disc"!==E&&"percentile_cont"!==E||!("statisticParameters"in o)){if("count"!==E&&d&&(0,Q.G3)(d,this.fieldsIndex))throw new Z.Z(w,"outStatistics contains non-numeric fields",{definition:o,query:e})}else{const{statisticParameters:v}=o;if(!v)throw new Z.Z(w,"statisticParamters should be set for percentile type",{definition:o,query:e})}}}}_getQueryEngineResultForStats(e,i,t){var r=this;return(0,p.Z)(function*(){e=(0,H.d9)(e);try{e=yield r._schedule(()=>(0,j.Up)(e,r.definitionExpression,r.spatialReference),t),e=yield r._reschedule(()=>r._checkStatisticsSupport(e,i),t);const s=yield r._reschedule(()=>r._executeSceneFilterQuery(e,t),t),a=yield r._reschedule(()=>r._executeGeometryQuery(e,s,t),t);return yield r._reschedule(()=>r._executeAggregateIdsQuery(a),t),yield r._reschedule(()=>r._executeObjectIdsQuery(a),t),yield r._reschedule(()=>r._executeTimeQuery(a),t),yield r._reschedule(()=>r._executeAttributesQuery(a),t),a}catch(s){if(s!==j.vF)throw s;return new A.y([],e,r)}})()}}const P=(0,_.Ue)(),g=(0,_.Ue)(),I=new Set},87757:(U,C,n)=>{n.d(C,{g:()=>p});const p={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},53023:(U,C,n)=>{n.d(C,{hN:()=>ae,P0:()=>ie,cW:()=>q});var p=n(15861),J=n(26584),Z=n(33190),H=n(11519),h=n(91179),F=n(37053);function _(l,u){return l?u?4:3:u?3:2}function y(l,u,R,P,g){if(!l)return!1;const I=_(u,R),{coords:O,lengths:e}=l;let i=!1,t=0;for(const r of e)i=x(i,O,I,t,r,P,g),t+=r*I;return i}function x(l,u,R,P,g,I,O){let e=l,i=P;for(let t=P,r=P+g*R;t<r;t+=R){i=t+R,i===r&&(i=P);const s=u[t],a=u[t+1],c=u[i],o=u[i+1];(a<O&&o>=O||o<O&&a>=O)&&s+(O-a)/(o-a)*(c-s)<I&&(e=!e)}return e}var M=n(82054),V=n(88071),Q=n(82959),D=n(6185);const X="feature-store:unsupported-query",A={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},G_spatialRelationship={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},G_queryGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},G_layerGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function k(l){return!0===G_spatialRelationship[l]}function j(l){return!0===G_queryGeometry[(0,h.Ji)(l)]}function te(l){return!0===G_layerGeometry[l]}function q(l,u,R,P,g){if((0,h.oU)(u)&&"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l)){const I=(0,M.Uy)(new V.Z,u,!1,!1);return Promise.resolve(O=>function m(l,u,R,P){return y(l,u,R,P.coords[0],P.coords[1])}(I,!1,!1,O))}if((0,h.oU)(u)&&"esriGeometryMultipoint"===R){const I=(0,M.Uy)(new V.Z,u,!1,!1);if("esriSpatialRelContains"===l)return Promise.resolve(O=>function S(l,u,R,P,g,I){const O=_(g,I),{coords:e,lengths:i}=P;if(!i)return!1;for(let t=0,r=0;t<i.length;t++,r+=O)if(!y(l,u,R,e[r],e[r+1]))return!1;return!0}(I,!1,!1,O,P,g))}if((0,h.YX)(u)&&"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l))return Promise.resolve(I=>(0,Z.aV)(u,(0,D.Op)(R,P,g,I)));if((0,h.YX)(u)&&"esriGeometryMultipoint"===R&&"esriSpatialRelContains"===l)return Promise.resolve(I=>(0,Z.lQ)(u,(0,D.Op)(R,P,g,I)));if((0,h.YX)(u)&&"esriSpatialRelIntersects"===l){const I=function f(l){return"mesh"===l?H.h_:(0,H.IY)(l)}(R);return Promise.resolve(O=>I(u,(0,D.Op)(R,P,g,O)))}return function re(){return Promise.all([n.e(4918),n.e(8592)]).then(n.bind(n,32825))}().then(I=>{const O=I[A[l]].bind(null,u.spatialReference,u);return e=>O((0,D.Op)(R,P,g,e))})}function ie(l,u,R){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(l,u,R){const{spatialRel:P,geometry:g}=l;if(g){if(!k(P))throw new J.Z(X,"Unsupported query spatial relationship",{query:l});if((0,F.JY)(g.spatialReference)&&(0,F.JY)(R)){if(!j(g))throw new J.Z(X,"Unsupported query geometry type",{query:l});if(!te(u))throw new J.Z(X,"Unsupported layer geometry type",{query:l});if(l.outSR)return(0,Q._W)(l.geometry&&l.geometry.spatialReference,l.outSR)}}})).apply(this,arguments)}function ae(l){if((0,h.YX)(l))return!0;if((0,h.oU)(l)){for(const u of l.rings)if(5!==u.length||u[0][0]!==u[1][0]||u[0][0]!==u[4][0]||u[2][0]!==u[3][0]||u[0][1]!==u[3][1]||u[0][1]!==u[4][1]||u[1][1]!==u[2][1])return!1;return!0}return!1}},76530:(U,C,n)=>{function p(h,F){if(!h)return null;const _=F.featureAdapter,{startTimeField:m,endTimeField:S}=h;let y=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;if(m&&S)F.forEach(M=>{const V=_.getAttribute(M,m),Q=_.getAttribute(M,S);null==V||isNaN(V)||(y=Math.min(y,V)),null==Q||isNaN(Q)||(x=Math.max(x,Q))});else{const M=m||S;F.forEach(V=>{const Q=_.getAttribute(V,M);null==Q||isNaN(Q)||(y=Math.min(y,Q),x=Math.max(x,Q))})}return{start:y,end:x}}function J(h,F,_){if(!F||!h)return null;const{startTimeField:m,endTimeField:S}=h;if(!m&&!S)return null;const{start:y,end:x}=F;return null===y&&null===x?null:void 0===y&&void 0===x?()=>!1:m&&S?function Z(h,F,_,m,S){return null!=m&&null!=S?y=>{const x=h.getAttribute(y,F),M=h.getAttribute(y,_);return(null==x||x<=S)&&(null==M||M>=m)}:null!=m?y=>{const x=h.getAttribute(y,_);return null==x||x>=m}:null!=S?y=>{const x=h.getAttribute(y,F);return null==x||x<=S}:void 0}(_,m,S,y,x):function H(h,F,_,m){return null!=_&&null!=m&&_===m?S=>h.getAttribute(S,F)===_:null!=_&&null!=m?S=>{const y=h.getAttribute(S,F);return y>=_&&y<=m}:null!=_?S=>h.getAttribute(S,F)>=_:null!=m?S=>h.getAttribute(S,F)<=m:void 0}(_,m||S,y,x)}n.d(C,{R:()=>p,y:()=>J})}}]);