"use strict";(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[2955],{36554:(B,C,s)=>{s.r(C),s.d(C,{default:()=>pe});var S=s(15861),r=s(17626),A=(s(29132),s(73281)),E=(s(4832),s(49067),s(96794),s(69747),s(40425),s(69357),s(40342),s(14726),s(33474),s(32088)),U=s(99959),i=s(77712),Z=(s(85931),s(8314),s(90912),s(76898)),O=s(71774),H=s(44917),L=s(26584),N=s(47996),R=s(62208),y=s(89628),z=s(17253),x=s(65234);let v=class extends N.Z{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getFeatureDefinition(){const{featureDefinition:{collection:e,layerDefinition:o,spatialReference:t,supportedCrs:a},layer:{apiKey:p,capabilities:d,customParameters:u}}=this;return{capabilities:d,collection:e,layerDefinition:o,queryParameters:{apiKey:p,customParameters:u},spatialReference:t,supportedCrs:a}}queryExtent(e,o={}){return null}queryFeatureCount(e,o={}){return null}queryFeatures(e,o={}){return this.queryFeaturesJSON(e,o).then(t=>z.default.fromJSON(t))}queryFeaturesJSON(e,o={}){const t=this.getFeatureDefinition();return this.load(o).then(()=>(0,y.yN)(t,e,o))}queryObjectIds(e,o={}){return null}serviceSupportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator&&!this.featureDefinition.supportedCrs[e.wkid])}_conformsToType(e,o){var a;const t=new RegExp(`^${o}$`,"i");return null!=(a=e.conformsTo.some(p=>t.test(p)))&&a}_getCapabilities(e,o){var a,p,d,u,l,c,F;const t=(0,R.pC)(o)?null==(a=o.components)?void 0:a.parameters:null;return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!=(F=null!=(c=null==(d=null==(p=null==t?void 0:t.limit)?void 0:p.schema)?void 0:d.maximum)?c:null==(l=null==(u=null==t?void 0:t.limitFeatures)?void 0:u.schema)?void 0:l.maximum)?F:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getExtent(e){var l;const o=null==(l=e.extent)?void 0:l.spatial;if(!o)return null;const t=o.bbox[0],a=4===t.length;return{xmin:t[0],ymin:t[1],xmax:a?t[2]:t[3],ymax:a?t[3]:t[4],zmin:a?void 0:t[2],zmax:a?void 0:t[5],spatialReference:x.Z.WGS84.toJSON()}}_getStorageSpatialReference(e){var a;const o=null!=(a=e.storageCrs)?a:y.$9,t=(0,y.d)(o);return(0,R.Wi)(t)?x.Z.WGS84:new x.Z({wkid:t})}_getSupportedSpatialReferences(e,o){var u;const t="#/crs",a=null!=(u=e.crs)?u:[y.$9],p=a.includes(t)?a.filter(l=>l!==t).concat(o.crs):a,d=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return p.filter(l=>!d.test(l))}_loadOGCServices(e,o){var t=this;return(0,S.Z)(function*(){const a=(0,R.pC)(o)?o.signal:null,{apiKey:p,collectionId:d,customParameters:u,fields:l,geometryType:c,hasZ:F,objectIdField:le,timeInfo:D,url:ue}=e,de={fields:null==l?void 0:l.map(m=>m.toJSON()),geometryType:O.P$.toJSON(c),hasZ:F,objectIdField:le,timeInfo:null==D?void 0:D.toJSON()},g={apiKey:p,customParameters:u,signal:a},T=yield(0,y.gp)(ue,g),[Q,M]=yield Promise.all([(0,y.G4)(T,g),(0,y.j)(T,g)]);if(!t._conformsToType(Q,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new L.Z("ogc-feature-layer:no-geojson-support","Server does not support geojson");const h=M.collections.find(m=>m.id===d);if(!h)throw new L.Z("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const ye=t._conformsToType(Q,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?yield(0,y.eS)(T,g):null,P=yield(0,y.w9)(h,de,g),ce=t._getCapabilities(P.hasZ,ye),ve=t._getExtent(h),fe=t._getStorageSpatialReference(h).toJSON(),he=t._getSupportedSpatialReferences(h,M),me=new RegExp(`^${y.Lu}`,"i"),b={};for(const m of he){const j=(0,y.d)(m);(0,R.pC)(j)&&(b[j]||(b[j]=m.replace(me,"")))}P.extent=ve,t.featureDefinition={capabilities:ce,collection:h,layerDefinition:P,queryParameters:{},spatialReference:fe,supportedCrs:b}})()}};(0,r._)([(0,i.Cb)()],v.prototype,"featureDefinition",void 0),(0,r._)([(0,i.Cb)({constructOnly:!0})],v.prototype,"layer",void 0),(0,r._)([(0,i.Cb)()],v.prototype,"type",void 0),v=(0,r._)([(0,Z.j)("esri.layers.graphics.sources.OGCFeatureSource")],v);var J=s(50085),V=s(552),W=s(50107),$=s(35126),K=s(49286),Y=s(32629),X=s(6647),w=s(30346),q=s(99555),k=s(97941),f=s(13812),_=s(47717),ee=s(41638),te=s(36255),se=s(55911),I=s(36630),oe=s(170),re=s(62667),G=s(84952),ie=s(49430),ne=s(2004);const ae=(0,se.v)();let n=class extends((0,J.V)((0,W.N)((0,$.b)((0,V.h)((0,Y.c)((0,k.n)((0,q.M)((0,K.q)((0,X.I)((0,w.Q)((0,U.R)(H.Z)))))))))))){constructor(e){super(e),this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new v({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then(()=>this._fetchService(e))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){(0,I.YN)(e,this.fieldsIndex),this._set("renderer",e)}on(e,o){return super.on(e,o)}createPopupTemplate(e){return(0,ie.eZ)(this,e)}createQuery(){return new G.Z}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,o){var u;let t,a=!1;const p=null==(u=null==o?void 0:o.feature)?void 0:u.attributes,d=this.typeIdField&&(null==p?void 0:p[this.typeIdField]);return null!=d&&this.types&&(a=this.types.some(l=>{var c;return l.id==d&&(t=null==(c=l.domains)?void 0:c[e],"inherited"===(null==t?void 0:t.type)&&(t=this._getLayerDomain(e)),!0)})),a||t||(t=this._getLayerDomain(e)),t}queryFeatures(e,o){return this.load().then(()=>this.source.queryFeatures(G.Z.from(e)||this.createQuery(),o)).then(t=>{var a;return null==(a=null==t?void 0:t.features)||a.forEach(p=>{p.layer=p.sourceLayer=this}),t})}serviceSupportsSpatialReference(e){var o,t;return null!=(t=null==(o=this.source)?void 0:o.serviceSupportsSpatialReference(e))&&t}_fetchService(e){var o=this;return(0,S.Z)(function*(){yield o.source.load(e),o.read(o.source.featureDefinition,{origin:"service"}),(0,I.YN)(o.renderer,o.fieldsIndex),(0,I.UF)(o.timeInfo,o.fieldsIndex)})()}_getLayerDomain(e){if(!this.fields)return null;for(const o of this.fields)if(o.name===e&&o.domain)return o.domain;return null}};(0,r._)([(0,i.Cb)({readOnly:!0,json:{origins:{service:{read:!0}}}})],n.prototype,"capabilities",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],n.prototype,"collectionId",void 0),(0,r._)([(0,i.Cb)({type:String})],n.prototype,"copyright",void 0),(0,r._)([(0,i.Cb)({readOnly:!0})],n.prototype,"defaultPopupTemplate",null),(0,r._)([(0,i.Cb)({type:String})],n.prototype,"definitionExpression",void 0),(0,r._)([(0,i.Cb)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],n.prototype,"description",void 0),(0,r._)([(0,i.Cb)({type:String})],n.prototype,"displayField",void 0),(0,r._)([(0,i.Cb)(f.PV)],n.prototype,"elevationInfo",void 0),(0,r._)([(0,i.Cb)(_.d)],n.prototype,"featureReduction",void 0),(0,r._)([(0,i.Cb)({type:[te.Z],json:{origins:{service:{name:"layerDefinition.fields"}}}})],n.prototype,"fields",void 0),(0,r._)([(0,i.Cb)(ae.fieldsIndex)],n.prototype,"fieldsIndex",void 0),(0,r._)([(0,i.Cb)({readOnly:!0,type:ne.Z,json:{origins:{service:{name:"layerDefinition.extent"}}}})],n.prototype,"fullExtent",void 0),(0,r._)([(0,i.Cb)({type:O.Mk.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:O.Mk.read}}}}})],n.prototype,"geometryType",void 0),(0,r._)([(0,i.Cb)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],n.prototype,"hasZ",void 0),(0,r._)([(0,i.Cb)({type:Boolean,readOnly:!0})],n.prototype,"isTable",null),(0,r._)([(0,i.Cb)({type:[oe.Z],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:re.r},write:!0}}}})],n.prototype,"labelingInfo",void 0),(0,r._)([(0,i.Cb)(f.iR)],n.prototype,"labelsVisible",void 0),(0,r._)([(0,i.Cb)(f.rn)],n.prototype,"legendEnabled",void 0),(0,r._)([(0,i.Cb)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],n.prototype,"objectIdField",void 0),(0,r._)([(0,i.Cb)({type:["OGCFeatureLayer"]})],n.prototype,"operationalLayerType",void 0),(0,r._)([(0,i.Cb)(f.C_)],n.prototype,"popupEnabled",void 0),(0,r._)([(0,i.Cb)({type:A.Z,json:{name:"popupInfo",write:!0}})],n.prototype,"popupTemplate",void 0),(0,r._)([(0,i.Cb)({types:E.A,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:E.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],n.prototype,"renderer",null),(0,r._)([(0,i.Cb)(f.YI)],n.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,i.Cb)({readOnly:!0})],n.prototype,"source",void 0),(0,r._)([(0,i.Cb)({readOnly:!0,type:x.Z,json:{origins:{service:{read:!0}}}})],n.prototype,"spatialReference",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],n.prototype,"title",void 0),(0,r._)([(0,i.Cb)({readOnly:!0,json:{read:!1}})],n.prototype,"type",void 0),(0,r._)([(0,i.Cb)({type:String,readOnly:!0})],n.prototype,"typeIdField",void 0),(0,r._)([(0,i.Cb)({type:[ee.Z]})],n.prototype,"types",void 0),(0,r._)([(0,i.Cb)(f.HQ)],n.prototype,"url",void 0),n=(0,r._)([(0,Z.j)("esri.layers.OGCFeatureLayer")],n);const pe=n},87757:(B,C,s)=>{s.d(C,{g:()=>S});const S={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}}]);