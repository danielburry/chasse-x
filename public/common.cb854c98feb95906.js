"use strict";var ye=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,me=(q,V,a)=>V in q?ye(q,V,{enumerable:!0,configurable:!0,writable:!0,value:a}):q[V]=a,oe=(q,V)=>{for(var a in V||(V={}))Ee.call(V,a)&&me(q,a,V[a]);if(fe)for(var a of fe(V))Ce.call(V,a)&&me(q,a,V[a]);return q},le=(q,V)=>ge(q,ve(V));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[8592],{91376:(q,V,a)=>{function L(C){const U=function l(C,I){return function O(U){return U?U.closest(I)||O(function x(C){return C.host||null}(function p(C){return C.getRootNode()}(U))):null}(C)}(C,"[dir]");return U?U.getAttribute("dir"):"ltr"}a.d(V,{a:()=>L,b:()=>y,s:()=>J,t:()=>w});const _=":not([slot])";function y(C,I,O){I&&!Array.isArray(I)&&"string"!=typeof I&&(O=I,I=null);const U=I?Array.isArray(I)?I.map(G=>`[slot="${G}"]`).join(","):`[slot="${I}"]`:_;return(null==O?void 0:O.all)?function F(C,I,O){let U=I===_?j(C,_):Array.from(C.querySelectorAll(I));U=O&&!1===O.direct?U:U.filter(z=>z.parentElement===C),U=(null==O?void 0:O.matches)?U.filter(z=>null==z?void 0:z.matches(O.matches)):U;const G=null==O?void 0:O.selector;return G?U.map(z=>Array.from(z.querySelectorAll(G))).reduce((z,Y)=>[...z,...Y],[]).filter(z=>!!z):U}(C,U,O):function B(C,I,O){let U=I===_?j(C,_)[0]||null:C.querySelector(I);U=O&&!1===O.direct||(null==U?void 0:U.parentElement)===C?U:null,U=(null==O?void 0:O.matches)?(null==U?void 0:U.matches(O.matches))?U:null:U;const G=null==O?void 0:O.selector;return G?null==U?void 0:U.querySelector(G):U}(C,U,O)}function j(C,I){return C?Array.from(C.children||[]).filter(O=>null==O?void 0:O.matches(I)):[]}function J(C,I,O){return"string"==typeof I&&""!==I?I:""===I?C[O]:void 0}function w(C){return(!!C).toString()}},25893:(q,V,a)=>{a.d(V,{I:()=>T,d:()=>m});var d=a(15861),S=a(76210),v=a(91376),D=a(83623);const E={},R={},M={s:16,m:24,l:32};function A(){return(A=(0,d.Z)(function*({icon:l,scale:h}){const P=M[h],g=p(l),_="F"===g.charAt(g.length-1),j=`${_?g.substring(0,g.length-1):g}${P}${_?"F":""}`;if(E[j])return E[j];R[j]||(R[j]=fetch((0,S.K3)(`./assets/icon/${j}.json`)).then(B=>B.json()).catch(()=>(console.error(`"${j}" is not a valid calcite-ui-icon name`),"")));const F=yield R[j];return E[j]=F,F})).apply(this,arguments)}function p(l){const h=!isNaN(Number(l.charAt(0))),P=l.split("-");return 1===P.length?h?`i${l}`:l:P.map((g,_)=>0===_?h?`i${g.toUpperCase()}`:g:g.charAt(0).toUpperCase()+g.slice(1)).join("")}const T=(0,S.GH)(class extends S.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.visible=!1}connectedCallback(){this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var l;null===(l=this.intersectionObserver)||void 0===l||l.disconnect(),this.intersectionObserver=null}componentWillLoad(){var l=this;return(0,d.Z)(function*(){l.loadIconPathData()})()}render(){const{el:l,flipRtl:h,pathData:P,scale:g,textLabel:_}=this,y=(0,v.a)(l),j=M[g],F=!!_,B=[].concat(P||"");return(0,S.h)(S.AA,{"aria-hidden":(0,v.t)(!F),"aria-label":F?_:null,role:F?"img":null},(0,S.h)("svg",{class:{"flip-rtl":"rtl"===y&&h,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${j} ${j}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},B.map(N=>(0,S.h)("path","string"==typeof N?{d:N}:{d:N.d,opacity:"opacity"in N?N.opacity:1}))))}loadIconPathData(){var l=this;return(0,d.Z)(function*(){const{icon:h,scale:P,visible:g}=l;!S.Z5.isBrowser||!h||!g||(l.pathData=yield function L(l){return A.apply(this,arguments)}({icon:h,scale:P}))})()}waitUntilVisible(l){this.intersectionObserver=(0,D.c)("intersection",h=>{h.forEach(P=>{P.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,l())})},{rootMargin:"50px"}),this.intersectionObserver?this.intersectionObserver.observe(this.el):l()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:-ms-inline-flexbox;display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){height:1rem;width:1rem;min-width:1rem;min-height:1rem}:host([scale=m]){height:1.5rem;width:1.5rem;min-width:1.5rem;min-height:1.5rem}:host([scale=l]){height:2rem;width:2rem;min-width:2rem;min-height:2rem}.flip-rtl{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.svg{display:block}"}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]}]);function m(){"undefined"!=typeof customElements&&["calcite-icon"].forEach(h=>{"calcite-icon"===h&&(customElements.get(h)||customElements.define(h,T))})}m()},83623:(q,V,a)=>{a.d(V,{c:()=>S});var d=a(76210);function S(D,K,E){const R=function v(D){return"intersection"===D?window.IntersectionObserver:"mutation"===D?window.MutationObserver:window.ResizeObserver}(D);return d.Z5.isBrowser?new R(K,E):void 0}},7006:(q,V,a)=>{a.d(V,{A:()=>C,B:()=>I,C:()=>O,D:()=>U,E:()=>G,F:()=>z,G:()=>Y,H:()=>X,I:()=>Q,J:()=>re,K:()=>se,a:()=>K,b:()=>E,c:()=>D,d:()=>R,e:()=>v,f:()=>M,g:()=>ae,h:()=>L,i:()=>A,j:()=>T,k:()=>h,l:()=>g,m:()=>_,n:()=>y,o:()=>m,p:()=>j,q:()=>B,r:()=>l,s:()=>P,t:()=>p,u:()=>F,v:()=>N,w:()=>x,x:()=>J,y:()=>$,z:()=>w});var d=a(4918),S=a(15994);function v(b){return d.G.extendedSpatialReferenceInfo(b)}function D(b,W,H){return d.G.clip(S.N,b,W,H)}function K(b,W,H){return d.G.cut(S.N,b,W,H)}function E(b,W,H){return d.G.contains(S.N,b,W,H)}function R(b,W,H){return d.G.crosses(S.N,b,W,H)}function M(b,W,H,Z){return d.G.distance(S.N,b,W,H,Z)}function L(b,W,H){return d.G.equals(S.N,b,W,H)}function A(b,W,H){return d.G.intersects(S.N,b,W,H)}function p(b,W,H){return d.G.touches(S.N,b,W,H)}function x(b,W,H){return d.G.within(S.N,b,W,H)}function T(b,W,H){return d.G.disjoint(S.N,b,W,H)}function m(b,W,H){return d.G.overlaps(S.N,b,W,H)}function l(b,W,H,Z){return d.G.relate(S.N,b,W,H,Z)}function h(b,W){return d.G.isSimple(S.N,b,W)}function P(b,W){return d.G.simplify(S.N,b,W)}function g(b,W,H=!1){return d.G.convexHull(S.N,b,W,H)}function _(b,W,H){return d.G.difference(S.N,b,W,H)}function y(b,W,H){return d.G.symmetricDifference(S.N,b,W,H)}function j(b,W,H){return d.G.intersect(S.N,b,W,H)}function F(b,W,H=null){return d.G.union(S.N,b,W,H)}function B(b,W,H,Z,k,ee,te){return d.G.offset(S.N,b,W,H,Z,k,ee,te)}function N(b,W,H,Z,k=!1){return d.G.buffer(S.N,b,W,H,Z,k)}function J(b,W,H,Z,k,ee,te){return d.G.geodesicBuffer(S.N,b,W,H,Z,k,ee,te)}function $(b,W,H,Z=!0){return d.G.nearestCoordinate(S.N,b,W,H,Z)}function w(b,W,H){return d.G.nearestVertex(S.N,b,W,H)}function C(b,W,H,Z,k){return d.G.nearestVertices(S.N,b,W,H,Z,k)}function I(b,W,H,Z){if(null==W||null==Z)throw new Error("Illegal Argument Exception");const k=d.G.rotate(W,H,Z);return k.spatialReference=b,k}function O(b,W,H){if(null==W||null==H)throw new Error("Illegal Argument Exception");const Z=d.G.flipHorizontal(W,H);return Z.spatialReference=b,Z}function U(b,W,H){if(null==W||null==H)throw new Error("Illegal Argument Exception");const Z=d.G.flipVertical(W,H);return Z.spatialReference=b,Z}function G(b,W,H,Z,k){return d.G.generalize(S.N,b,W,H,Z,k)}function z(b,W,H,Z){return d.G.densify(S.N,b,W,H,Z)}function Y(b,W,H,Z,k=0){return d.G.geodesicDensify(S.N,b,W,H,Z,k)}function X(b,W,H){return d.G.planarArea(S.N,b,W,H)}function Q(b,W,H){return d.G.planarLength(S.N,b,W,H)}function re(b,W,H,Z){return d.G.geodesicArea(S.N,b,W,H,Z)}function se(b,W,H,Z){return d.G.geodesicLength(S.N,b,W,H,Z)}const ae=Object.freeze(Object.defineProperty({__proto__:null,extendedSpatialReferenceInfo:v,clip:D,cut:K,contains:E,crosses:R,distance:M,equals:L,intersects:A,touches:p,within:x,disjoint:T,overlaps:m,relate:l,isSimple:h,simplify:P,convexHull:g,difference:_,symmetricDifference:y,intersect:j,union:F,offset:B,buffer:N,geodesicBuffer:J,nearestCoordinate:$,nearestVertex:w,nearestVertices:C,rotate:I,flipHorizontal:O,flipVertical:U,generalize:G,densify:z,geodesicDensify:Y,planarArea:X,planarLength:Q,geodesicArea:re,geodesicLength:se},Symbol.toStringTag,{value:"Module"}))},2071:(q,V,a)=>{a.d(V,{b:()=>h,c:()=>l,d:()=>j,g:()=>F,i:()=>C,m:()=>ae}),a(8314);var A,Z,S=a(63290),v=a(21286),D=a(62208),K=a(28347),E=a(84161),R=a(28093),M=a(993),L=a(4794);(Z=A||(A={}))[Z.X=0]="X",Z[Z.Y=1]="Y",Z[Z.Z=2]="Z";var p=a(70562),x=a(34054),T=a(26242);const m=S.Z.getLogger("esri.geometry.support.sphere");function l(){return(0,L.c)()}function h(Z,k=l()){return(0,M.c)(k,Z)}function j(Z){return Z[3]}function F(Z){return Z}function $(Z,k,ee){if((0,D.Wi)(k))return!1;const{origin:te,direction:ne}=k,ie=w;ie[0]=te[0]-Z[0],ie[1]=te[1]-Z[1],ie[2]=te[2]-Z[2];const ce=ne[0]*ne[0]+ne[1]*ne[1]+ne[2]*ne[2],ue=2*(ne[0]*ie[0]+ne[1]*ie[1]+ne[2]*ie[2]),_e=ue*ue-4*ce*(ie[0]*ie[0]+ie[1]*ie[1]+ie[2]*ie[2]-Z[3]*Z[3]);if(_e<0)return!1;const pe=Math.sqrt(_e);let de=(-ue-pe)/(2*ce);const he=(-ue+pe)/(2*ce);return(de<0||he<de&&he>0)&&(de=he),!(de<0||(ee&&(ee[0]=te[0]+ne[0]*de,ee[1]=te[1]+ne[1]*de,ee[2]=te[2]+ne[2]*de),0))}const w=(0,R.c)();function C(Z,k){return $(Z,k,null)}function O(Z,k,ee){const te=T.WM.get(),ne=T.MP.get();(0,E.f)(te,k.origin,k.direction);const ie=j(Z);(0,E.f)(ee,te,k.origin),(0,E.g)(ee,ee,1/(0,E.l)(ee)*ie);const ce=Y(Z,k.origin),ue=(0,x.EU)(k.origin,ee);return(0,K.d)(ne,ue+ce,te),(0,E.m)(ee,ee,ne),ee}function G(Z,k,ee){const te=(0,E.b)(T.WM.get(),k,Z),ne=(0,E.g)(T.WM.get(),te,Z[3]/(0,E.l)(te));return(0,E.a)(ee,ne,Z)}function Y(Z,k){const ee=(0,E.b)(T.WM.get(),k,Z),te=(0,E.l)(ee),ne=j(Z),ie=ne+Math.abs(ne-te);return(0,v.ZF)(ne/ie)}const X=(0,R.c)();function Q(Z,k,ee,te){const ne=(0,E.b)(X,k,Z);switch(ee){case A.X:{const ie=(0,v.jE)(ne,X)[2];return(0,E.s)(te,-Math.sin(ie),Math.cos(ie),0)}case A.Y:{const ie=(0,v.jE)(ne,X),ce=ie[1],ue=ie[2],_e=Math.sin(ce);return(0,E.s)(te,-_e*Math.cos(ue),-_e*Math.sin(ue),Math.cos(ce))}case A.Z:return(0,E.n)(te,ne);default:return}}function re(Z,k){const ee=(0,E.b)(b,k,Z);return(0,E.l)(ee)-Z[3]}function ae(Z,k){const ee=(0,E.d)(Z,k),te=j(Z);return ee<=te*te}const b=(0,R.c)(),W=l();Object.freeze(Object.defineProperty({__proto__:null,create:l,copy:h,fromCenterAndRadius:function P(Z,k){return(0,L.f)(Z[0],Z[1],Z[2],k)},wrap:function g(Z){return Z},clear:function _(Z){Z[0]=Z[1]=Z[2]=Z[3]=0},fromRadius:function y(Z,k){return Z[0]=Z[1]=Z[2]=0,Z[3]=k,Z},getRadius:j,getCenter:F,fromValues:function B(Z,k,ee,te){return(0,L.f)(Z,k,ee,te)},elevate:function N(Z,k,ee){return Z!==ee&&(0,E.c)(ee,Z),ee[3]=Z[3]+k,ee},setExtent:function J(Z,k,ee){return m.error("sphere.setExtent is not yet supported"),Z===ee?ee:h(Z,ee)},intersectRay:$,intersectsRay:C,intersectRayClosestSilhouette:function I(Z,k,ee){if($(Z,k,ee))return ee;const te=O(Z,k,T.WM.get());return(0,E.a)(ee,k.origin,(0,E.g)(T.WM.get(),k.direction,(0,E.i)(k.origin,te)/(0,E.l)(k.direction))),ee},closestPointOnSilhouette:O,closestPoint:function U(Z,k,ee){return $(Z,k,ee)?ee:((0,p.JI)(k,Z,ee),G(Z,ee,ee))},projectPoint:G,distanceToSilhouette:function z(Z,k){const ee=(0,E.b)(T.WM.get(),k,Z),te=(0,E.p)(ee);return Math.sqrt(Math.abs(te-Z[3]*Z[3]))},angleToSilhouette:Y,axisAt:Q,altitudeAt:re,setAltitudeAt:function se(Z,k,ee,te){const ne=re(Z,k),ie=Q(Z,k,A.Z,b),ce=(0,E.g)(b,ie,ee-ne);return(0,E.a)(te,k,ce)},containsPoint:ae,tmpSphere:W},Symbol.toStringTag,{value:"Module"}))},65389:(q,V,a)=>{a.d(V,{Z:()=>S});var d=a(62208);class S{constructor(D){this.size=0,this._start=0,this.maxSize=D,this._buffer=new Array(D)}get entries(){return this._buffer}enqueue(D){if(this.size===this.maxSize){const K=this._buffer[this._start];return this._buffer[this._start]=D,this._start=(this._start+1)%this.maxSize,K}return this._buffer[(this._start+this.size++)%this.maxSize]=D,null}dequeue(){if(0===this.size)return null;const D=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,D}peek(){return 0===this.size?null:this._buffer[this._start]}find(D){if(0===this.size)return null;for(const K of this._buffer)if((0,d.pC)(K)&&D(K))return K;return null}clear(D){let K=this.dequeue();for(;(0,d.pC)(K);)D&&D(K),K=this.dequeue()}}},40405:(q,V,a)=>{a.d(V,{B:()=>P});var d=a(15861),S=a(62208),v=a(22558),D=a(21726),K=a(35948),E=a(34117),R=a(31283),M=a(77712);function L(I){return x[function A(I){return I instanceof Blob?I.type:function p(I){const O=(0,D.Ml)(I);return l[O]||T}(I.url)}(I)]||m}const x={},T="text/plain",m=x[T],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const I in l)x[l[I]]=I;var h=a(29840);function P(I){const O=(0,S.pC)(I)&&I.origins?I.origins:[void 0];return(U,G)=>{const z=function g(I,O,U){if((0,S.pC)(I)&&"resource"===I.type)return function _(I,O,U){const G=(0,E.VZ)(O,U);return{type:String,read:(z,Y,X)=>{const Q=(0,h.r)(z,Y,X);return G.type===String?Q:"function"==typeof G.type?new G.type({url:Q}):void 0},write:{writer(z,Y,X,Q){if(!Q||!Q.resources)return"string"==typeof z?void(Y[X]=(0,h.t)(z,Q)):void(Y[X]=z.write({},Q));const re=function w(I){return(0,S.Wi)(I)?null:"string"==typeof I?I:I.url}(z),se=re?(0,h.t)(re,le(oe({},Q),{verifyItemRelativeUrls:Q&&Q.verifyItemRelativeUrls?{writtenUrls:Q.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null}),h.M.NO):null,ae=G.type!==String&&(!(0,v.l)(this)||Q&&Q.origin&&this.originIdOf(U)>(0,R.M9)(Q.origin));Q&&Q.portalItem&&(0,S.pC)(se)&&!(0,D.YP)(se)?ae?function j(I,O,U,G,z,Y,X,Q){const re=X.portalItem.resourceFromPath(G),se=N(U,G,X);L(se)===(0,D.Ml)(re.path)?(B(I,O,re,se,X.resources.toUpdate),z[Y]=G):y(I,O,U,G,z,Y,X,Q)}(this,U,z,se,Y,X,Q,I):function F(I,O,U,G){G.resources.toKeep.push({resource:G.portalItem.resourceFromPath(I)}),O[U]=I}(se,Y,X,Q):Q&&Q.portalItem&&((0,S.Wi)(se)||(0,S.pC)((0,h.i)(se))||(0,D.jc)(se)||ae)?y(this,U,z,se,Y,X,Q,I):Y[X]=se}}}}(I,O,U);switch((0,S.pC)(I)&&I.type?I.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:G,write:z}=h.p;return{read:G,write:z}}}}(I,U,G);for(const Y of O){const X=(0,M.CJ)(U,Y,G);for(const Q in z)X[Q]=z[Q]}}}function y(I,O,U,G,z,Y,X,Q){const re=(0,K.D)(),se=N(U,G,X),ae=(0,D.v_)((0,S.U2)(Q,"prefix"),re),b=`${ae}.${L(se)}`,W=X.portalItem.resourceFromPath(b);(0,D.jc)(G)&&X.resources.pendingOperations.push(function J(I){return $.apply(this,arguments)}(G).then(H=>{W.path=`${ae}.${L(H)}`,z[Y]=W.itemRelativeUrl}).catch(()=>{})),B(I,O,W,se,X.resources.toAdd),z[Y]=W.itemRelativeUrl}function B(I,O,U,G,z){z.push({resource:U,content:G,finish:Y=>{!function C(I,O,U){"string"==typeof I[O]?I[O]=U.url:I[O].url=U.url}(I,O,Y)}})}function N(I,O,U){return"string"==typeof I?{url:O}:new Blob([JSON.stringify(I.toJSON(U))],{type:"application/json"})}function $(){return($=(0,d.Z)(function*(I){const O=(yield Promise.resolve().then(a.bind(a,84792))).default,{data:U}=yield O(I,{responseType:"blob"});return U})).apply(this,arguments)}},77777:(q,V,a)=>{a.r(V),a.d(V,{hydratedAdapter:()=>E});var d=a(2004),S=a(72854),v=a(49672),D=a(37118),K=a(55214);const E={convertToGEGeometry:function R(T,m){if(null==m)return null;let l="cache"in m?m.cache._geVersion:void 0;return null==l&&(l=T.convertJSONToGeometry(m),"cache"in m&&(m.cache._geVersion=l)),l},exportPoint:function M(T,m,l){const h=T.hasZ(m),P=T.hasM(m),g=new v.Z({x:T.getPointX(m),y:T.getPointY(m),spatialReference:l});return h&&(g.z=T.getPointZ(m)),P&&(g.m=T.getPointM(m)),g.cache._geVersion=m,g},exportPolygon:function L(T,m,l){const h=new D.Z({rings:T.exportPaths(m),hasZ:T.hasZ(m),hasM:T.hasM(m),spatialReference:l});return h.cache._geVersion=m,h},exportPolyline:function A(T,m,l){const h=new K.Z({paths:T.exportPaths(m),hasZ:T.hasZ(m),hasM:T.hasM(m),spatialReference:l});return h.cache._geVersion=m,h},exportMultipoint:function p(T,m,l){const h=new S.Z({hasZ:T.hasZ(m),hasM:T.hasM(m),points:T.exportPoints(m),spatialReference:l});return h.cache._geVersion=m,h},exportExtent:function x(T,m,l){const h=T.hasZ(m),P=T.hasM(m),g=new d.Z({xmin:T.getXMin(m),ymin:T.getYMin(m),xmax:T.getXMax(m),ymax:T.getYMax(m),spatialReference:l});if(h){const _=T.getZExtent(m);g.zmin=_.vmin,g.zmax=_.vmax}if(P){const _=T.getMExtent(m);g.mmin=_.vmin,g.mmax=_.vmax}return g.cache._geVersion=m,g}}},32825:(q,V,a)=>{a.r(V),a.d(V,{buffer:()=>v.v,clip:()=>v.c,contains:()=>v.b,convexHull:()=>v.l,crosses:()=>v.d,cut:()=>v.a,densify:()=>v.F,difference:()=>v.m,disjoint:()=>v.j,distance:()=>v.f,equals:()=>v.h,extendedSpatialReferenceInfo:()=>v.e,flipHorizontal:()=>v.C,flipVertical:()=>v.D,generalize:()=>v.E,geodesicArea:()=>v.J,geodesicBuffer:()=>v.x,geodesicDensify:()=>v.G,geodesicLength:()=>v.K,intersect:()=>v.p,intersects:()=>v.i,isSimple:()=>v.k,nearestCoordinate:()=>v.y,nearestVertex:()=>v.z,nearestVertices:()=>v.A,offset:()=>v.q,overlaps:()=>v.o,planarArea:()=>v.H,planarLength:()=>v.I,relate:()=>v.r,rotate:()=>v.B,simplify:()=>v.s,symmetricDifference:()=>v.n,touches:()=>v.t,union:()=>v.u,within:()=>v.w}),a(4918),a(15994);var v=a(7006)},57932:(q,V,a)=>{a.d(V,{$7:()=>T,$e:()=>E,E0:()=>p,N5:()=>x,lW:()=>R});var d=a(15861),v=(a(8314),a(26584)),D=a(62208),K=a(21726);function E(m){const l=p(m);return(0,D.pC)(l)?l.toDataURL():""}function R(m){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(m){const l=p(m);if((0,D.Wi)(l))throw new v.Z("imageToArrayBuffer","Unsupported image type");const h=yield L(m),P=yield new Promise(g=>l.toBlob(g,h));if(!P)throw new v.Z("imageToArrayBuffer","Failed to encode image");return{data:yield P.arrayBuffer(),type:h}})).apply(this,arguments)}function L(m){return A.apply(this,arguments)}function A(){return(A=(0,d.Z)(function*(m){if(!(m instanceof HTMLImageElement))return"image/png";const l=m.src;if((0,K.HK)(l)){const{mediaType:h}=(0,K.sJ)(l);return"image/jpeg"===h?h:"image/png"}return/\.png$/i.test(l)?"image/png":/\.(jpg|jpeg)$/i.test(l)?"image/jpeg":"image/png"})).apply(this,arguments)}function p(m){if(m instanceof HTMLCanvasElement)return m;if(m instanceof HTMLVideoElement)return null;const l=document.createElement("canvas");l.width=m.width,l.height=m.height;const h=l.getContext("2d");return m instanceof HTMLImageElement?h.drawImage(m,0,0,m.width,m.height):m instanceof ImageData&&h.putImageData(m,0,0),l}function x(m){const l=[],h=new Uint8Array(m);for(let P=0;P<h.length;P++)l.push(String.fromCharCode(h[P]));return"data:application/octet-stream;base64,"+btoa(l.join(""))}function T(m){if(m.byteLength<8)return!1;const l=new Uint8Array(m);return 137===l[0]&&80===l[1]&&78===l[2]&&71===l[3]&&13===l[4]&&10===l[5]&&26===l[6]&&10===l[7]}},70562:(q,V,a)=>{a.d(V,{JI:()=>m,Ue:()=>E,re:()=>M}),a(85931);var S=a(97535),v=a(84161),D=a(28093);function E(P){return P?{origin:(0,D.a)(P.origin),direction:(0,D.a)(P.direction)}:{origin:(0,D.c)(),direction:(0,D.c)()}}function M(P,g){const _=h.get();return _.origin=P,_.direction=g,_}function m(P,g,_){const y=(0,v.e)(P.direction,(0,v.b)(_,g,P.origin));return(0,v.a)(_,P.origin,(0,v.g)(_,P.direction,y)),_}a(26242);const h=new S.x(function l(){return{origin:null,direction:null}})},34054:(q,V,a)=>{a.d(V,{EU:()=>E});var d=a(21286),S=a(84161),v=a(28093);function E(A,p){const x=(0,S.e)(A,p)/((0,S.l)(A)*(0,S.l)(p));return-(0,d.ZF)(x)}(0,v.c)(),(0,v.c)()},1476:(q,V,a)=>{a.d(V,{S:()=>S,X:()=>d});const d=1;function S(v,D){var E;let K=0;for(const R of D){const M=null==(E=R.attributes)?void 0:E[v];"number"==typeof M&&isFinite(M)&&(K=Math.max(K,M))}return K}},35775:(q,V,a)=>{a.d(V,{O0:()=>p,av:()=>R,b:()=>P,d1:()=>L,og:()=>m});var d=a(15861),S=a(62208),v=a(37053),D=a(36630);class K{constructor(){this.code=null,this.description=null}}class E{constructor(y){this.error=new K,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=y}}function R(_){return new E(_)}class M{constructor(y){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=y}}function L(_){return new M(_)}const A=new Set;function p(_,y,j,F=!1,B){A.clear();for(const N in j){const J=_.get(N);if(!J)continue;const $=j[N],w=x(J,$);if(w!==$&&B&&B.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:J,originalValue:$,sanitizedValue:w}}),A.add(J.name),J&&(F||J.editable)){const C=(0,D.Qc)(J,w);if(C)return R((0,D.vP)(C,J,w));y[J.name]=w}}for(const N of _.requiredFields)if(!A.has(N.name))return R(`missing required field "${N.name}"`);return null}function x(_,y){let j=y;return"string"==typeof y&&(0,D.H7)(_)?j=parseFloat(y):null!=y&&(0,D.qN)(_)&&"string"!=typeof y&&(j=String(y)),(0,D.Pz)(j)}let T;function m(_,y){if(!_||!(0,v.JY)(y))return _;if("rings"in _||"paths"in _){if((0,S.Wi)(T))throw new TypeError("geometry engine not loaded");return T.simplify(y,_)}return _}function l(){return h.apply(this,arguments)}function h(){return(h=(0,d.Z)(function*(){return(0,S.Wi)(T)&&(T=yield Promise.all([a.e(4918),a.e(8592)]).then(a.bind(a,32825))),T})).apply(this,arguments)}function P(_,y){return g.apply(this,arguments)}function g(){return(g=(0,d.Z)(function*(_,y){!(0,v.JY)(_)||"esriGeometryPolygon"!==y&&"esriGeometryPolyline"!==y||(yield l())})).apply(this,arguments)}},5143:(q,V,a)=>{a.d(V,{Z:()=>x});var d=a(17626),v=(a(29132),a(77712)),R=(a(85931),a(8314),a(90912),a(68653)),M=a(76898),L=a(51026),A=a(28930),p=a(65234);const x=T=>{let m=class extends T{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(l,h){return null!=h.minLOD&&null!=h.maxLOD?l:0}readMaxScale(l,h){return null!=h.minLOD&&null!=h.maxLOD?l:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(l,h){return h.capabilities&&h.capabilities.includes("Tilemap")?new A.y({layer:this}):null}};return(0,d._)([(0,v.Cb)({json:{read:{source:"copyrightText"}}})],m.prototype,"copyright",void 0),(0,d._)([(0,v.Cb)()],m.prototype,"minScale",void 0),(0,d._)([(0,R.r)("service","minScale")],m.prototype,"readMinScale",null),(0,d._)([(0,v.Cb)()],m.prototype,"maxScale",void 0),(0,d._)([(0,R.r)("service","maxScale")],m.prototype,"readMaxScale",null),(0,d._)([(0,v.Cb)({type:p.Z})],m.prototype,"spatialReference",void 0),(0,d._)([(0,v.Cb)({readOnly:!0})],m.prototype,"supportsBlankTile",null),(0,d._)([(0,v.Cb)(L.h)],m.prototype,"tileInfo",void 0),(0,d._)([(0,v.Cb)()],m.prototype,"tilemapCache",void 0),(0,d._)([(0,R.r)("service","tilemapCache",["capabilities"])],m.prototype,"readTilemapCache",null),(0,d._)([(0,v.Cb)()],m.prototype,"version",void 0),m=(0,d._)([(0,M.j)("esri.layers.mixins.ArcGISCachedService")],m),m}},22825:(q,V,a)=>{a.d(V,{A:()=>S});const d=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function S(v){return d.some(([D,K])=>v>=D&&v<=K)}},14772:(q,V,a)=>{a.d(V,{R:()=>l});var d=a(17626),S=a(14517),v=a(80542),D=a(62208),K=a(95737),E=a(77712),A=(a(85931),a(8314),a(90912),a(76898)),p=a(13812),x=a(59990),T=a(13410);const m={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let l=class extends((0,v.p)(S.Z)){constructor(h){super(h),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const h=this.visibleSublayers.map(P=>{const g=(0,x.f)(this.floors,P);return P.toExportImageJSON(g)});return h.length?JSON.stringify(h):null}get hasDynamicLayers(){return this.layer&&(0,T.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(h){this._get("layer")!==h&&(this._set("layer",h),this.handles.remove("layer"),h&&this.handles.add([h.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),h.on("sublayer-update",P=>this.notifyChange(m[P.propertyName]))],"layer"))}get layers(){const h=this.visibleSublayers;return h?h.length?"show:"+h.map(P=>P.id).join(","):"show:-1":null}get layerDefs(){var g;const h=!!(null==(g=this.floors)?void 0:g.length),P=this.visibleSublayers.filter(_=>null!=_.definitionExpression||h&&null!=_.floorInfo);return P.length?JSON.stringify(P.reduce((_,y)=>{const j=(0,x.f)(this.floors,y),F=(0,K._)(j,y.definitionExpression);return(0,D.pC)(F)&&(_[y.id]=F),_},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const h=this.layer;return h&&(h.commitProperty("dpi"),h.commitProperty("imageFormat"),h.commitProperty("imageTransparency"),h.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const h=[];if(!this.layer)return h;const P=this.layer.sublayers,g=y=>{const j=this.scale;y.visible&&(0===j||(0===y.minScale||j<=y.minScale)&&(0===y.maxScale||j>=y.maxScale))&&(y.sublayers?y.sublayers.forEach(g):h.unshift(y))};P&&P.forEach(g);const _=this._get("visibleSublayers");return!_||_.length!==h.length||_.some((y,j)=>h[j]!==y)?h:_}toJSON(){const h=this.layer;let P={dpi:h.dpi,format:h.imageFormat,transparent:h.imageTransparency,gdbVersion:h.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?P.dynamicLayers=this.dynamicLayers:P=le(oe({},P),{layers:this.layers,layerDefs:this.layerDefs}),P}};(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"dynamicLayers",null),(0,d._)([(0,E.Cb)()],l.prototype,"floors",void 0),(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"hasDynamicLayers",null),(0,d._)([(0,E.Cb)()],l.prototype,"layer",null),(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"layers",null),(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"layerDefs",null),(0,d._)([(0,E.Cb)({type:Number})],l.prototype,"scale",void 0),(0,d._)([(0,E.Cb)(p.qG)],l.prototype,"timeExtent",void 0),(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"version",null),(0,d._)([(0,E.Cb)({readOnly:!0})],l.prototype,"visibleSublayers",null),l=(0,d._)([(0,A.j)("esri.layers.mixins.ExportImageParameters")],l)},51920:(q,V,a)=>{a.d(V,{j:()=>A});var d=a(17626),S=a(14517),v=a(80542),D=a(77712),M=(a(85931),a(8314),a(90912),a(76898));const L={visible:"visibleSublayers"};let A=class extends((0,v.p)(S.Z)){constructor(p){super(p),this.scale=0}set layer(p){this._get("layer")!==p&&(this._set("layer",p),this.handles.remove("layer"),p&&this.handles.add([p.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),p.on("wms-sublayer-update",x=>this.notifyChange(L[x.propertyName]))],"layer"))}get layers(){const{visibleSublayers:p}=this;return p.filter(x=>x.name).map(x=>x.name).join(",")}get version(){this.commitProperty("layers");const p=this.layer;return p&&p.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:p,scale:x}=this,T=null==p?void 0:p.sublayers,m=[],l=h=>{const{minScale:P,maxScale:g,sublayers:_,visible:y}=h;y&&(0===x||(0===P||x<=P)&&(0===g||x>=g))&&(_?_.forEach(l):m.unshift(h))};return null==T||T.forEach(l),m}toJSON(){const{layer:p,layers:x}=this,{imageFormat:T,imageTransparency:m,version:l}=p;return{format:T,request:"GetMap",service:"WMS",styles:"",transparent:m?"TRUE":"FALSE",version:l,layers:x}}};(0,d._)([(0,D.Cb)()],A.prototype,"layer",null),(0,d._)([(0,D.Cb)({readOnly:!0})],A.prototype,"layers",null),(0,d._)([(0,D.Cb)({type:Number})],A.prototype,"scale",void 0),(0,d._)([(0,D.Cb)({readOnly:!0})],A.prototype,"version",null),(0,d._)([(0,D.Cb)({readOnly:!0})],A.prototype,"visibleSublayers",null),A=(0,d._)([(0,M.j)("esri.layers.support.ExportWMSImageParameters")],A)},74711:(q,V,a)=>{a.d(V,{W:()=>L});var d=a(15861),S=a(24263),v=a(84792),D=a(62208),K=a(10699),E=a(32258),R=a(84687),M=a(55463);class L{constructor(p,x,T,m){this.parsedUrl=p,this.portalItem=x,this.apiKey=T,this.signal=m,this.rootDocument=null;const l=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);l&&(this.urlParts={root:l[1],layerId:parseInt(l[2],10)})}fetch(){var p=this;return(0,d.Z)(function*(){var m;if(!p.urlParts)return null;const x=null!=(m=p.portalItem)?m:yield p._portalItemFromServiceItemId();if((0,D.Wi)(x))return p._loadFromUrl();const T=yield p._findAndLoadRelatedPortalItem(x);return(0,D.Wi)(T)?null:p._loadFeatureLayerFromPortalItem(T)})()}fetchPortalItem(){var p=this;return(0,d.Z)(function*(){var T;if(!p.urlParts)return null;const x=null!=(T=p.portalItem)?T:yield p._portalItemFromServiceItemId();return(0,D.Wi)(x)?null:p._findAndLoadRelatedPortalItem(x)})()}_fetchRootDocument(){var p=this;return(0,d.Z)(function*(){if((0,D.pC)(p.rootDocument))return p.rootDocument;if((0,D.Wi)(p.urlParts))return p.rootDocument={},{};const x={query:{f:"json",token:p.apiKey},responseType:"json",signal:p.signal},T=`${p.urlParts.root}/SceneServer`;try{const m=yield(0,v.default)(T,x);p.rootDocument=m.data}catch(m){p.rootDocument={}}return p.rootDocument})()}_fetchServiceOwningPortalUrl(){var p=this;return(0,d.Z)(function*(){const x=S.id.findServerInfo(p.parsedUrl.path);if(null==x?void 0:x.owningSystemUrl)return x.owningSystemUrl;const T=p.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const m=(yield(0,v.default)(T,{query:{f:"json"},responseType:"json",signal:p.signal})).data.owningSystemUrl;if(m)return m}catch(m){(0,K.r9)(m)}return null})()}_findAndLoadRelatedPortalItem(p){var x=this;return(0,d.Z)(function*(){try{return(yield p.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:x.signal})).find(T=>"Feature Service"===T.type)||null}catch(T){return(0,K.r9)(T),null}})()}_loadFeatureLayerFromPortalItem(p){var x=this;return(0,d.Z)(function*(){yield p.load({signal:x.signal});const T=yield x._findMatchingAssociatedSublayerUrl(p.url);return new E.default({url:T,portalItem:p}).load({signal:x.signal})})()}_loadFromUrl(){var p=this;return(0,d.Z)(function*(){const x=yield p._findMatchingAssociatedSublayerUrl(`${p.urlParts.root}/FeatureServer`);return new E.default({url:x}).load({signal:p.signal})})()}_findMatchingAssociatedSublayerUrl(p){var x=this;return(0,d.Z)(function*(){const T=p.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),m={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:x.signal},l=x.urlParts.layerId,h=x._fetchRootDocument(),P=(0,v.default)(T,m),[g,_]=yield Promise.all([P,h]),y=_&&_.layers,j=g.data&&g.data.layers;if(!Array.isArray(j))throw new Error("expected layers array");if(Array.isArray(y)){for(let F=0;F<Math.min(y.length,j.length);F++)if(y[F].id===l)return`${T}/${j[F].id}`}else if(l<j.length)return`${T}/${j[l].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var p=this;return(0,d.Z)(function*(){const x=(yield p._fetchRootDocument()).serviceItemId;if(!x)return null;const T=new M.default({id:x,apiKey:p.apiKey}),m=yield p._fetchServiceOwningPortalUrl();(0,D.pC)(m)&&(T.portal=new R.Z({url:m}));try{return T.load({signal:p.signal})}catch(l){return(0,K.r9)(l),null}})()}}},35031:(q,V,a)=>{a.d(V,{H3:()=>g,QI:()=>x,U4:()=>L,Yh:()=>m});var d=a(17626),S=a(86810),v=a(77712),R=(a(85931),a(8314),a(90912),a(55342)),M=a(76898);let L=class extends S.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,d._)([(0,v.Cb)({type:Number})],L.prototype,"nodesPerPage",void 0),(0,d._)([(0,v.Cb)({type:Number})],L.prototype,"rootIndex",void 0),(0,d._)([(0,v.Cb)({type:String})],L.prototype,"lodSelectionMetricType",void 0),L=(0,d._)([(0,M.j)("esri.layer.support.I3SNodePageDefinition")],L);let A=class extends S.wq{constructor(){super(...arguments),this.factor=1}};(0,d._)([(0,v.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],A.prototype,"id",void 0),(0,d._)([(0,v.Cb)({type:Number})],A.prototype,"factor",void 0),A=(0,d._)([(0,M.j)("esri.layer.support.I3SMaterialTexture")],A);let p=class extends S.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,d._)([(0,v.Cb)({type:[Number]})],p.prototype,"baseColorFactor",void 0),(0,d._)([(0,v.Cb)({type:A})],p.prototype,"baseColorTexture",void 0),(0,d._)([(0,v.Cb)({type:A})],p.prototype,"metallicRoughnessTexture",void 0),(0,d._)([(0,v.Cb)({type:Number})],p.prototype,"metallicFactor",void 0),(0,d._)([(0,v.Cb)({type:Number})],p.prototype,"roughnessFactor",void 0),p=(0,d._)([(0,M.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],p);let x=class extends S.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,d._)([(0,R.J)({opaque:"opaque",mask:"mask",blend:"blend"})],x.prototype,"alphaMode",void 0),(0,d._)([(0,v.Cb)({type:Number})],x.prototype,"alphaCutoff",void 0),(0,d._)([(0,v.Cb)({type:Boolean})],x.prototype,"doubleSided",void 0),(0,d._)([(0,R.J)({none:"none",back:"back",front:"front"})],x.prototype,"cullFace",void 0),(0,d._)([(0,v.Cb)({type:A})],x.prototype,"normalTexture",void 0),(0,d._)([(0,v.Cb)({type:A})],x.prototype,"occlusionTexture",void 0),(0,d._)([(0,v.Cb)({type:A})],x.prototype,"emissiveTexture",void 0),(0,d._)([(0,v.Cb)({type:[Number]})],x.prototype,"emissiveFactor",void 0),(0,d._)([(0,v.Cb)({type:p})],x.prototype,"pbrMetallicRoughness",void 0),x=(0,d._)([(0,M.j)("esri.layer.support.I3SMaterialDefinition")],x);let T=class extends S.wq{};(0,d._)([(0,v.Cb)({type:String,json:{read:{source:["name","index"],reader:(_,y)=>null!=_?_:`${y.index}`}}})],T.prototype,"name",void 0),(0,d._)([(0,R.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],T.prototype,"format",void 0),T=(0,d._)([(0,M.j)("esri.layer.support.I3STextureFormat")],T);let m=class extends S.wq{constructor(){super(...arguments),this.atlas=!1}};(0,d._)([(0,v.Cb)({type:[T]})],m.prototype,"formats",void 0),(0,d._)([(0,v.Cb)({type:Boolean})],m.prototype,"atlas",void 0),m=(0,d._)([(0,M.j)("esri.layer.support.I3STextureSetDefinition")],m);let l=class extends S.wq{};(0,d._)([(0,R.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],l.prototype,"type",void 0),(0,d._)([(0,v.Cb)({type:Number})],l.prototype,"component",void 0),l=(0,d._)([(0,M.j)("esri.layer.support.I3SGeometryAttribute")],l);let h=class extends S.wq{};(0,d._)([(0,R.J)({draco:"draco"})],h.prototype,"encoding",void 0),(0,d._)([(0,v.Cb)({type:[String]})],h.prototype,"attributes",void 0),h=(0,d._)([(0,M.j)("esri.layer.support.I3SGeometryCompressedAttributes")],h);let P=class extends S.wq{constructor(){super(...arguments),this.offset=0}};(0,d._)([(0,v.Cb)({type:Number})],P.prototype,"offset",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"position",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"normal",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"uv0",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"color",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"uvRegion",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"featureId",void 0),(0,d._)([(0,v.Cb)({type:l})],P.prototype,"faceRange",void 0),(0,d._)([(0,v.Cb)({type:h})],P.prototype,"compressedAttributes",void 0),P=(0,d._)([(0,M.j)("esri.layer.support.I3SGeometryBuffer")],P);let g=class extends S.wq{};(0,d._)([(0,R.J)({triangle:"triangle"})],g.prototype,"topology",void 0),(0,d._)([(0,v.Cb)()],g.prototype,"geometryBuffers",void 0),g=(0,d._)([(0,M.j)("esri.layer.support.I3SGeometryDefinition")],g)},28930:(q,V,a)=>{a.d(V,{y:()=>$});var N,d=a(15861),S=a(17626),v=a(84792),D=a(14517),K=a(27306),E=a(26584),R=a(80542),M=a(63290),L=a(93961),A=a(77029),p=a(10699),x=a(32917),T=a(50618),m=a(21726),l=a(77712),h=a(85931),g=(a(8314),a(66656)),_=a(76898),y=a(58817);class j{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(C,I){if("unknown"!==this._allAvailability)return this._allAvailability;const O=(C-this.location.top)*this.location.width+(I-this.location.left),G=O>>3,z=this._tileAvailabilityBitSet;return G<0||G>z.length?"unknown":z[G]&1<<O%8?"available":"unavailable"}_updateFromData(C){let U=!0,G=!0;const z=Math.ceil(this.location.width*this.location.height/8),Y=new Uint8Array(z);let X=0;for(let Q=0;Q<C.length;Q++){const re=Q%8;C[Q]?(G=!1,Y[X]|=1<<re):U=!1,7===re&&++X}G?this._allAvailability="unavailable":U?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=Y,this.byteSize+=Y.length)}static fromDefinition(C,I){const O=C.service.request||v.default,{row:U,col:G,width:z,height:Y}=C,X={query:{f:"json"}};return I=I?oe(oe({},X),I):X,O(function B(w){let C;if("vector-tile"===w.service.type)C=`${w.service.url}/tilemap/${w.level}/${w.row}/${w.col}/${w.width}/${w.height}`;else{const O=w.service.tileServers;C=`${O&&O.length?O[w.row%O.length]:w.service.url}/tilemap/${w.level}/${w.row}/${w.col}/${w.width}/${w.height}`}const I=w.service.query;return I&&(C=`${C}?${I}`),C}(C),I).then(Q=>Q.data).catch(Q=>{if(Q&&Q.details&&422===Q.details.httpStatus)return{location:{top:U,left:G,width:z,height:Y},valid:!0,data:(0,h.a9)(z*Y,0)};throw Q}).then(Q=>{if(Q.location&&(Q.location.top!==U||Q.location.left!==G||Q.location.width!==z||Q.location.height!==Y))throw new E.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:Q,definition:{top:U,left:G,width:z,height:Y}});return j.fromJSON(Q)})}static fromJSON(C){j._validateJSON(C);const I=new j;return I.location=Object.freeze((0,y.d9)(C.location)),I._updateFromData(C.data),Object.freeze(I)}static _validateJSON(C){if(!C||!C.location)throw new E.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===C.valid)throw new E.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!C.data)throw new E.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(C.data))throw new E.Z("tilemap:data-mismatch","Data must be an array of numbers");if(C.data.length!==C.location.width*C.location.height)throw new E.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function F(w){return`${w.level}/${w.row}/${w.col}/${w.width}/${w.height}`}const J=M.Z.getLogger("esri.layers.support.TilemapCache");let $=N=class extends((0,R.p)(D.Z)){constructor(w){super(w),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*K.Y8.MEGABYTES,this.request=v.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new L.Z(this.cacheByteSize),this.own([(0,x.YP)(()=>{const{layer:w}=this;return[null==w?void 0:w.parsedUrl,null==w?void 0:w.tileServers,null==w?void 0:w.apiKey,null==w?void 0:w.customParameters]},()=>this._initializeTilemapDefinition()),(0,x.YP)(()=>{var w,C;return null==(C=null==(w=this.layer)?void 0:w.tileInfo)?void 0:C.lods},w=>this._initializeAvailableLevels(w),x.tX)]),this._initializeTilemapDefinition()}castLevels(w){return w<=2?(J.error("Minimum levels for Tilemap is 3, but got ",w),3):w}get size(){return 1<<this.levels}fetchTilemap(w,C,I,O){if(!this._availableLevels[w])return Promise.reject(new E.Z("tilemap-cache:level-unavailable",`Level ${w} is unavailable in the service`));const U=this._tmpTilemapDefinition,G=this._tilemapFromCache(w,C,I,U);if(G)return Promise.resolve(G);const z=O&&O.signal;return O=le(oe({},O),{signal:null}),new Promise((Y,X)=>{(0,p.fu)(z,()=>X((0,p.zE)()));const Q=F(U);let re=this._pendingTilemapRequests[Q];if(!re){re=j.fromDefinition(U,O).then(ae=>(this._tilemapCache.put(Q,ae,ae.byteSize),ae));const se=()=>delete this._pendingTilemapRequests[Q];this._pendingTilemapRequests[Q]=re,re.then(se,se)}re.then(Y,X)})}getAvailability(w,C,I){if(!this._availableLevels[w])return"unavailable";const O=this._tilemapFromCache(w,C,I,this._tmpTilemapDefinition);return O?O.getAvailability(C,I):"unknown"}fetchAvailability(w,C,I,O){return this._availableLevels[w]?this.fetchTilemap(w,C,I,O).catch(U=>U).then(U=>{if(U instanceof j){const G=U.getAvailability(C,I);if("unavailable"===G)throw new E.Z("tile-map:tile-unavailable","Tile is not available",{level:w,row:C,col:I});return G}if((0,p.D_)(U))throw U;return"unknown"}):Promise.reject(new E.Z("tilemap-cache:level-unavailable",`Level ${w} is unavailable in the service`))}fetchAvailabilityUpsample(w,C,I,O,U){O.level=w,O.row=C,O.col=I;const G=this.layer.tileInfo;G.updateTileInfo(O);const z=this.fetchAvailability(w,C,I,U).catch(Y=>{if((0,p.D_)(Y))throw Y;if(G.upsampleTile(O))return this.fetchAvailabilityUpsample(O.level,O.row,O.col,O);throw Y});return this._fetchAvailabilityUpsamplePrefetch(O.id,w,C,I,U,z),z}_fetchAvailabilityUpsamplePrefetch(w,C,I,O,U,G){var z=this;return(0,d.Z)(function*(){if(!z._prefetchingEnabled)return;const Y=`prefetch-${w}`;if(z.handles.has(Y))return;const X=new AbortController;G.then(()=>X.abort(),()=>X.abort());let Q=!1;if(z.handles.add({remove(){Q||(Q=!0,X.abort())}},Y),yield(0,T.MU)(10,X.signal).catch(()=>{}),Q||(Q=!0,z.handles.remove(Y)),(0,p.Hc)(X))return;const se={id:w,level:C,row:I,col:O},ae=le(oe({},U),{signal:X.signal}),b=z.layer.tileInfo;for(let W=0;N._prefetches.length<N._maxPrefetch&&b.upsampleTile(se);++W){const H=z.fetchAvailability(se.level,se.row,se.col,ae);N._prefetches.push(H);const Z=()=>{N._prefetches.removeUnordered(H)};H.then(Z,Z)}})()}_initializeTilemapDefinition(){var O;if(!this.layer.parsedUrl)return;const{parsedUrl:w,apiKey:C,customParameters:I}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:w.path,query:(0,m.B7)(le(oe(oe({},w.query),I),{token:null!=C?C:null==(O=w.query)?void 0:O.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(w,C,I,O){O.level=w,O.row=C-C%this.size,O.col=I-I%this.size;const U=F(O);return this._tilemapCache.get(U)}_initializeAvailableLevels(w){this._availableLevels={},w&&w.forEach(C=>this._availableLevels[C.level]=!0)}get test(){const w=this;return{get prefetchingEnabled(){return w._prefetchingEnabled},set prefetchingEnabled(C){w._prefetchingEnabled=C},hasTilemap:(C,I,O)=>!!w._tilemapFromCache(C,I,O,w._tmpTilemapDefinition)}}};$._maxPrefetch=4,$._prefetches=new A.Z({initialSize:N._maxPrefetch}),(0,S._)([(0,l.Cb)({constructOnly:!0,type:Number})],$.prototype,"levels",void 0),(0,S._)([(0,g.p)("levels")],$.prototype,"castLevels",null),(0,S._)([(0,l.Cb)({readOnly:!0,type:Number})],$.prototype,"size",null),(0,S._)([(0,l.Cb)({constructOnly:!0,type:Number})],$.prototype,"cacheByteSize",void 0),(0,S._)([(0,l.Cb)({constructOnly:!0})],$.prototype,"layer",void 0),(0,S._)([(0,l.Cb)({constructOnly:!0})],$.prototype,"request",void 0),$=N=(0,S._)([(0,_.j)("esri.layers.support.TilemapCache")],$)},24578:(q,V,a)=>{a.r(V),a.d(V,{fetchFeatureService:()=>y,fromUrl:()=>M});var d=a(15861),S=a(84792),v=a(26584),D=a(62208),K=a(21726),E=a(38305),R=a(30164);function M(C){return L.apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(C){var z;const I=null==(z=C.properties)?void 0:z.customParameters,O=yield x(C.url,I),U=le(oe({},C.properties),{url:C.url});if(!O.sublayerIds)return null!=O.layerOrTableId&&(U.layerId=O.layerOrTableId,U.sourceJSON=O.sourceJSON),new O.Constructor(U);const G=new((yield a.e(5964).then(a.bind(a,25964))).default)({title:O.parsedUrl.title});return p(G,O,U),G})).apply(this,arguments)}function A(C,I){return C?C.find(O=>O.id===I):null}function p(C,I,O){function U(G,z){const Y=le(oe({},O),{layerId:G,sublayerTitleMode:"service-name"});return(0,D.pC)(z)&&(Y.sourceJSON=z),new I.Constructor(Y)}I.sublayerIds.forEach(G=>{const z=U(G,A(I.sublayerInfos,G));C.add(z)}),I.tableIds.forEach(G=>{const z=U(G,A(I.tableInfos,G));C.tables.add(z)})}function x(C,I){return T.apply(this,arguments)}function T(){return(T=(0,d.Z)(function*(C,I){var ae,b;let O=(0,E.Qc)(C);if((0,D.Wi)(O)&&(O=yield m(C,I)),(0,D.Wi)(O))throw new v.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:C});const{serverType:U,sublayer:G}=O;let z;const Y={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(U){case"MapServer":z=null!=G?"FeatureLayer":N(C,I).then(W=>W?"TileLayer":"MapImageLayer");break;case"ImageServer":z=$(C,{customParameters:I}).then(W=>{const H=W.tileInfo&&W.tileInfo.format;return W.tileInfo?"LERC"!==(null==H?void 0:H.toUpperCase())||W.cacheType&&"elevation"!==W.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":z=$(O.url.path,{customParameters:I}).then(W=>{var H;if(W){if("Voxel"===(null==W?void 0:W.layerType))return"VoxelLayer";if((null==W?void 0:W.layers)&&Array.isArray(W.layers)&&W.layers.length>0){const Z={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},k=null==(H=W.layers[0])?void 0:H.layerType;if(null!=Z[k])return Z[k]}}return"SceneLayer"});break;default:z=Y[U]}const Q="FeatureServer"===U,re={parsedUrl:O,Constructor:null,layerOrTableId:Q?G:null,sublayerIds:null,tableIds:null},se=yield z;if({FeatureLayer:!0,SceneLayer:!0}[se]&&null==G){const W=yield P(C,U,I);Q&&(re.sublayerInfos=W.layerInfos,re.tableInfos=W.tableInfos),W.layerIds.length+W.tableIds.length!==1?(re.sublayerIds=W.layerIds,re.tableIds=W.tableIds):Q&&(re.layerOrTableId=null!=(ae=W.layerIds[0])?ae:W.tableIds[0],re.sourceJSON=null!=(b=W.layerInfos[0])?b:W.tableInfos[0])}return re.Constructor=yield F(se),re})).apply(this,arguments)}function m(C,I){return l.apply(this,arguments)}function l(){return(l=(0,d.Z)(function*(C,I){var X;const O=yield $(C,{customParameters:I});let U=null,G=null;const z=O.type;if("Feature Layer"===z||"Table"===z?(U="FeatureServer",G=O.id):"indexedVector"===z?U="VectorTileServer":O.hasOwnProperty("mapName")?U="MapServer":O.hasOwnProperty("bandCount")&&O.hasOwnProperty("pixelSizeX")?U="ImageServer":O.hasOwnProperty("maxRecordCount")&&O.hasOwnProperty("allowGeometryUpdates")?U="FeatureServer":O.hasOwnProperty("streamUrls")?U="StreamServer":h(O)?(U="SceneServer",G=O.id):O.hasOwnProperty("layers")&&h(null==(X=O.layers)?void 0:X[0])&&(U="SceneServer"),!U)return null;const Y=null!=G?(0,E.DR)(C):null;return{title:(0,D.pC)(Y)&&O.name||(0,K.vt)(C),serverType:U,sublayer:G,url:{path:(0,D.pC)(Y)?Y.serviceUrl:(0,K.mN)(C).path}}})).apply(this,arguments)}function h(C){return(null==C?void 0:C.hasOwnProperty("store"))&&C.hasOwnProperty("id")&&"number"==typeof C.id}function P(C,I,O){return g.apply(this,arguments)}function g(){return(g=(0,d.Z)(function*(C,I,O){let U,G=!1;if("FeatureServer"===I){const X=yield y(C,{customParameters:O});G=!!X.layersJSON,U=X.layersJSON||X.serviceJSON}else U=yield $(C,{customParameters:O});const z=null==U?void 0:U.layers,Y=null==U?void 0:U.tables;return{layerIds:(null==z?void 0:z.map(X=>X.id).reverse())||[],tableIds:(null==Y?void 0:Y.map(X=>X.id).reverse())||[],layerInfos:G?z:[],tableInfos:G?Y:[]}})).apply(this,arguments)}function _(C){return!C.type||"Feature Layer"===C.type}function y(C,I){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(C,I){var z,Y;let O=yield $(C,I);O=O||{},O.layers=(null==(z=O.layers)?void 0:z.filter(_))||[];const U={serviceJSON:O};if(O.currentVersion<10.5)return U;const G=yield $(C+"/layers",I);return U.layersJSON={layers:(null==(Y=null==G?void 0:G.layers)?void 0:Y.filter(_))||[],tables:(null==G?void 0:G.tables)||[]},U})).apply(this,arguments)}function F(C){return B.apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(C){return(0,R.T[C])()})).apply(this,arguments)}function N(C,I){return J.apply(this,arguments)}function J(){return(J=(0,d.Z)(function*(C,I){return(yield $(C,{customParameters:I})).tileInfo})).apply(this,arguments)}function $(C,I){return w.apply(this,arguments)}function w(){return(w=(0,d.Z)(function*(C,I){return(yield(0,S.default)(C,{responseType:"json",query:le(oe({f:"json"},null==I?void 0:I.customParameters),{token:null==I?void 0:I.apiKey})})).data})).apply(this,arguments)}},59787:(q,V,a)=>{a.d(V,{C:()=>d});const d={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},98686:(q,V,a)=>{a.d(V,{CS:()=>l,Cw:()=>m,Yu:()=>y,j5:()=>h,lm:()=>F});var d=a(15861),S=a(59318),v=a(24263),D=a(73281),K=a(84792),E=a(58817),R=a(21726),M=a(65234),L=a(5548),A=a(32442),p=a(33474),x=a(17253);const T={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function m(B){const N=B.folders||[],J=N.slice(),$=new Map,w=new Map,C=new Map,I=new Map,O=new Map,U={esriGeometryPoint:w,esriGeometryPolyline:C,esriGeometryPolygon:I};(B.featureCollection&&B.featureCollection.layers||[]).forEach(z=>{const Y=(0,E.d9)(z);Y.featureSet.features=[];const X=z.featureSet.geometryType;$.set(X,Y);const Q=z.layerDefinition.objectIdField;"esriGeometryPoint"===X?P(w,Q,z.featureSet.features):"esriGeometryPolyline"===X?P(C,Q,z.featureSet.features):"esriGeometryPolygon"===X&&P(I,Q,z.featureSet.features)}),B.groundOverlays&&B.groundOverlays.forEach(z=>{O.set(z.id,z)}),N.forEach(z=>{z.networkLinkIds.forEach(Y=>{const X=function _(B,N,J){const $=function g(B,N){let J;return N.some($=>$.id===B&&(J=$,!0)),J}(B,J);return $&&($.parentFolderId=N,$.networkLink=$),$}(Y,z.id,B.networkLinks);X&&J.push(X)})}),J.forEach(z=>{if(z.featureInfos){z.points=(0,E.d9)($.get("esriGeometryPoint")),z.polylines=(0,E.d9)($.get("esriGeometryPolyline")),z.polygons=(0,E.d9)($.get("esriGeometryPolygon")),z.mapImages=[];for(const Y of z.featureInfos)switch(Y.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const X=U[Y.type].get(Y.id);X&&z[T[Y.type]].featureSet.features.push(X);break}case"GroundOverlay":{const X=O.get(Y.id);X&&z.mapImages.push(X);break}}z.fullExtent=F([z])}});const G=F(J);return{folders:N,sublayers:J,extent:G}}function l(B,N,J,$){const w=v.id&&v.id.findCredential(B);return B=(0,R.fl)(B,{token:w&&w.token}),(0,K.default)(S.Z.kmlServiceUrl,{query:{url:B,model:"simple",folders:"",refresh:0!==J||void 0,outSR:JSON.stringify(N)},responseType:"json",signal:$})}function h(B,N,J=null,$=[]){const w=[],C={},I=N.sublayers,O=N.folders.map(U=>U.id);return I.forEach(U=>{const G=new B;if(J?G.read(U,J):G.read(U),$.length&&O.includes(G.id)&&(G.visible=$.includes(G.id)),C[U.id]=G,null!=U.parentFolderId&&-1!==U.parentFolderId){const z=C[U.parentFolderId];z.sublayers||(z.sublayers=[]),z.sublayers.unshift(G)}else w.unshift(G)}),w}function P(B,N,J){J.forEach($=>{B.set($.attributes[N],$)})}function y(B){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(B){const N=x.default.fromJSON(B.featureSet).features,$=(0,p.i)(B.layerDefinition.drawingInfo.renderer),w=D.Z.fromJSON(B.popupInfo),C=[];for(const I of N){const O=yield $.getSymbolAsync(I);I.symbol=O,I.popupTemplate=w,I.visible=!0,C.push(I)}return C})).apply(this,arguments)}function F(B){const N=(0,L.Ue)(L.Gv),J=(0,L.Ue)(L.Gv);for(const $ of B){if($.polygons&&$.polygons.featureSet&&$.polygons.featureSet.features)for(const w of $.polygons.featureSet.features)(0,A.Yg)(N,w.geometry),(0,L.TC)(J,N);if($.polylines&&$.polylines.featureSet&&$.polylines.featureSet.features)for(const w of $.polylines.featureSet.features)(0,A.Yg)(N,w.geometry),(0,L.TC)(J,N);if($.points&&$.points.featureSet&&$.points.featureSet.features)for(const w of $.points.featureSet.features)(0,A.Yg)(N,w.geometry),(0,L.TC)(J,N);if($.mapImages)for(const w of $.mapImages)(0,A.Yg)(N,w.extent),(0,L.TC)(J,N)}return(0,L.fS)(J,L.Gv)?null:{xmin:J[0],ymin:J[1],zmin:J[2],xmax:J[3],ymax:J[4],zmax:J[5],spatialReference:M.Z.WGS84}}},61068:(q,V,a)=>{a.d(V,{OE:()=>x,Gc:()=>l,Qg:()=>T,Rq:()=>M,gX:()=>m,z2:()=>L,ET:()=>A,Vx:()=>P}),a(29132);var S=a(62208),D=a(28594),K=a(49672);const E=new Map,R=new class v{constructor(_=15e3,y=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=_,this._interval=Math.min(_,y)}decreaseRefCount(_,y){const j=_+"/"+y,F=this._cachedBlocks;if(F.has(j)){const B=F.get(j);return B.refCount--,B.refCount<=0&&(F.delete(j),B.controller&&B.controller.abort()),B.refCount}return 0}getBlock(_,y){const j=_+"/"+y,F=this._cachedBlocks;if(F.has(j)){const B=F.get(j);return B.ts=Date.now(),B.refCount++,F.delete(j),F.set(j,B),B.block}return null}putBlock(_,y,j,F=null){const B=this._cachedBlocks,N=_+"/"+y;if(B.has(N)){const J=B.get(N);J.ts=Date.now(),J.refCount++}else B.set(N,{block:j,ts:Date.now(),refCount:1,controller:F});this._trim(),this._updateTimer()}deleteBlock(_,y){const j=this._cachedBlocks,F=_+"/"+y;j.has(F)&&j.delete(F)}updateMaxSize(_){this._size=_,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const _=this._cachedBlocks;this._timer=setInterval(()=>{const y=Array.from(_),j=Date.now();for(let F=0;F<y.length&&y[F][1].ts<=j-this._duration;F++)_.delete(y[F][0]);0===_.size&&this._clearTimer()},this._interval)}_trim(){const _=this._cachedBlocks;if(-1===this._size||this._size>=_.size)return;const y=Array.from(_);for(let j=0;j<y.length-this._size;j++)_.delete(y[j][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function M(g,_){return null==_?g:`${g}?sliceId=${_}`}function L(g,_){const y={extent:null,rasterInfo:_,cache:new Map};if(E.has(g)){const j=E.get(g);return j.push(y),j.length-1}return E.set(g,[y]),0}function A(g,_){if(E.has(g)){const y=E.get(g);y[_]=null,y.some(j=>null!=j)||E.delete(g)}}function x(g,_,y){if(!E.has(g))return null==_?R.decreaseRefCount(g,y):0;const j=E.get(g);if(null==j[_])return R.decreaseRefCount(g,y);const F=j[_].cache;if(F.has(y)){const B=F.get(y);if(B.refCount--,0===B.refCount){F.delete(y);for(let N=0;N<j.length;N++)j[N]&&j[N].cache.has(y)&&j[N].cache.delete(y);B.controller&&B.controller.abort()}return B.refCount}return 0}function T(g,_,y){if(!E.has(g))return null==_?R.getBlock(g,y):null;const j=E.get(g);if(null==j[_]){for(let B=0;B<j.length;B++)if(j[B]&&j[B].cache.has(y)){const N=j[B].cache.get(y);return N.refCount++,N.block}return R.getBlock(g,y)}const F=j[_].cache;if(F.has(y)){const B=F.get(y);return B.refCount++,B.block}for(let B=0;B<j.length;B++)if(B!==_&&j[B]&&j[B]&&j[B].cache.has(y)){const N=j[B].cache.get(y);return N.refCount++,F.set(y,N),N.block}return null}function m(g,_,y,j,F=null){if(!E.has(g))return void(null==_&&R.putBlock(g,y,j,F));const B=E.get(g);if(null==B[_])return void R.putBlock(g,y,j,F);const N={refCount:1,block:j,isResolved:!1,isRejected:!1,controller:F};j.then(()=>N.isResolved=!0).catch(()=>N.isRejected=!0),B[_].cache.set(y,N)}function l(g,_,y){if(!E.has(g))return void(null==_&&R.deleteBlock(g,y));const j=E.get(g);null!=j[_]?j[_].cache.delete(y):R.deleteBlock(g,y)}function P(g,_,y,j,F,B,N=null){const J=function h(g,_){if(!E.has(g))return null;const y=E.get(g);return null==y[_]?null:y[_]}(g,_),$=J.extent,{cache:w,rasterInfo:C}=J;if($&&$.xmin===y.xmin&&$.xmax===y.xmax&&$.ymin===y.ymin&&$.ymax===y.ymax)return;const I=y.clone().normalize(),{spatialReference:O,transform:U}=C,G=new Set;for(let z=0;z<I.length;z++){const Y=I[z];if(Y.xmax-Y.xmin<=j||Y.ymax-Y.ymin<=j)continue;let X=(0,D.tB)(Y,O,N);(0,S.pC)(U)&&(X=U.inverseTransform(X));const Q=new K.Z({x:j,y:j,spatialReference:Y.spatialReference});if(null==F&&!(F=(0,D.VO)(Q,O,Y,N)))return;const{pyramidLevel:re,pyramidResolution:se,excessiveReading:ae}=(0,D.kr)(F,C,B||"closest");if(ae)return;const{storageInfo:b}=C,{origin:W}=b,H={x:Math.max(0,Math.floor((X.xmin-W.x)/se.x)),y:Math.max(0,Math.floor((W.y-X.ymax)/se.y))},Z=Math.ceil((X.xmax-X.xmin)/se.x-.1),k=Math.ceil((X.ymax-X.ymin)/se.y-.1),ee=re>0?b.pyramidBlockWidth:b.blockWidth,te=re>0?b.pyramidBlockHeight:b.blockHeight,ne=1,ie=Math.max(0,Math.floor(H.x/ee)-ne),ce=Math.max(0,Math.floor(H.y/te)-ne),ue=Math.floor((H.x+Z-1)/ee)+ne,_e=Math.floor((H.y+k-1)/te)+ne;for(let pe=ce;pe<=_e;pe++)for(let de=ie;de<=ue;de++)G.add(`${re}/${pe}/${de}`)}w.forEach((z,Y)=>{if(!G.has(Y)){const X=w.get(Y);(null==X||X.isResolved||X.isRejected)&&w.delete(Y)}}),J.extent={xmin:y.xmin,ymin:y.ymin,xmax:y.xmax,ymax:y.ymax}}},96504:(q,V,a)=>{a.d(V,{Z:()=>L});var d=a(17626),S=a(86810),v=a(77712),R=(a(85931),a(8314),a(90912),a(76898));let M=class extends S.wq{get affectsPixelSize(){return!1}forwardTransform(A){return A}inverseTransform(A){return A}};(0,d._)([(0,v.Cb)()],M.prototype,"affectsPixelSize",null),(0,d._)([(0,v.Cb)({json:{write:!0}})],M.prototype,"spatialReference",void 0),M=(0,d._)([(0,R.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],M);const L=M},76671:(q,V,a)=>{a.d(V,{Z:()=>A});var d=a(17626),S=a(77712),E=(a(85931),a(8314),a(90912),a(55342)),R=a(76898),M=a(96504);let L=class extends M.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(p){return"point"===(p=p.clone()).type?(p.x>180+this.tolerance&&(p.x-=360),p):(p.xmin>=180-this.tolerance?(p.xmax-=360,p.xmin-=360):p.xmax>180+this.tolerance&&(p.xmin=-180,p.xmax=180),p)}inverseTransform(p){return"point"===(p=p.clone()).type?(p.x<-this.tolerance&&(p.x+=360),p):(p.xmin<-this.tolerance&&(p.xmin+=360,p.xmax+=360),p)}};(0,d._)([(0,E.J)({GCSShiftXform:"gcs-shift"})],L.prototype,"type",void 0),(0,d._)([(0,S.Cb)()],L.prototype,"tolerance",void 0),L=(0,d._)([(0,R.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],L);const A=L},85374:(q,V,a)=>{a.d(V,{Z:()=>g});var d=a(17626),v=(a(29132),a(77712)),R=(a(85931),a(8314),a(90912),a(55342)),M=a(68653),L=a(76898),A=a(99433),p=a(96504),x=a(49672),T=a(2004);function m(_,y,j){const{x:F,y:B}=y;if(j<2)return{x:_[0]+F*_[2]+B*_[4],y:_[1]+F*_[3]+B*_[5]};if(2===j){const U=F*F,G=B*B,z=F*B;return{x:_[0]+F*_[2]+B*_[4]+U*_[6]+z*_[8]+G*_[10],y:_[1]+F*_[3]+B*_[5]+U*_[7]+z*_[9]+G*_[11]}}const N=F*F,J=B*B,$=F*B,w=N*F,C=N*B,I=F*J,O=B*J;return{x:_[0]+F*_[2]+B*_[4]+N*_[6]+$*_[8]+J*_[10]+w*_[12]+C*_[14]+I*_[16]+O*_[18],y:_[1]+F*_[3]+B*_[5]+N*_[7]+$*_[9]+J*_[11]+w*_[13]+C*_[15]+I*_[17]+O*_[19]}}function l(_,y,j){const{xmin:F,ymin:B,xmax:N,ymax:J,spatialReference:$}=y;let w=[];if(j<2)w.push({x:F,y:J}),w.push({x:N,y:J}),w.push({x:F,y:B}),w.push({x:N,y:B});else{let O=10;for(let U=0;U<O;U++)w.push({x:F,y:B+(J-B)*U/(O-1)}),w.push({x:N,y:B+(J-B)*U/(O-1)});O=8;for(let U=1;U<=O;U++)w.push({x:F+(N-F)*U/O,y:B}),w.push({x:F+(N-F)*U/O,y:J})}w=w.map(O=>m(_,O,j));const C=w.map(O=>O.x),I=w.map(O=>O.y);return new T.Z({xmin:Math.min.apply(null,C),xmax:Math.max.apply(null,C),ymin:Math.min.apply(null,I),ymax:Math.max.apply(null,I),spatialReference:$})}let P=class extends p.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(_,y){const{coeffX:j,coeffY:F}=y;if(!(null==j?void 0:j.length)||!(null==F?void 0:F.length)||j.length!==F.length)return null;const B=[];for(let N=0;N<j.length;N++)B.push(j[N]),B.push(F[N]);return B}writeForwardCoefficients(_,y,j){const F=[],B=[];for(let N=0;N<(null==_?void 0:_.length);N++)N%2==0?F.push(_[N]):B.push(_[N]);y.coeffX=F,y.coeffY=B}get inverseCoefficients(){let _=this._get("inverseCoefficients");const y=this._get("forwardCoefficients");return!_&&y&&this.polynomialOrder<2&&(_=function h(_){const[y,j,F,B,N,J]=_,$=F*J-N*B,w=N*B-F*J;return[(N*j-y*J)/$,(F*j-y*B)/w,J/$,B/w,-N/$,-F/w]}(y)),_}set inverseCoefficients(_){this._set("inverseCoefficients",_)}readInverseCoefficients(_,y){const{inverseCoeffX:j,inverseCoeffY:F}=y;if(!(null==j?void 0:j.length)||!(null==F?void 0:F.length)||j.length!==F.length)return null;const B=[];for(let N=0;N<j.length;N++)B.push(j[N]),B.push(F[N]);return B}writeInverseCoefficients(_,y,j){const F=[],B=[];for(let N=0;N<(null==_?void 0:_.length);N++)N%2==0?F.push(_[N]):B.push(_[N]);y.inverseCoeffX=F,y.inverseCoeffY=B}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(_){if("point"===_.type){const y=m(this.forwardCoefficients,_,this.polynomialOrder);return new x.Z({x:y.x,y:y.y,spatialReference:_.spatialReference})}return l(this.forwardCoefficients,_,this.polynomialOrder)}inverseTransform(_){if("point"===_.type){const y=m(this.inverseCoefficients,_,this.polynomialOrder);return new x.Z({x:y.x,y:y.y,spatialReference:_.spatialReference})}return l(this.inverseCoefficients,_,this.polynomialOrder)}};(0,d._)([(0,v.Cb)({json:{write:!0}})],P.prototype,"polynomialOrder",void 0),(0,d._)([(0,v.Cb)()],P.prototype,"forwardCoefficients",void 0),(0,d._)([(0,M.r)("forwardCoefficients",["coeffX","coeffY"])],P.prototype,"readForwardCoefficients",null),(0,d._)([(0,A.c)("forwardCoefficients")],P.prototype,"writeForwardCoefficients",null),(0,d._)([(0,v.Cb)({json:{write:!0}})],P.prototype,"inverseCoefficients",null),(0,d._)([(0,M.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],P.prototype,"readInverseCoefficients",null),(0,d._)([(0,A.c)("inverseCoefficients")],P.prototype,"writeInverseCoefficients",null),(0,d._)([(0,v.Cb)()],P.prototype,"affectsPixelSize",null),(0,d._)([(0,R.J)({PolynomialXform:"polynomial"})],P.prototype,"type",void 0),P=(0,d._)([(0,L.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],P);const g=P},46572:(q,V,a)=>{a.d(V,{j:()=>h,c:()=>P});var d=a(76671),S=a(17626),M=(a(63290),a(90912),a(85931),a(8314),a(82255),a(55342)),L=a(76898),A=a(96504);let p=class extends A.Z{constructor(){super(...arguments),this.type="identity"}};(0,S._)([(0,M.J)({IdentityXform:"identity"})],p.prototype,"type",void 0),p=(0,S._)([(0,L.j)("esri.layers.support.rasterTransforms.IdentityTransform")],p);const x=p;var T=a(85374);const m={GCSShiftXform:d.Z,IdentityXform:x,PolynomialXform:T.Z},l=Object.keys(m);function h(g){return!g||l.includes(null==g?void 0:g.type)}function P(g){if(!(null==g?void 0:g.type))return null;const y=m[null==g?void 0:g.type];if(y){const j=new y;return j.read(g),j}return null}},51026:(q,V,a)=>{a.d(V,{d:()=>v,h:()=>S});var d=a(2584);const S={type:d.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:v}}}}};function v(D,K,E,R){if(!D)return null;const{minScale:M,maxScale:L,minLOD:A,maxLOD:p}=K;if(null!=A&&null!=p)return d.Z.fromJSON(R&&R.ignoreMinMaxLOD?D:le(oe({},D),{lods:D.lods.filter(({level:x})=>null!=x&&x>=A&&x<=p)}));if(0!==M&&0!==L){const x=l=>Math.round(1e4*l)/1e4,T=M?x(M):1/0,m=L?x(L):-1/0;return d.Z.fromJSON(le(oe({},D),{lods:D.lods.filter(l=>{const h=x(l.scale);return h<=T&&h>=m})}))}return d.Z.fromJSON(D)}},53776:(q,V,a)=>{a.d(V,{Z:()=>h});var p,d=a(17626),S=a(58817),v=a(77712),D=a(90912),K=a(55342),E=a(76898),R=a(80573),M=a(10914),L=a(91558),A=a(86810);let x=p=class extends A.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new p({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,S.d9)(this.color)})}};(0,d._)([(0,v.Cb)({type:String,json:{write:!0}})],x.prototype,"description",void 0),(0,d._)([(0,v.Cb)({type:String,json:{write:!0}})],x.prototype,"label",void 0),(0,d._)([(0,v.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],x.prototype,"minValue",void 0),(0,d._)([(0,v.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],x.prototype,"maxValue",void 0),(0,d._)([(0,v.Cb)({type:L.Z,json:{type:[D.z8],write:!0}})],x.prototype,"color",void 0),x=p=(0,d._)([(0,E.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],x);const T=x;var m;let l=m=class extends R.Z{constructor(P){super(P),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new m(le(oe({},this.cloneProperties()),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,S.d9)(this.colorClassBreakInfos),legendOptions:(0,S.d9)(this.legendOptions)}))}};(0,d._)([(0,K.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],l.prototype,"type",void 0),(0,d._)([(0,v.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,d._)([(0,v.Cb)({type:M.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),(0,d._)([(0,v.Cb)({type:R.Z.fieldTransformTypeKebabDict.apiValues,json:{type:R.Z.fieldTransformTypeKebabDict.jsonValues,read:R.Z.fieldTransformTypeKebabDict.read,write:R.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,d._)([(0,v.Cb)({type:[T],json:{write:!0}})],l.prototype,"colorClassBreakInfos",void 0),l=m=(0,d._)([(0,E.j)("esri.renderers.PointCloudClassBreaksRenderer")],l);const h=l},80573:(q,V,a)=>{a.d(V,{Z:()=>$});var A,d=a(17626),S=a(2076),v=a(86810),D=a(58817),K=a(77712),R=(a(90912),a(76898));a(85931),a(8314);let p=A=class extends v.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new A({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,d._)([(0,K.Cb)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,d._)([(0,K.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,"minValue",void 0),(0,d._)([(0,K.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,"maxValue",void 0),p=A=(0,d._)([(0,R.j)("esri.renderers.support.pointCloud.ColorModulation")],p);const x=p,T=new S.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let m=class extends v.wq{};(0,d._)([(0,K.Cb)({type:T.apiValues,readOnly:!0,nonNullable:!0,json:{type:T.jsonValues,read:!1,write:T.write}})],m.prototype,"type",void 0),m=(0,d._)([(0,R.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],m);const l=m;var P,h=a(55342);let g=P=class extends l{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new P({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,d._)([(0,h.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],g.prototype,"type",void 0),(0,d._)([(0,K.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"size",void 0),(0,d._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"useRealWorldSymbolSizes",void 0),g=P=(0,d._)([(0,R.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],g);const _=g;var y;let j=y=class extends l{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new y({scaleFactor:this.scaleFactor})}};(0,d._)([(0,h.J)({pointCloudSplatAlgorithm:"splat"})],j.prototype,"type",void 0),(0,d._)([(0,K.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],j.prototype,"scaleFactor",void 0),j=y=(0,d._)([(0,R.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],j);const B={key:"type",base:l,typeMap:{"fixed-size":_,splat:j}},N=(0,S.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let J=class extends v.wq{constructor(w){super(w),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,D.d9)(this.pointSizeAlgorithm),colorModulation:(0,D.d9)(this.colorModulation),pointsPerInch:(0,D.d9)(this.pointsPerInch)}}};(0,d._)([(0,K.Cb)({type:N.apiValues,readOnly:!0,nonNullable:!0,json:{type:N.jsonValues,read:!1,write:N.write}})],J.prototype,"type",void 0),(0,d._)([(0,K.Cb)({types:B,json:{write:!0}})],J.prototype,"pointSizeAlgorithm",void 0),(0,d._)([(0,K.Cb)({type:x,json:{write:!0}})],J.prototype,"colorModulation",void 0),(0,d._)([(0,K.Cb)({json:{write:!0},nonNullable:!0,type:Number})],J.prototype,"pointsPerInch",void 0),J=(0,d._)([(0,R.j)("esri.renderers.PointCloudRenderer")],J),(J||(J={})).fieldTransformTypeKebabDict=new S.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const $=J},23899:(q,V,a)=>{a.d(V,{Z:()=>x});var A,d=a(17626),S=a(58817),v=a(77712),K=(a(90912),a(55342)),E=a(76898),R=a(80573),M=a(10914),L=a(8029);let p=A=class extends R.Z{constructor(T){super(T),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new A(le(oe({},this.cloneProperties()),{field:(0,S.d9)(this.field),fieldTransformType:(0,S.d9)(this.fieldTransformType),stops:(0,S.d9)(this.stops),legendOptions:(0,S.d9)(this.legendOptions)}))}};(0,d._)([(0,K.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],p.prototype,"type",void 0),(0,d._)([(0,v.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,d._)([(0,v.Cb)({type:M.I,json:{write:!0}})],p.prototype,"legendOptions",void 0),(0,d._)([(0,v.Cb)({type:R.Z.fieldTransformTypeKebabDict.apiValues,json:{type:R.Z.fieldTransformTypeKebabDict.jsonValues,read:R.Z.fieldTransformTypeKebabDict.read,write:R.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,d._)([(0,v.Cb)({type:[L.Z],json:{write:!0}})],p.prototype,"stops",void 0),p=A=(0,d._)([(0,E.j)("esri.renderers.PointCloudStretchRenderer")],p);const x=p},98610:(q,V,a)=>{a.d(V,{Z:()=>h});var p,d=a(17626),S=a(58817),v=a(77712),D=a(90912),K=a(55342),E=a(76898),R=a(80573),M=a(10914),L=a(91558),A=a(86810);let x=p=class extends A.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new p({description:this.description,label:this.label,values:(0,S.d9)(this.values),color:(0,S.d9)(this.color)})}};(0,d._)([(0,v.Cb)({type:String,json:{write:!0}})],x.prototype,"description",void 0),(0,d._)([(0,v.Cb)({type:String,json:{write:!0}})],x.prototype,"label",void 0),(0,d._)([(0,v.Cb)({type:[String],json:{write:!0}})],x.prototype,"values",void 0),(0,d._)([(0,v.Cb)({type:L.Z,json:{type:[D.z8],write:!0}})],x.prototype,"color",void 0),x=p=(0,d._)([(0,E.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],x);const T=x;var m;let l=m=class extends R.Z{constructor(P){super(P),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new m(le(oe({},this.cloneProperties()),{field:(0,S.d9)(this.field),fieldTransformType:(0,S.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,S.d9)(this.colorUniqueValueInfos),legendOptions:(0,S.d9)(this.legendOptions)}))}};(0,d._)([(0,K.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],l.prototype,"type",void 0),(0,d._)([(0,v.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,d._)([(0,v.Cb)({type:R.Z.fieldTransformTypeKebabDict.apiValues,json:{type:R.Z.fieldTransformTypeKebabDict.jsonValues,read:R.Z.fieldTransformTypeKebabDict.read,write:R.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,d._)([(0,v.Cb)({type:[T],json:{write:!0}})],l.prototype,"colorUniqueValueInfos",void 0),(0,d._)([(0,v.Cb)({type:M.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),l=m=(0,d._)([(0,E.j)("esri.renderers.PointCloudUniqueValueRenderer")],l);const h=l},22264:(q,V,a)=>{function d(E,R){return R?"xoffset"in R&&R.xoffset?Math.max(E,Math.abs(R.xoffset)):"yoffset"in R&&R.yoffset?Math.max(E,Math.abs(R.yoffset||0)):E:E}function v(E,R){return"number"==typeof E?E:E&&E.stops&&E.stops.length?function S(E){let R=0,M=0;for(let L=0;L<E.length;L++){const A=E[L].size;"number"==typeof A&&(R+=A,M++)}return R/M}(E.stops):R}function K(E){const R=E&&E.renderer,M="touch"===(E&&E.event&&E.event.pointerType)?9:6;if(!R)return M;const L="visualVariables"in R?function D(E,R){if(!R)return E;const M=R.filter(x=>"size"===x.type).map(x=>{const{maxSize:T,minSize:m}=x;return(v(T,E)+v(m,E))/2});let L=0;const A=M.length;if(0===A)return E;for(let x=0;x<A;x++)L+=M[x];const p=Math.floor(L/A);return Math.max(p,E)}(M,R.visualVariables):M;if("simple"===R.type)return d(L,R.symbol);if("unique-value"===R.type){let A=L;return R.uniqueValueInfos.forEach(p=>{A=d(A,p.symbol)}),A}if("class-breaks"===R.type){let A=L;return R.classBreakInfos.forEach(p=>{A=d(A,p.symbol)}),A}return L}a.d(V,{k:()=>K})},70026:(q,V,a)=>{a.d(V,{t:()=>v});var d=a(15861),S=a(84792);function v(K,E){return D.apply(this,arguments)}function D(){return(D=(0,d.Z)(function*(K,E){const{data:R}=yield(0,S.default)(K,oe({responseType:"image"},E));return R})).apply(this,arguments)}},32837:(q,V,a)=>{a.d(V,{Z:()=>E});var d=a(35909),S=a(31375),v=a(47139),D=a(80991);class E{constructor(M){this._resourceManager=M}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(M,L,A){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===M.type||"esriSFS"===M.type){const[_,y,j]=d.fN.rasterizeSimpleFill(this._rasterizationCanvas,M.style,L);return{size:[y,j],image:new Uint32Array(_.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===M.type||"esriSLS"===M.type||"line"===M.type&&M.dashTemplate){let _,y;if("simple-line"===M.type||"esriSLS"===M.type)switch(_=(0,d.U1)(M.style,M.cap),M.cap){case"butt":y="Butt";break;case"square":y="Square";break;default:y="Round"}else _=M.dashTemplate,y=M.cim.capStyle;const[j,F,B]=d.fN.rasterizeSimpleLine(_,y);return{size:[F,B],image:new Uint32Array(j.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let p,x,T;if("simple-marker"===M.type||"esriSMS"===M.type||"line-marker"===M.type?(p=d.B$.fromSimpleMarker(M),T=(0,v.Fp)(p)):M.cim&&"CIMHatchFill"===M.cim.type?(p=d.B$.fromCIMHatchFill(M.cim),x=new S.Z(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):M.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===M.cim.markerPlacement.type?(p=d.B$.fromCIMInsidePolygon(M.cim),x=new S.Z(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):(p=M.cim,T=(0,v.Fp)(p)),T&&!A){const[_,y,j]=(0,v.RL)(T);return _?{size:[y,j],image:new Uint32Array(_.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[m,l,h,P,g]=d.B$.rasterize(this._rasterizationCanvas,p,x,this._resourceManager,!A);return m?{size:[l,h],image:new Uint32Array(m.buffer),sdf:!1,simplePattern:!1,anchorX:P,anchorY:g}:null}rasterizeImageResource(M,L,A,p){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=M,this._rasterizationCanvas.height=L;const x=this._rasterizationCanvas.getContext("2d");A instanceof ImageData?x.putImageData(A,0,0):(A.setAttribute("width",`${M}px`),A.setAttribute("height",`${L}px`),x.drawImage(A,0,0,M,L));const T=x.getImageData(0,0,M,L),m=new Uint8Array(T.data);if(p)for(const y of p)if(y&&y.oldColor&&4===y.oldColor.length&&y.newColor&&4===y.newColor.length){const[j,F,B,N]=y.oldColor,[J,$,w,C]=y.newColor;if(j===J&&F===$&&B===w&&N===C)continue;for(let I=0;I<m.length;I+=4)j===m[I]&&F===m[I+1]&&B===m[I+2]&&N===m[I+3]&&(m[I]=J,m[I+1]=$,m[I+2]=w,m[I+3]=C)}let l;for(let y=0;y<m.length;y+=4)l=m[y+3]/255,m[y]=m[y]*l,m[y+1]=m[y+1]*l,m[y+2]=m[y+2]*l;let h=m,P=M,g=L;const _=512;if(P>=_||g>=_){const y=P/g;y>1?(P=_,g=Math.round(_/y)):(g=_,P=Math.round(_*y)),h=new Uint8Array(4*P*g);const j=new Uint8ClampedArray(h.buffer);(0,D.TT)(m,M,L,j,P,g,!1)}return{size:[P,g],image:new Uint32Array(h.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},50998:(q,V,a)=>{a.r(V),a.d(V,{fetchSymbolFromStyle:()=>T,resolveWebStyleSymbol:()=>x});var d=a(65787),S=a(83100),v=a(26584),D=a(62208),K=a(21726),E=a(84687),R=a(29840),M=a(65270),L=a(77345),A=a(78241),p=a(96296);function x(l,h,P,g){return l.name?l.styleName&&"Esri2DPointSymbolsStyle"===l.styleName?function m(l,h,P){const g=A.wm.replace(/\{SymbolName\}/gi,l.name),_=(0,D.pC)(h.portal)?h.portal:E.Z.getDefault();return(0,A.EJ)(g,P).then(y=>{const j=(0,A.KV)(y.data);return(0,M.im)(j,{portal:_,url:(0,K.mN)((0,K.Yd)(g)),origin:"portal-item"})})}(l,h,g):(0,A.n2)(l,h,g).then(_=>T(_,l.name,h,P,g)):Promise.reject(new v.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function T(l,h,P,g,_){const y=l.data,j=P&&(0,D.pC)(P.portal)?P.portal:E.Z.getDefault(),F={portal:j,url:(0,K.mN)(l.baseUrl),origin:"portal-item"},B=y.items.find(C=>C.name===h);if(!B)return Promise.reject(new v.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${h}' could not be found`,{symbolName:h}));let N=(0,R.f)((0,A.v9)(B,g),F),J=B.thumbnail&&B.thumbnail.href;const $=B.thumbnail&&B.thumbnail.imageData;(0,S.XO)()&&(N=(0,S.pJ)(N),J=(0,S.pJ)(J));const w={portal:j,url:(0,K.mN)((0,K.Yd)(N)),origin:"portal-item"};return(0,A.EJ)(N,_).then(C=>{const I="cimRef"===g?(0,A.KV)(C.data):C.data,O=(0,M.im)(I,w);if(O&&(0,d.dU)(O)){if(J){const U=(0,R.f)(J,F);O.thumbnail=new p.p({url:U})}else $&&(O.thumbnail=new p.p({url:`data:image/png;base64,${$}`}));l.styleUrl?O.styleOrigin=new L.Z({portal:P.portal,styleUrl:l.styleUrl,name:h}):l.styleName&&(O.styleOrigin=new L.Z({portal:P.portal,styleName:l.styleName,name:h}))}return O})}},55746:(q,V,a)=>{a.d(V,{k:()=>x,p:()=>T});var d=a(65389),S=a(61885),D=(a(8314),a(62208)),K=a(76279),E=a(5548),R=a(16669),M=a(52397);function L(m,l){return m<<16|l}function A(m){return(4294901760&m)>>>16}function p(m){return 65535&m}const x={getObjectId:m=>m.getObjectId(),getAttributes:m=>m.readAttributes(),getAttribute:(m,l)=>m.readAttribute(l),cloneWithGeometry:(m,l)=>m,getGeometry:m=>m.readHydratedGeometry(),getCentroid:(m,l)=>m.readCentroid()};class T extends R.J{constructor(l,h,P){super(l,h),this.featureAdapter=x,this.events=new S.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new d.Z(50),this._index=(0,K.r)(9,g=>({minX:this._storage.getXMin(g),minY:this._storage.getYMin(g),maxX:this._storage.getXMax(g),maxY:this._storage.getYMax(g)})),this.mode=P}get storeStatistics(){let l=0,h=0,P=0;return this.forEach(g=>{const _=g.readGeometry();_&&(h+=_.isPoint?1:_.lengths.reduce((y,j)=>y+j,0),P+=_.isPoint?1:_.lengths.length,l+=1)}),{featureCount:l,vertexCount:h,ringCount:P}}hasInstance(l){return this._featureSetsByInstance.has(l)}onTileData(l,h){if((0,D.Wi)(h.addOrUpdate))return h;if(h.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const g=h.addOrUpdate.getCursor();for(;g.next();){const _=g.getDisplayId();this.setComputedAttributes(this._storage,g,_,l.scale)}return h}this._featureSetsByInstance.set(h.addOrUpdate.instance,h.addOrUpdate);const P=h.addOrUpdate.getCursor();for(;P.next();)this._insertFeature(P,l.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),h}search(l){this._rebuildIndex();const h=l.id,P=this._indexSearchCache.find(j=>j.tileId===h);if((0,D.pC)(P))return P.readers;const g=new Map,_=this._searchIndex(l.bounds),y=[];for(const j of _){const F=this._storage.getInstanceId(j),B=A(F),N=p(F);g.has(B)||g.set(B,[]),g.get(B).push(N)}return g.forEach((j,F)=>{const B=this._featureSetsByInstance.get(F);y.push(M.t.from(B,j))}),this._indexSearchCache.enqueue({tileId:h,readers:y}),y}insert(l){var g;const h=l.getCursor(),P=this._storage;for(;h.next();){const _=L(h.instance,h.getIndex()),y=h.getObjectId(),j=null!=(g=this._objectIdToDisplayId.get(y))?g:this._storage.createDisplayId();h.setDisplayId(j),P.setInstanceId(j,_),this._objectIdToDisplayId.set(y,j)}this._featureSetsByInstance.set(l.instance,l),this._spatialIndexInvalid=!0}remove(l){const h=this._objectIdToDisplayId.get(l);if(!h)return;const P=this._storage.getInstanceId(h),g=p(P),_=A(P),y=this._featureSetsByInstance.get(_);this._objectIdToDisplayId.delete(l),this._storage.releaseDisplayId(h),y.removeAtIndex(g),y.isEmpty&&this._featureSetsByInstance.delete(_),this._spatialIndexInvalid=!0}toArray(){const l=new Array;return this.forEach(h=>l.push(h)),l}forEach(l){this._objectIdToDisplayId.forEach(h=>{const P=this._storage.getInstanceId(h),g=this._lookupFeature(P);l(g)})}forEachUnsafe(l){this._objectIdToDisplayId.forEach(h=>{const P=this._storage.getInstanceId(h),g=A(P),_=p(P),y=this._getFeatureSet(g);y.setIndex(_),l(y)})}forEachInBounds(l,h){const P=this._searchIndex(l);for(const g of P){const _=this.lookupFeatureByDisplayId(g,this._storage);h((0,D.Wg)(_))}}forEachBounds(l,h,P){this._rebuildIndex();const g=[0,0,0,0];for(const _ of l){if(!_.readGeometry())continue;const y=_.getDisplayId();g[0]=this._storage.getXMin(y),g[1]=this._storage.getYMin(y),g[2]=this._storage.getXMax(y),g[3]=this._storage.getYMax(y),h((0,E.JR)(P,g))}}sweepFeatures(l,h,P){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((g,_)=>{l.has(g)||(h.releaseDisplayId(g),P&&P.unsetAttributeData(g),this._objectIdToDisplayId.delete(_))}),this.events.emit("changed")}sweepFeatureSets(l){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((h,P)=>{l.has(P)||this._featureSetsByInstance.delete(P)})}lookupObjectId(l,h){const P=this.lookupFeatureByDisplayId(l,h);return(0,D.Wi)(P)?null:P.getObjectId()}lookupDisplayId(l){return this._objectIdToDisplayId.get(l)}lookupFeatureByDisplayId(l,h){const P=h.getInstanceId(l);return this._lookupFeature(P)}lookupByDisplayIdUnsafe(l){const h=this._storage.getInstanceId(l),P=A(h),g=p(h),_=this._getFeatureSet(P);return _?(_.setIndex(g),_):null}_insertFeature(l,h){const P=this._storage,g=l.getObjectId(),_=L(l.instance,l.getIndex());P.getInstanceId(l.getDisplayId());let y=this._objectIdToDisplayId.get(g);y||(y=P.createDisplayId(),this._objectIdToDisplayId.set(g,y),this._spatialIndexInvalid=!0),l.setDisplayId(y),P.setInstanceId(y,_),this.setComputedAttributes(P,l,y,h)}_searchIndex(l){return this._rebuildIndex(),this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const l=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(h=>{const P=h.getCursor();for(;P.next();){const g=P.getDisplayId();this._storage.setBounds(g,P)&&l.push(g)}}):this._objectIdToDisplayId.forEach(h=>{const P=this._storage.getInstanceId(h);this._storage.setBounds(h,this._lookupFeature(P))&&l.push(h)}),this._index.clear(),this._index.load(l),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(l){const h=A(l),P=this._getFeatureSet(h);if(!P)return null;const g=P.getCursor(),_=p(l);return g.setIndex(_),g}_getFeatureSet(l){return this._featureSetsByInstance.get(l)}}},16669:(q,V,a)=>{a.d(V,{J:()=>L});var d=a(15861),S=a(8314),v=a(62208),D=a(84682),K=a(46679),E=a(63290);const M=a.e(2445).then(a.bind(a,22445));class L{constructor(p,x){this._canCacheExpressionValue=!1,this._sourceInfo=p,this._storage=x,this._bitsets={computed:x.getBitset(x.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(p,x){var T=this;return(0,d.Z)(function*(){const m=(0,D.Hg)(T._schema,x);if(T._schema=x,!x||(0,v.Wi)(m)||!(0,D.uD)(m,"attributes"))return;(0,S.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",m),T._bitsets.computed.clear(),p.targets[x.name]=!0;const l=x.attributes,h=[],P=[];for(const g in l){const _=l[g];switch(_.type){case"field":break;case"expression":h.push(T._createArcadeComputedField(_));break;case"label-expression":h.push(T._createLabelArcadeComputedField(_));break;case"statistic":P.push(_)}}T._computedFields=yield Promise.all(h),T._canCacheExpressionValue=!T._computedFields.some(g=>"expression"===g.type&&g.expression.referencesScale()),T._statisticFields=P})()}setComputedAttributes(p,x,T,m){const l=this._bitsets.computed;if(!this._canCacheExpressionValue||!l.has(T)){l.set(T);for(const h of this._computedFields){const P=this._evaluateField(x,h,m);switch(h.resultType){case"numeric":p.setComputedNumericAtIndex(T,h.fieldIndex,P);break;case"string":p.setComputedStringAtIndex(T,h.fieldIndex,P)}}}}_createArcadeComputedField(p){var x=this;return(0,d.Z)(function*(){const T=x._sourceInfo.spatialReference,m=x._sourceInfo.fieldsIndex;return le(oe({},p),{expression:yield(0,K.Yi)(p.valueExpression,T,m)})})()}_createLabelArcadeComputedField(p){var x=this;return(0,d.Z)(function*(){const T=x._sourceInfo.spatialReference,m=x._sourceInfo.fieldsIndex,{createLabelFunction:l}=yield M,h=yield l(p.label,m,T);return le(oe({},p),{builder:h})})()}_evaluateField(p,x,T){switch(x.type){case"label-expression":{const m=p.readArcadeFeature();return x.builder.evaluate(m)||""}case"expression":{const{expression:m}=x;return function R(A,p,x){A.referencesGeometry();const T=p.readArcadeFeature();try{return A.evaluate(le(oe({},x),{$feature:T}))}catch(m){return E.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",m),null}}(m,p,{$view:{scale:T}})}}}}},13112:(q,V,a)=>{a.d(V,{Z:()=>L});var d=a(17626),S=a(80542),v=a(77712),R=(a(85931),a(8314),a(90912),a(76898));let M=class extends S.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const A=this.get("tileStore.tileScheme.spatialReference");return A&&A.toJSON()||null}};(0,d._)([(0,v.Cb)({readOnly:!0})],M.prototype,"supportsTileUpdates",null),(0,d._)([(0,v.Cb)({constructOnly:!0})],M.prototype,"remoteClient",void 0),(0,d._)([(0,v.Cb)({constructOnly:!0})],M.prototype,"service",void 0),(0,d._)([(0,v.Cb)()],M.prototype,"spatialReference",null),(0,d._)([(0,v.Cb)({constructOnly:!0})],M.prototype,"tileInfo",void 0),(0,d._)([(0,v.Cb)({constructOnly:!0})],M.prototype,"tileStore",void 0),M=(0,d._)([(0,R.j)("esri.views.2d.layers.features.processors.BaseProcessor")],M);const L=M},52397:(q,V,a)=>{a.d(V,{t:()=>S});var d=a(25208);class S extends d.s{constructor(D,K){super(d.s.createInstance(),D.fullSchema()),this._currentIndex=-1,this._reader=D,this._indices=K}static from(D,K){return new S(D.copy(),K)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const D=new S(this._reader.copy(),this._indices);return D._currentIndex=this._currentIndex,D}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(D){this._reader.setArcadeSpatialReference(D)}attachStorage(D){this._reader.attachStorage(D)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(D){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(D,K){return this._reader.setComputedNumericAtIndex(K,0)}getComputedString(D){return this._reader.getComputedStringAtIndex(0)}setComputedString(D,K){return this._reader.setComputedStringAtIndex(0,K)}getComputedNumericAtIndex(D){return this._reader.getComputedNumericAtIndex(D)}setComputedNumericAtIndex(D,K){this._reader.setComputedNumericAtIndex(D,K)}getComputedStringAtIndex(D){return this._reader.getComputedStringAtIndex(D)}setComputedStringAtIndex(D,K){return this._reader.setComputedStringAtIndex(D,K)}transform(D,K,E,R){const M=this.copy();return M._reader=this._reader.transform(D,K,E,R),M}readAttribute(D,K=!1){return this._reader.readAttribute(D,K)}readAttributes(){return this._reader.readAttributes()}joinAttributes(D){return this._reader.joinAttributes(D)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(D){return this.readAttribute(D,!0)}hasField(D){return this._reader.hasField(D)}setField(D,K){return this._reader.setField(D,K)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(D){return this._reader.setDisplayId(D)}getGroupId(){return this._reader.getGroupId()}setGroupId(D){return this._reader.setGroupId(D)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(D){return this._reader.setIndex(D)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(D,K){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(q,V,a)=>{a.d(V,{Z:()=>L});var d=a(17626),S=a(80542),v=a(77712),R=(a(85931),a(8314),a(90912),a(76898));let M=class extends S.r{constructor(A){super(A),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(A){const p=this.createTile(A);return p.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(A.id,p),p}forceAttributeTextureUpload(){}forEachTile(A){this.tiles.forEach(A)}releaseTile(A){this.tiles.delete(A.key.id),this.disposeTile(A)}isUpdating(){let A=!0;return this.tiles.forEach(p=>{A=A&&p.isReady}),!A}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,d._)([(0,v.Cb)()],M.prototype,"layer",void 0),(0,d._)([(0,v.Cb)()],M.prototype,"layerView",void 0),(0,d._)([(0,v.Cb)()],M.prototype,"tileInfoView",void 0),(0,d._)([(0,v.Cb)()],M.prototype,"updating",null),M=(0,d._)([(0,R.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],M);const L=M},36275:(q,V,a)=>{a.d(V,{Z:()=>v});var d=a(39406),S=a(55051);class v extends S.Z{renderChildren(K){this.attributeView.bindTextures(K.context,!1),this.children.some(E=>E.hasData)&&(super.renderChildren(K),K.drawPhase===d.jx.MAP&&this._renderChildren(K),this.hasHighlight()&&K.drawPhase===d.jx.HIGHLIGHT&&this._renderHighlight(K),this._boundsRenderer&&this._boundsRenderer.doRender(K))}_renderHighlight(K){const{painter:E}=K,R=E.effects.highlight;R.bind(K),this._renderChildren(K,R.defines),R.draw(K),R.unbind()}}},13305:(q,V,a)=>{a.d(V,{Z:()=>x});var d=a(17626),R=(a(63290),a(90912),a(85931),a(8314),a(82255),a(76898)),M=a(39406),L=a(55051),A=a(67969);let p=class extends L.Z{doRender(T){T.drawPhase===M.jx.HIGHLIGHT&&super.doRender(T)}renderChildren(T){if(this.attributeView.bindTextures(T.context),!this.children.some(h=>h.hasData))return;super.renderChildren(T);const{painter:m}=T,l=m.effects.highlight;l.bind(T),T.context.setColorMask(!0,!0,!0,!0),T.context.clear(A.lk.COLOR_BUFFER_BIT),this._renderChildren(T,l.defines.concat(["highlightAll"])),l.draw(T),l.unbind()}};p=(0,d._)([(0,R.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],p);const x=p},88569:(q,V,a)=>{a.d(V,{Bh:()=>x,IB:()=>E,j7:()=>R,je:()=>p,ve:()=>L,wu:()=>D});var d=a(42743),S=a(67969),v=a(2078);const D=(0,v.wK)(S.zi.SRC_ALPHA,S.zi.ONE,S.zi.ONE_MINUS_SRC_ALPHA,S.zi.ONE_MINUS_SRC_ALPHA),K=(0,v.if)(S.zi.ONE,S.zi.ONE),E=(0,v.if)(S.zi.ZERO,S.zi.ONE_MINUS_SRC_ALPHA);function R(T){return T===d.Am.FrontFace?null:T===d.Am.Alpha?E:K}const L=5e5,A={factor:-1,units:-2};function p(T){return T?A:null}function x(T,m=S.wb.LESS){return T===d.Am.NONE||T===d.Am.FrontFace?m:S.wb.LEQUAL}},42743:(q,V,a)=>{var d,S,v,D,K,E,R,M,L,A,p,x,T,m,l;a.d(V,{Am:()=>D,CE:()=>p,Gv:()=>S,JJ:()=>T,MX:()=>A,Rw:()=>E,Vr:()=>d,hU:()=>R}),(l=d||(d={}))[l.None=0]="None",l[l.Front=1]="Front",l[l.Back=2]="Back",l[l.COUNT=3]="COUNT",function(l){l[l.Less=0]="Less",l[l.Lequal=1]="Lequal",l[l.COUNT=2]="COUNT"}(S||(S={})),function(l){l[l.NONE=0]="NONE",l[l.SMAA=1]="SMAA"}(v||(v={})),function(l){l[l.Color=0]="Color",l[l.Alpha=1]="Alpha",l[l.FrontFace=2]="FrontFace",l[l.NONE=3]="NONE",l[l.COUNT=4]="COUNT"}(D||(D={})),function(l){l[l.BACKGROUND=0]="BACKGROUND",l[l.UPDATE=1]="UPDATE"}(K||(K={})),function(l){l[l.NOT_LOADED=0]="NOT_LOADED",l[l.LOADING=1]="LOADING",l[l.LOADED=2]="LOADED"}(E||(E={})),function(l){l[l.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",l[l.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(R||(R={})),function(l){l[l.ASYNC=0]="ASYNC",l[l.SYNC=1]="SYNC"}(M||(M={})),function(l){l[l.Highlight=0]="Highlight",l[l.MaskOccludee=1]="MaskOccludee",l[l.COUNT=2]="COUNT"}(L||(L={})),function(l){l[l.Triangle=0]="Triangle",l[l.Point=1]="Point",l[l.Line=2]="Line"}(A||(A={})),function(l){l[l.STRETCH=1]="STRETCH",l[l.PAD=2]="PAD"}(p||(p={})),function(l){l[l.CHANGED=0]="CHANGED",l[l.UNCHANGED=1]="UNCHANGED"}(x||(x={})),function(l){l[l.Blend=0]="Blend",l[l.Opaque=1]="Opaque",l[l.Mask=2]="Mask",l[l.MaskBlend=3]="MaskBlend",l[l.COUNT=4]="COUNT"}(T||(T={})),function(l){l[l.OFF=0]="OFF",l[l.ON=1]="ON"}(m||(m={}))},94672:(q,V,a)=>{a.d(V,{K:()=>K}),a(29132);var S=a(62208),v=a(16730),D=a(2004);function K(M,L,A,p=new D.Z){let x;if("2d"===A.type)x=L*A.resolution;else if("3d"===A.type){const g=A.overlayPixelSizeInMapUnits(M),_=A.basemapSpatialReference;x=(0,S.pC)(_)&&!_.equals(A.spatialReference)?(0,v.c9)(_)/(0,v.c9)(A.spatialReference):L*g}const T=M.x-x,m=M.y-x,l=M.x+x,h=M.y+x,{spatialReference:P}=A;return p.xmin=Math.min(T,l),p.ymin=Math.min(m,h),p.xmax=Math.max(T,l),p.ymax=Math.max(m,h),p.spatialReference=P,p}new D.Z},33e3:(q,V,a)=>{a.d(V,{G:()=>D});var d=a(62208);class S{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(E,R){var M;return null==(M=this._outer.get(E))?void 0:M.get(R)}set(E,R,M){const L=this._outer.get(E);L?L.set(R,M):this._outer.set(E,new Map([[R,M]]))}delete(E,R){const M=this._outer.get(E);M&&(M.delete(R),0===M.size&&this._outer.delete(E))}forEach(E){this._outer.forEach((R,M)=>E(R,M))}}var v=a(21285);class D{constructor(E){this._rctx=E,this._store=new S}dispose(){this._store.forEach(E=>E.forEach(R=>R.dispose())),this._store.clear()}acquire(E,R,M,L){const A=this._store.get(E,R);if((0,d.pC)(A))return A.ref(),A;const p=new v.$(this._rctx,E,R,M,L);return p.ref(),this._store.set(E,R,p),p}get test(){let E=0;return this._store.forEach(R=>R.forEach(M=>E+=M.hasGLName?2:1)),{cachedWebGLObjects:E}}}},2757:(q,V,a)=>{function d(E,R,M){for(let L=0;L<M;++L)R[2*L]=E[L],R[2*L+1]=E[L]-R[2*L]}function v(E,R){const M=E.length;for(let L=0;L<M;++L)K[0]=E[L],R[L]=K[0];return R}function D(E,R){const M=E.length;for(let L=0;L<M;++L)K[0]=E[L],K[1]=E[L]-K[0],R[L]=K[1];return R}a.d(V,{GB:()=>D,LF:()=>d,U8:()=>v});const K=new Float32Array(2)},80322:(q,V,a)=>{function d(v){const{options:D,value:K}=v;return"number"==typeof D[K]}function S(v){let D="";for(const K in v){const E=v[K];if("boolean"==typeof E)E&&(D+=`#define ${K}\n`);else if("number"==typeof E)D+=`#define ${K} ${E.toFixed()}\n`;else if("object"==typeof E)if(d(E)){const{value:R,options:M,namespace:L}=E,A=L?`${L}_`:"";for(const p in M)D+=`#define ${A}${p} ${M[p].toFixed()}\n`;D+=`#define ${K} ${A}${R}\n`}else{const R=E.options;let M=0;for(const L in R)D+=`#define ${R[L]} ${(M++).toFixed()}\n`;D+=`#define ${K} ${R[E.value]}\n`}}return D}a.d(V,{K:()=>S})},2078:(q,V,a)=>{a.d(V,{BK:()=>L,LZ:()=>M,if:()=>v,jp:()=>ae,sm:()=>g,wK:()=>D,zp:()=>R});var d=a(42743),S=a(67969);function v(b,W,H=S.db.ADD,Z=[0,0,0,0]){return{srcRgb:b,srcAlpha:b,dstRgb:W,dstAlpha:W,opRgb:H,opAlpha:H,color:{r:Z[0],g:Z[1],b:Z[2],a:Z[3]}}}function D(b,W,H,Z,k=S.db.ADD,ee=S.db.ADD,te=[0,0,0,0]){return{srcRgb:b,srcAlpha:W,dstRgb:H,dstAlpha:Z,opRgb:k,opAlpha:ee,color:{r:te[0],g:te[1],b:te[2],a:te[3]}}}const K={face:S.LR.BACK,mode:S.Wf.CCW},E={face:S.LR.FRONT,mode:S.Wf.CCW},R=b=>b===d.Vr.Back?K:b===d.Vr.Front?E:null,M={zNear:0,zFar:1},L={r:!0,g:!0,b:!0,a:!0};function A(b){return j.intern(b)}function p(b){return B.intern(b)}function x(b){return J.intern(b)}function T(b){return w.intern(b)}function m(b){return I.intern(b)}function l(b){return U.intern(b)}function h(b){return z.intern(b)}function P(b){return X.intern(b)}function g(b){return re.intern(b)}class _{constructor(W,H){this.makeKey=W,this.makeRef=H,this.interns=new Map}intern(W){if(!W)return null;const H=this.makeKey(W),Z=this.interns;return Z.has(H)||Z.set(H,this.makeRef(W)),Z.get(H)}}function y(b){return"["+b.join(",")+"]"}const j=new _(F,b=>oe({__tag:"Blending"},b));function F(b){return b?y([b.srcRgb,b.srcAlpha,b.dstRgb,b.dstAlpha,b.opRgb,b.opAlpha,b.color.r,b.color.g,b.color.b,b.color.a]):null}const B=new _(N,b=>oe({__tag:"Culling"},b));function N(b){return b?y([b.face,b.mode]):null}const J=new _($,b=>oe({__tag:"PolygonOffset"},b));function $(b){return b?y([b.factor,b.units]):null}const w=new _(C,b=>oe({__tag:"DepthTest"},b));function C(b){return b?y([b.func]):null}const I=new _(O,b=>oe({__tag:"StencilTest"},b));function O(b){return b?y([b.function.func,b.function.ref,b.function.mask,b.operation.fail,b.operation.zFail,b.operation.zPass]):null}const U=new _(G,b=>oe({__tag:"DepthWrite"},b));function G(b){return b?y([b.zNear,b.zFar]):null}const z=new _(Y,b=>oe({__tag:"ColorWrite"},b));function Y(b){return b?y([b.r,b.g,b.b,b.a]):null}const X=new _(Q,b=>oe({__tag:"StencilWrite"},b));function Q(b){return b?y([b.mask]):null}const re=new _(function se(b){return b?y([F(b.blending),N(b.culling),$(b.polygonOffset),C(b.depthTest),O(b.stencilTest),G(b.depthWrite),Y(b.colorWrite),Q(b.stencilWrite)]):null},b=>({blending:A(b.blending),culling:p(b.culling),polygonOffset:x(b.polygonOffset),depthTest:T(b.depthTest),stencilTest:m(b.stencilTest),depthWrite:l(b.depthWrite),colorWrite:h(b.colorWrite),stencilWrite:P(b.stencilWrite)}));class ae{constructor(W){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=W}setPipeline(W){(this._pipelineInvalid||W!==this._pipeline)&&(this._setBlending(W.blending),this._setCulling(W.culling),this._setPolygonOffset(W.polygonOffset),this._setDepthTest(W.depthTest),this._setStencilTest(W.stencilTest),this._setDepthWrite(W.depthWrite),this._setColorWrite(W.colorWrite),this._setStencilWrite(W.stencilWrite),this._pipeline=W),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(W){this._blending=this._setSubState(W,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(W){this._culling=this._setSubState(W,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(W){this._polygonOffset=this._setSubState(W,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(W){this._depthTest=this._setSubState(W,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(W){this._stencilTest=this._setSubState(W,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(W){this._depthWrite=this._setSubState(W,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(W){this._colorWrite=this._setSubState(W,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(W){this._stencilWrite=this._setSubState(W,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(W,H,Z,k){return(Z||W!==H)&&(k(W),this._pipelineInvalid=!0),W}}}}]);