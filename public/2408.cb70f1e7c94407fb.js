"use strict";var ot=Object.defineProperty,ut=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,je=(fe,ee,v)=>ee in fe?ot(fe,ee,{enumerable:!0,configurable:!0,writable:!0,value:v}):fe[ee]=v,ce=(fe,ee)=>{for(var v in ee||(ee={}))ft.call(ee,v)&&je(fe,v,ee[v]);if(Re)for(var v of Re(ee))mt.call(ee,v)&&je(fe,v,ee[v]);return fe},me=(fe,ee)=>ut(fe,ct(ee));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[2408,3100,3250],{50011:(fe,ee,v)=>{v.d(ee,{F:()=>Y,M:()=>L});const L={Base64:0,Hex:1,String:2,Raw:3};function Z(u,T){const i=(65535&u)+(65535&T);return(u>>16)+(T>>16)+(i>>16)<<16|65535&i}function G(u,T,i,o,p,g){return Z(function j(u,T){return u<<T|u>>>32-T}(Z(Z(T,u),Z(o,g)),p),i)}function M(u,T,i,o,p,g,E){return G(T&i|~T&o,u,T,p,g,E)}function F(u,T,i,o,p,g,E){return G(T&o|i&~o,u,T,p,g,E)}function w(u,T,i,o,p,g,E){return G(T^i^o,u,T,p,g,E)}function A(u,T,i,o,p,g,E){return G(i^(T|~o),u,T,p,g,E)}function Y(u,T=L.Hex){const i=T||L.Base64,o=function k(u,T){u[T>>5]|=128<<T%32,u[14+(T+64>>>9<<4)]=T;let i=1732584193,o=-271733879,p=-1732584194,g=271733878;for(let E=0;E<u.length;E+=16){const ae=i,ie=o,D=p,P=g;i=M(i,o,p,g,u[E+0],7,-680876936),g=M(g,i,o,p,u[E+1],12,-389564586),p=M(p,g,i,o,u[E+2],17,606105819),o=M(o,p,g,i,u[E+3],22,-1044525330),i=M(i,o,p,g,u[E+4],7,-176418897),g=M(g,i,o,p,u[E+5],12,1200080426),p=M(p,g,i,o,u[E+6],17,-1473231341),o=M(o,p,g,i,u[E+7],22,-45705983),i=M(i,o,p,g,u[E+8],7,1770035416),g=M(g,i,o,p,u[E+9],12,-1958414417),p=M(p,g,i,o,u[E+10],17,-42063),o=M(o,p,g,i,u[E+11],22,-1990404162),i=M(i,o,p,g,u[E+12],7,1804603682),g=M(g,i,o,p,u[E+13],12,-40341101),p=M(p,g,i,o,u[E+14],17,-1502002290),o=M(o,p,g,i,u[E+15],22,1236535329),i=F(i,o,p,g,u[E+1],5,-165796510),g=F(g,i,o,p,u[E+6],9,-1069501632),p=F(p,g,i,o,u[E+11],14,643717713),o=F(o,p,g,i,u[E+0],20,-373897302),i=F(i,o,p,g,u[E+5],5,-701558691),g=F(g,i,o,p,u[E+10],9,38016083),p=F(p,g,i,o,u[E+15],14,-660478335),o=F(o,p,g,i,u[E+4],20,-405537848),i=F(i,o,p,g,u[E+9],5,568446438),g=F(g,i,o,p,u[E+14],9,-1019803690),p=F(p,g,i,o,u[E+3],14,-187363961),o=F(o,p,g,i,u[E+8],20,1163531501),i=F(i,o,p,g,u[E+13],5,-1444681467),g=F(g,i,o,p,u[E+2],9,-51403784),p=F(p,g,i,o,u[E+7],14,1735328473),o=F(o,p,g,i,u[E+12],20,-1926607734),i=w(i,o,p,g,u[E+5],4,-378558),g=w(g,i,o,p,u[E+8],11,-2022574463),p=w(p,g,i,o,u[E+11],16,1839030562),o=w(o,p,g,i,u[E+14],23,-35309556),i=w(i,o,p,g,u[E+1],4,-1530992060),g=w(g,i,o,p,u[E+4],11,1272893353),p=w(p,g,i,o,u[E+7],16,-155497632),o=w(o,p,g,i,u[E+10],23,-1094730640),i=w(i,o,p,g,u[E+13],4,681279174),g=w(g,i,o,p,u[E+0],11,-358537222),p=w(p,g,i,o,u[E+3],16,-722521979),o=w(o,p,g,i,u[E+6],23,76029189),i=w(i,o,p,g,u[E+9],4,-640364487),g=w(g,i,o,p,u[E+12],11,-421815835),p=w(p,g,i,o,u[E+15],16,530742520),o=w(o,p,g,i,u[E+2],23,-995338651),i=A(i,o,p,g,u[E+0],6,-198630844),g=A(g,i,o,p,u[E+7],10,1126891415),p=A(p,g,i,o,u[E+14],15,-1416354905),o=A(o,p,g,i,u[E+5],21,-57434055),i=A(i,o,p,g,u[E+12],6,1700485571),g=A(g,i,o,p,u[E+3],10,-1894986606),p=A(p,g,i,o,u[E+10],15,-1051523),o=A(o,p,g,i,u[E+1],21,-2054922799),i=A(i,o,p,g,u[E+8],6,1873313359),g=A(g,i,o,p,u[E+15],10,-30611744),p=A(p,g,i,o,u[E+6],15,-1560198380),o=A(o,p,g,i,u[E+13],21,1309151649),i=A(i,o,p,g,u[E+4],6,-145523070),g=A(g,i,o,p,u[E+11],10,-1120210379),p=A(p,g,i,o,u[E+2],15,718787259),o=A(o,p,g,i,u[E+9],21,-343485551),i=Z(i,ae),o=Z(o,ie),p=Z(p,D),g=Z(g,P)}return[i,o,p,g]}(function R(u){const T=[];for(let i=0,o=8*u.length;i<o;i+=8)T[i>>5]|=(255&u.charCodeAt(i/8))<<i%32;return T}(u),8*u.length);switch(i){case L.Raw:return o;case L.Hex:return function U(u){const T="0123456789abcdef",i=[];for(let o=0,p=4*u.length;o<p;o++)i.push(T.charAt(u[o>>2]>>o%4*8+4&15)+T.charAt(u[o>>2]>>o%4*8&15));return i.join("")}(o);case L.String:return function te(u){const T=[];for(let i=0,o=32*u.length;i<o;i+=8)T.push(String.fromCharCode(u[i>>5]>>>i%32&255));return T.join("")}(o);case L.Base64:return function X(u){const o=[];for(let p=0,g=4*u.length;p<g;p+=3){const E=(u[p>>2]>>p%4*8&255)<<16|(u[p+1>>2]>>(p+1)%4*8&255)<<8|u[p+2>>2]>>(p+2)%4*8&255;for(let ae=0;ae<4;ae++)o.push(8*p+6*ae>32*u.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(E>>6*(3-ae)&63))}return o.join("")}(o)}}},83100:(fe,ee,v)=>{function L(j){return j=j||globalThis.location.hostname,X.some(G=>null!=(null==j?void 0:j.match(G)))}function J(j,G){return j&&(G=G||globalThis.location.hostname)?null!=G.match(Z)||null!=G.match(te)?j.replace("static.arcgis.com","staticdev.arcgis.com"):null!=G.match(R)||null!=G.match(U)?j.replace("static.arcgis.com","staticqa.arcgis.com"):j:j}v.d(ee,{XO:()=>L,pJ:()=>J});const Z=/^devext.arcgis.com$/,R=/^qaext.arcgis.com$/,te=/^[\w-]*\.mapsdevext.arcgis.com$/,U=/^[\w-]*\.mapsqa.arcgis.com$/,X=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,Z,R,/^jsapps.esri.com$/,te,U]},7848:(fe,ee,v)=>{v.d(ee,{G6:()=>be,Ie:()=>we,J9:()=>de,RF:()=>K,U1:()=>Me,vY:()=>U,ym:()=>re});var L=v(62208),J=v(91179);const Z=(d,y,b)=>[y,b],R=(d,y,b)=>[y,b,d[2]],te=(d,y,b)=>[y,b,d[2],d[3]];function U(d){return d?{originPosition:"upper-left"===d.originPosition?"upperLeft":"lower-left"===d.originPosition?"lowerLeft":d.originPosition,scale:d.tolerance?[d.tolerance,d.tolerance]:[1,1],translate:(0,L.pC)(d.extent)?[d.extent.xmin,d.extent.ymax]:[0,0]}:null}function j({scale:d,translate:y},b){return Math.round((b-y[0])/d[0])}function G({scale:d,translate:y},b){return Math.round((y[1]-b)/d[1])}function M(d,y,b){const V=[];let C,le,oe,se;for(let ye=0;ye<b.length;ye++){const pe=b[ye];ye>0?(oe=j(d,pe[0]),se=G(d,pe[1]),oe===C&&se===le||(V.push(y(pe,oe-C,se-le)),C=oe,le=se)):(C=j(d,pe[0]),le=G(d,pe[1]),V.push(y(pe,C,le)))}return V.length>0?V:null}function Y({scale:d,translate:y},b){return b*d[0]+y[0]}function u({scale:d,translate:y},b){return y[1]-b*d[1]}function T(d,y,b){const V=new Array(b.length);if(!b.length)return V;const[C,le]=d.scale;let oe=Y(d,b[0][0]),se=u(d,b[0][1]);V[0]=y(b[0],oe,se);for(let ye=1;ye<b.length;ye++){const pe=b[ye];oe+=pe[0]*C,se-=pe[1]*le,V[ye]=y(pe,oe,se)}return V}function i(d,y,b){const V=new Array(b.length);for(let C=0;C<b.length;C++)V[C]=T(d,y,b[C]);return V}function K(d,y,b,V,C){return y.x=j(d,b.x),y.y=G(d,b.y),y!==b&&(V&&(y.z=b.z),C&&(y.m=b.m)),y}function re(d,y){return d&&y?(0,J.wp)(y)?K(d,{},y,!1,!1):(0,J.l9)(y)?function H(d,y,b,V,C){const le=function k(d,y,b,V){const C=[],le=b?V?te:R:V?R:Z;for(let oe=0;oe<y.length;oe++){const se=M(d,le,y[oe]);se&&se.length>=2&&C.push(se)}return C.length?C:null}(d,b.paths,V,C);return le?(y.paths=le,y):null}(d,{},y,!1,!1):(0,J.oU)(y)?function _(d,y,b,V,C){const le=function A(d,y,b,V){const C=[],le=b?V?te:R:V?R:Z;for(let oe=0;oe<y.length;oe++){const se=M(d,le,y[oe]);se&&se.length>=3&&C.push(se)}return C.length?C:null}(d,b.rings,V,C);return le?(y.rings=le,y):null}(d,{},y,!1,!1):(0,J.aW)(y)?function B(d,y,b,V,C){return y.points=function w(d,y,b,V){return M(d,b?V?te:R:V?R:Z,y)}(d,b.points,V,C),y}(d,{},y,!1,!1):(0,J.YX)(y)?function I(d,y,b,V,C){return y.xmin=j(d,b.xmin),y.ymin=G(d,b.ymin),y.xmax=j(d,b.xmax),y.ymax=G(d,b.ymax),y!==b&&(V&&(y.zmin=b.zmin,y.zmax=b.zmax),C&&(y.mmin=b.mmin,y.mmax=b.mmax)),y}(d,{},y,!1,!1):null:null}function de(d,y,b,V,C){return(0,L.pC)(b)&&(y.points=function p(d,y,b,V){return T(d,b?V?te:R:V?R:Z,y)}(d,b.points,V,C)),y}function Me(d,y,b,V,C){return(0,L.Wi)(b)||(y.x=Y(d,b.x),y.y=u(d,b.y),y!==b&&(V&&(y.z=b.z),C&&(y.m=b.m))),y}function we(d,y,b,V,C){return(0,L.pC)(b)&&(y.rings=function E(d,y,b,V){return i(d,b?V?te:R:V?R:Z,y)}(d,b.rings,V,C)),y}function be(d,y,b,V,C){return(0,L.pC)(b)&&(y.paths=function g(d,y,b,V){return i(d,b?V?te:R:V?R:Z,y)}(d,b.paths,V,C)),y}},25310:(fe,ee,v)=>{v.d(ee,{a:()=>te});var L=v(26584),J=v(63290),q=v(39406),Z=v(64288);const R=J.Z.getLogger("esri.views.2d.engine.webgl");function te(U){return(0,Z.hj)(U.minDataValue)&&(0,Z.hj)(U.maxDataValue)&&null!=U.minSize&&null!=U.maxSize?q.X.SIZE_MINMAX_VALUE:(U.expression&&"view.scale"===U.expression||U.valueExpression&&"$view.scale"===U.valueExpression)&&Array.isArray(U.stops)?q.X.SIZE_SCALE_STOPS:(null!=U.field||U.expression&&"view.scale"!==U.expression||U.valueExpression&&"$view.scale"!==U.valueExpression)&&(Array.isArray(U.stops)||"levels"in U&&U.levels)?q.X.SIZE_FIELD_STOPS:(null!=U.field||U.expression&&"view.scale"!==U.expression||U.valueExpression&&"$view.scale"!==U.valueExpression)&&null!=U.valueUnit?q.X.SIZE_UNIT_VALUE:(R.error(new L.Z("mapview-bad-type","Found invalid size VisualVariable",U)),q.X.NONE)}},3250:(fe,ee,v)=>{v.r(ee),v.d(ee,{createSymbolSchema:()=>R});var L=v(39406),J=v(18716);function q(M){var F;return"line-marker"===M.type?{type:"line-marker",color:null==(F=M.color)?void 0:F.toJSON(),placement:M.placement,style:M.style}:M.constructor.fromJSON(M.toJSON()).toJSON()}function Z(M){return(0,J.hF)(M)}function R(M,F,w){if(!M)return null;switch(M.type){case"simple-fill":case"picture-fill":return function U(M,F,w){const A=(0,J.jj)(L.LW.FILL,F),k=w?Z(A):A,Y=M.clone(),u=Y.outline,T=(0,J.jy)(F.symbologyType);T||(Y.outline=null);const i=ce({materialKey:k,hash:Y.hash()},q(Y));if(T)return i;const o=[];if(o.push(i),u){const p=(0,J.jj)(L.LW.LINE,me(ce({},F),{isOutline:!0})),g=ce({materialKey:w?Z(p):p,hash:u.hash()},q(u));o.push(g)}return{type:"composite-symbol",layers:o,hash:o.reduce((p,g)=>g.hash+p,"")}}(M,F,w);case"simple-marker":case"picture-marker":return function j(M,F,w){const A=(0,J.jj)(L.LW.MARKER,F),k=w?Z(A):A,Y=q(M);return me(ce({materialKey:k,hash:M.hash()},Y),{angle:M.angle,maxVVSize:F.maxVVSize})}(M,F,w);case"simple-line":return function X(M,F,w){var o;const A=(0,J.jy)(F.symbologyType)?L.mD.DEFAULT:F.symbologyType,k=(0,J.jj)(L.LW.LINE,me(ce({},F),{symbologyType:A})),Y=w?Z(k):k,u=M.clone(),T=u.marker;u.marker=null;const i=[];if(i.push(ce({materialKey:Y,hash:u.hash()},q(u))),T){const p=(0,J.jj)(L.LW.MARKER,F),g=w?Z(p):p;T.color=null!=(o=T.color)?o:u.color,i.push(ce({materialKey:g,hash:T.hash(),lineWidth:u.width},q(T)))}return{type:"composite-symbol",layers:i,hash:i.reduce((p,g)=>g.hash+p,"")}}(M,F,w);case"text":return function G(M,F,w){const A=(0,J.jj)(L.LW.TEXT,F),k=w?Z(A):A,Y=q(M);return me(ce({materialKey:k,hash:M.hash()},Y),{angle:M.angle,maxVVSize:F.maxVVSize})}(M,F,w);case"label":return function te(M,F,w){const A=M.toJSON(),k=(0,J.jj)(L.LW.LABEL,me(ce({},F),{placement:A.labelPlacement}));return me(ce({materialKey:w?Z(k):k,hash:M.hash()},A),{labelPlacement:A.labelPlacement})}(M,F,w);case"cim":return{type:"cim",rendererKey:F.vvFlags,data:M.data,maxVVSize:F.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:F.vvFlags,data:M,maxVVSize:F.maxVVSize};case"web-style":return me(ce({},q(M)),{type:"web-style",hash:M.hash(),rendererKey:F.vvFlags,maxVVSize:F.maxVVSize});default:throw new Error(`symbol not supported ${M.type}`)}}},49391:(fe,ee,v)=>{v.d(ee,{MD:()=>Oe,Ew:()=>oe,q5:()=>V});var L=v(26584),J=v(8314),q=v(58817),Z=v(63290),R=v(62208),te=v(23841),U=v(95737),X=v(39406),j=v(64288),G=v(37409),M=v(25310),w=v(3250),k=(v(35909),v(31375));v(39351);function Q(r,h){return Math.max(r,h)}v(64596),v(11263),new k.Z(0,0,24,24);var de=v(22418),Me=v(62192),we=v(43930);const be=Z.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),d="ValidationError",y={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function V(r){let h=0,c=0,x=X.mD.DEFAULT;if((0,R.pC)(r)){if(c=function p(r){if(!("visualVariables"in r)||!r.hasVisualVariables("size"))return 0;const h=r.getVisualVariablesForType("size");if(!h[0])return 0;const c=h[0];if("outline"===c.target)return 0;if("stops"===c.transformationType)return c.stops.map(x=>x.size).reduce(Q,0);if("clamped-linear"===c.transformationType){let x=-1/0,z=-1/0;return x="number"==typeof c.maxSize?c.maxSize:c.maxSize.stops.map(O=>O.size).reduce(Q,0),z="number"==typeof c.minSize?c.minSize:c.minSize.stops.map(O=>O.size).reduce(Q,0),Math.max(x,z)}return"real-world-size"===c.transformationType?30:void 0}(r),"visualVariables"in r&&(h=function F(r){if(!r)return X.X.NONE;let h=0;for(const c of r)if("size"===c.type){const x=(0,M.a)(c);h|=x,"outline"===c.target&&(h|=x<<4)}else"color"===c.type?h|=X.X.COLOR:"opacity"===c.type?h|=X.X.OPACITY:"rotation"===c.type&&(h|=X.X.ROTATION);return h}(r.visualVariables||[]),"dot-density"===r.type&&(x=X.mD.DOT_DENSITY)),"heatmap"===r.type&&(x=X.mD.HEATMAP),"dictionary"===r.type)return{maxVVSize:c,vvFlags:h,symbologyType:X.mD.DEFAULT};if("pie-chart"===r.type)return{maxVVSize:c,vvFlags:h,symbologyType:X.mD.PIE_CHART};if(x!==X.mD.DOT_DENSITY&&x!==X.mD.HEATMAP){const z=r.getSymbols();"backgroundFillSymbol"in r&&r.backgroundFillSymbol&&z.push(r.backgroundFillSymbol);let O=!0,N=!0;for(const W of z)if("cim"===W.type&&(N=!1),"simple-fill"===W.type||"picture-fill"===W.type){const $=W.outline,ne=$&&"none"!==$.style&&"solid"!==$.style,ue="simple-fill"===W.type&&"none"!==W.style&&"solid"!==W.style;ne&&(O=!1),("picture-fill"===W.type||ue||ne)&&(N=!1)}O?x=N?X.mD.OUTLINE_FILL_SIMPLE:X.mD.OUTLINE_FILL:N&&(x=X.mD.SIMPLE)}}return{vvFlags:h,maxVVSize:c,symbologyType:x}}function le(r,h){const c=(0,q.d9)(r);return c.some(x=>function C(r,h){const c=r.labelPlacement,x=y[h];if(!r.symbol)return be.warn("No ILabelClass symbol specified."),!0;if(!x)return be.error(new L.Z("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${h} is not supported`)),!0;if(!x.includes(c)){const z=x[0];c&&be.warn(`Found invalid label placement type ${c} for ${h}. Defaulting to ${z}`),r.labelPlacement=z}return!1}(x,h))?[]:c}function oe(r){return(0,J.Z)("esri-2d-update-debug")&&console.debug("Created new schema",se(r,!0)),se(r)}function se(r,h=!1){var c,x;try{const z=function Ze(r,h=!1){const c=new Array;return c.push(function $e(r,h,c=!1){var Ue;const x={indexCount:0,fields:{}},z="featureReduction"in r&&r.featureReduction?"aggregate":"feature";if("sublayers"in r){const Ee={type:"subtype",subtypeField:r.subtypeField,renderers:{},symbologyType:X.mD.DEFAULT},Pe={type:"subtype",mapping:{},target:"feature"},_e={type:"subtype",classes:{}},rt={type:"symbol",target:"feature",aggregateFields:[],attributes:x,storage:Pe,mesh:{matcher:Ee,aggregateMatcher:null,labels:_e,sortKey:null}},Ne=new Set;let lt=0;for(const{renderer:Ie,subtypeCode:ze,labelingInfo:it,labelsVisible:st}of r.sublayers){const Ve=Oe(x,z,Ie,c),Fe=Ce(x,z,Ie),Ae=st&&it;if("visualVariables"in Ie&&Ie.visualVariables&&Ie.visualVariables.length)throw new L.Z(d,"Visual variables are currently not supported for subtype layers");if("dictionary"===Ve.type)throw new L.Z(d,"Dictionary renderer is not supported in subtype layers");if("subtype"===Ve.type)throw new L.Z(d,"Nested subtype renderers is not supported");if((0,R.pC)(Fe)&&"subtype"===Fe.type)throw new L.Z(d,"Nested subtype storage is not supported");if((0,R.pC)(Fe)&&(0,R.pC)(Fe.attributeMapping))throw new L.Z(d,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===Ve.type)throw new L.Z(d,"Heatmaps are not supported in subtype layers");if("pie-chart"===Ve.type)throw new L.Z(d,"Pie-charts are not supported in subtype layers");if(Ne.has(ze))throw new L.Z(d,"Subtype codes for sublayers must be unique");Ne.add(ze),Ee.renderers[ze]=Ve,Pe.mapping[ze]=Fe,Ae&&(_e.classes[ze]=Ae.map(at=>Le(Ie,x,at,"feature",lt++,c)))}return rt}if("heatmap"===r.renderer.type&&"raster"===(0,de.rk)()){const{radius:Ee,fieldOffset:Pe,field:_e}=r.renderer;return{type:"heatmap",aggregateFields:[],attributes:x,target:z,storage:null,mesh:{radius:Ee,fieldOffset:Pe,field:xe(x,{target:z,field:_e,resultType:"numeric"}).field}}}const O=function Ke(r,h,c){const x="featureReduction"in h&&h.featureReduction;if(!x)return{fields:[],labels:[],matcher:null,rendererOverride:null};const O=[];let N=null,W=(0,we.oq)(h.geometryType),$=[],ne=null;if(x)switch(x.type){case"selection":throw new L.Z(d,"Mapview does not support `selection` reduction type",x);case"cluster":case"binning":if("cluster"===x.type?W="esriGeometryPoint":"binning"===x.type&&(W="esriGeometryPolygon"),x.renderer){for(const ue of x.fields)(0,Me.OQ)(O,ue);ne=x.renderer,N=Oe(null,"aggregate",x.renderer,c),$=x&&x.labelsVisible&&x.labelingInfo||[]}else if("cluster"===x.type){if(ne=(0,Me.S1)(O,h.renderer,x,null),x.symbol){const ue=V(ne);N={type:"simple",symbol:(0,w.createSymbolSchema)(x.symbol,ue,c),symbologyType:ue.symbologyType}}$=x&&x.labelsVisible&&x.labelingInfo||[]}}return function Je(r,h){const c={mesh:!0,storage:!0};for(const x of h){const{name:z,outStatistic:O}=x,{statisticType:N,onStatisticField:W}=O;let $=null,ne=null,ue=null;const ge="numeric",he="feature";"onStatisticValueExpression"in O?ne=ve(r,{type:"expression",target:he,valueExpression:O.onStatisticValueExpression,resultType:ge}).fieldIndex:"onStatisticNormalizationField"in O?($=ve(r,{type:"field",target:he,field:W,resultType:ge}).field,ue=O.onStatisticNormalizationField):$=ve(r,{type:"field",target:he,field:W,resultType:ge}).field,ve(r,{type:"statistic",target:"aggregate",name:z,context:c,inField:$,inNormalizationField:ue,inFieldIndex:ne,statisticType:N})}}(r,O),{labels:le($,"binning"===x.type?"esriGeometryPolygon":W),matcher:N,fields:O,rendererOverride:ne}}(x,r,c),N=(0,we.oq)(r.geometryType),W=null!=(Ue=O.rendererOverride)?Ue:r.renderer,$=Oe(x,z,W,c),ne=Ce(x,z,W),ue=function He(r,h){if((0,R.Wi)(h)||!h.length)return null;h.length>1&&be.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${h.length}. All but the first will be discarded`);const c=h[0],x="ascending"===c.order?"asc":"desc";return c.field?{field:c.field,order:x}:c.valueExpression?{fieldIndex:ve(r,{type:"expression",target:"feature",valueExpression:c.valueExpression,resultType:"numeric"}).fieldIndex,order:x}:(be.error(new L.Z(d,"Expected to find a field or valueExpression for OrderByInfo",c)),null)}(x,r.orderBy),ge=le(r.labelsVisible&&r.labelingInfo||[],N);let he=0;const De=[...ge.map(Ee=>Le(W,x,Ee,"feature",he++,c)),...O.labels.map(Ee=>Le(W,x,Ee,"aggregate",he++,c))];return{type:"symbol",target:z,attributes:x,aggregateFields:O.fields,storage:ne,mesh:{matcher:$,labels:{type:"simple",classes:De},aggregateMatcher:O.matcher,sortKey:ue}}}(r)),c}(r,h),O=function Ge(r){var h;return"heatmap"===(null==(h=r.renderer)?void 0:h.type)&&"raster"===(0,de.rk)()?{type:"heatmap"}:{type:"symbol"}}(r),N={};z.map(ne=>function ye(r,h,c){switch(c.target){case"feature":return void Te(r,Se(h),c);case"aggregate":{if(!("featureReduction"in h))return;const x=h.featureReduction;switch(x.type){case"selection":throw new L.Z(d,"Mapview does not support `selection` reduction type",x);case"binning":return Te(r,Se(h),c),void function Be(r,h,c){r.aggregate||(r.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:h.fixedBinLevel},attributes:{}}),pe(r.aggregate,c.attributes.fields)}(r,x,c);case"cluster":return Te(r,Se(h),c),void function We(r,h,c){r.aggregate||(r.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,te.F2)(h.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,te.F2)(h.clusterMaxSize)/64),fields:c.aggregateFields}}),pe(r.aggregate,c.attributes.fields)}(r,x,c)}}}}(N,r,ne));const W=(0,R.pC)(r.subtypeCode)?`${r.subtypeField} = ${r.subtypeCode}`:null;return{source:{definitionExpression:(0,U._)(r.definitionExpression,W),fields:r.fields.map(ne=>ne.toJSON()),gdbVersion:r.gdbVersion,historicMoment:null==(c=r.historicMoment)?void 0:c.getTime(),outFields:r.availableFields,pixelBuffer:r.pixelBuffer,spatialReference:r.spatialReference.toJSON(),timeExtent:null==(x=r.timeExtent)?void 0:x.toJSON(),customParameters:r.customParameters},attributes:{fields:{},indexCount:0},processors:z,tileRenderer:O,targets:N}}catch(z){if(z.fieldName===d)return be.error(z),null;throw z}}function pe(r,h){for(const c in h){const x=h[c];if(x.target!==r.name)continue;const z=r.attributes[c];z?(z.context.mesh=z.context.mesh||x.context.mesh,z.context.storage=z.context.storage||x.context.storage):r.attributes[c]=x}return r}function Se(r){var h,c,x,z,O;return[null!=(c=null==(h=(0,R.Wg)(r.filter))?void 0:h.toJSON())?c:null,null!=(O=null==(z=(0,R.Wg)(null==(x=(0,R.Wg)(r.featureEffect))?void 0:x.filter))?void 0:z.toJSON())?O:null]}function Te(r,h,c){return r.feature||(r.feature={name:"feature",input:"source",filters:h,attributes:{}}),pe(r.feature,c.attributes.fields),r}function xe(r,h){return h.field?ve(r,me(ce({},h),{type:"field",field:h.field})):h.valueExpression?ve(r,me(ce({},h),{type:"expression",valueExpression:h.valueExpression})):{field:null,fieldIndex:null}}function ve(r,h){switch(h.type){case"expression":{const c=h.valueExpression;if(!r.fields[c]){const x=r.indexCount++;r.fields[c]=me(ce({},h),{name:c,fieldIndex:x})}return{fieldIndex:r.fields[c].fieldIndex}}case"label-expression":{const c=JSON.stringify(h.label);if(!r.fields[c]){const x=r.indexCount++;r.fields[c]=me(ce({},h),{name:c,fieldIndex:x})}return{fieldIndex:r.fields[c].fieldIndex}}case"field":{const c=h.field;return"aggregate"===h.target&&r.fields[c]||(r.fields[c]=me(ce({},h),{name:c})),{field:c}}case"statistic":return r.fields[h.name]=ce({},h),{field:h.name}}}function Le(r,h,c,x,z,O=!1){const N=ve(h,{type:"label-expression",target:x,context:{mesh:!0},resultType:"string",label:{labelExpression:c.labelExpression,labelExpressionInfo:c.labelExpressionInfo?{expression:c.labelExpressionInfo.expression}:null,symbol:!!c.symbol,where:c.where}}),{fieldIndex:W}=N,$=V(r);return me(ce({},(0,w.createSymbolSchema)(c,$,O)),{fieldIndex:W,target:x,index:z})}function Ce(r,h,c){let x;switch(c.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":x={visualVariables:!0,attributes:null};break;default:x=(0,G.EJ)(c).getStorageSpec(c)}return function Xe(r,h,c,x){if((0,R.Wi)(c))return null;const{visualVariables:z,attributes:O}=c;let N=null;z&&"visualVariables"in x&&(N=function Ye(r,h,c){if(!c||!c.length)return[];const x={storage:!0},z="numeric";return(0,de.tv)(c).map(O=>{var ne;const N=(0,j.nU)(O.type),{field:W,fieldIndex:$}=xe(r,{target:h,valueExpression:O.valueExpression,field:O.field,context:x,resultType:z});switch(O.type){case"size":return"$view.scale"===O.valueExpression?null:{type:"size",binding:N,field:W,fieldIndex:$,normalizationField:xe(r,{target:h,field:O.normalizationField,context:x,resultType:z}).field,valueRepresentation:null!=(ne=O.valueRepresentation)?ne:null};case"color":return{type:"color",binding:N,field:W,fieldIndex:$,normalizationField:xe(r,{target:h,field:O.normalizationField,context:x,resultType:z}).field};case"opacity":return{type:"opacity",binding:N,field:W,fieldIndex:$,normalizationField:xe(r,{target:h,field:O.normalizationField,context:x,resultType:z}).field};case"rotation":return{type:"rotation",binding:N,field:W,fieldIndex:$}}}).filter(O=>O)}(r,h,x.visualVariables));const W=(0,R.pC)(N)?4:0;let $=null;return(0,R.pC)(O)&&($=O.map((ne,ue)=>{const{field:ge,fieldIndex:he}=xe(r,{valueExpression:ne.valueExpression,field:ne.field,resultType:"numeric",target:h});return{binding:ue+W,field:ge,fieldIndex:he}})),{type:"simple",target:h,attributeMapping:$,vvMapping:N}}(r,h,x,c)}function Oe(r,h,c,x=!1){const z=(0,R.Pt)(r,{indexCount:0,fields:{}});switch(c.type){case"simple":case"dot-density":return function Qe(r,h,c=!1){const x=h.getSymbols(),z=x.length?x[0]:null,O=V(h);return{type:"simple",symbol:(0,w.createSymbolSchema)(z,O,c),symbologyType:O.symbologyType}}(0,c,x);case"class-breaks":return function qe(r,h,c,x=!1){const O=c.backgroundFillSymbol,{field:N,fieldIndex:W}=xe(r,{target:h,field:c.field,valueExpression:c.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}}),$=c.normalizationType,ne="log"===$?"esriNormalizeByLog":"percent-of-total"===$?"esriNormalizeByPercentOfTotal":"field"===$?"esriNormalizeByField":null,ue=V(c),ge=c.classBreakInfos.map(he=>({symbol:(0,w.createSymbolSchema)(he.symbol,ue,x),min:he.minValue,max:he.maxValue})).sort((he,De)=>he.min-De.min);return{type:"interval",attributes:r.fields,field:N,fieldIndex:W,backgroundFillSymbol:(0,w.createSymbolSchema)(O,ue,x),defaultSymbol:(0,w.createSymbolSchema)(c.defaultSymbol,ue,x),intervals:ge,normalizationField:c.normalizationField,normalizationTotal:c.normalizationTotal,normalizationType:ne,isMaxInclusive:c.isMaxInclusive,symbologyType:ue.symbologyType}}(z,h,c,x);case"unique-value":return function et(r,h,c,x=!1){const z=[],O=c.backgroundFillSymbol,N={target:h,context:{mesh:!0},resultType:"string"};if(c.field&&"string"!=typeof c.field)throw new L.Z(d,"Expected renderer.field to be a string",c);const{field:W,fieldIndex:$}=xe(r,me(ce({},N),{field:c.field,valueExpression:c.valueExpression})),ne=V(c);for(const ue of c.uniqueValueInfos)z.push({value:""+ue.value,symbol:(0,w.createSymbolSchema)(ue.symbol,ne,x)});return{type:"map",attributes:r.fields,field:W,fieldIndex:$,field2:xe(r,me(ce({},N),{field:c.field2})).field,field3:xe(r,me(ce({},N),{field:c.field3})).field,fieldDelimiter:c.fieldDelimiter,backgroundFillSymbol:(0,w.createSymbolSchema)(O,ne),defaultSymbol:(0,w.createSymbolSchema)(c.defaultSymbol,ne),map:z,symbologyType:ne.symbologyType}}(z,h,c,x);case"dictionary":return function tt(r,h,c=!1){const x=V(h);return{type:"dictionary",config:h.config,fieldMap:h.fieldMap,scaleExpression:h.scaleExpression,url:h.url,symbolOptions:x,symbologyType:x.symbologyType}}(0,c,x);case"heatmap":return function nt(r,h,c=!1){const x=h.getSymbols(),z=x.length?x[0]:null,O=V(h);return{type:"heatmap",symbol:(0,w.createSymbolSchema)(z,O,c),symbologyType:O.symbologyType}}(0,c,x);case"pie-chart":return function ke(r,h,c=!1){const x=h.getSymbols(),z=x[0],O=x.length>1?x[1]:null,N=V(h);return{type:"pie-chart",markerSymbol:(0,w.createSymbolSchema)(z,N,c),fillSymbol:(0,w.createSymbolSchema)(O,N,c),symbologyType:N.symbologyType}}(0,c,x)}}},22418:(fe,ee,v)=>{v.d(ee,{TT:()=>T,aR:()=>j,rk:()=>u,tv:()=>G});var L=v(26584),J=v(8314),q=v(63290),Z=v(23841),R=v(31637);const X=q.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils"),j=i=>{if(!("visualVariables"in i)||!i.visualVariables||!i.visualVariables.length)return i;const o=i.clone(),p=o.visualVariables.map(g=>M(g)?F(g):g);return o.visualVariables=p,o};function G(i){return i.map(o=>M(o)?F(o.clone()):o)}function M(i){return("size"===i.type||"color"===i.type||"opacity"===i.type)&&null!=i.stops}function F(i){return i.stops=function Y(i,o){return o.length<=8?o:(X.warn(`Found ${o.length} Visual Variable stops, but MapView only supports 8. Displayed stops will be simplified.`),o.length>16?function A(i,o){const[p,...g]=o,E=g.pop(),ae=g[0].value,ie=g[g.length-1].value,D=(ie-ae)/6,P=[];for(let S=ae;S<ie;S+=D){let I=0;for(;S>=g[I].value;)I++;const B=g[I],K=o[I-1],_=S-K.value,H=B.value===K.value?1:_/(B.value-K.value);if("color"===i){const re=g[I],Q=o[I-1],de=re.color.clone();de.r=w(Q.color.r,de.r,H),de.g=w(Q.color.g,de.g,H),de.b=w(Q.color.b,de.b,H),de.a=w(Q.color.a,de.a,H),P.push({value:S,color:de,label:re.label})}else if("size"===i){const re=g[I],Q=o[I-1],de=(0,Z.t_)(re.size),Me=w((0,Z.t_)(Q.size),de,H);P.push({value:S,size:Me,label:re.label})}else{const re=g[I],Q=w(o[I-1].opacity,re.opacity,H);P.push({value:S,opacity:Q,label:re.label})}}return[p,...P,E]}(i,o):function k(i){const[o,...p]=i,g=p.pop();for(;p.length>6;){let E=0,ae=0;for(let ie=1;ie<p.length;ie++){const S=Math.abs(p[ie].value-p[ie-1].value);S>ae&&(ae=S,E=ie)}p.splice(E,1)}return[o,...p,g]}(o))}(i.type,i.stops),i}function w(i,o,p){return(1-p)*i+p*o}function u(){if((0,J.Z)("heatmap-force-raster"))return"raster";const{supportsTextureFloat:i,supportsTextureHalfFloat:o,supportsColorBufferFloat:p,supportsColorBufferFloatBlend:g,supportsColorBufferHalfFloat:E}=(0,R.hc)("2d");return i&&p&&g||o&&E?"symbol":(0,J.Z)("heatmap-allow-raster-fallback")?"raster":"none"}function T(i){if(!i)return!0;switch(i.type){case"dot-density":if(!(0,R.hc)("2d").supportsTextureFloat)return X.error(new L.Z("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":{const o=u();if("none"===o||"raster"===o&&!(0,J.Z)("heatmap-force-raster")){const p=(0,R.hc)("2d"),g=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter(E=>!p[E]).join(", ");if("none"===o)return X.errorOnce(new L.Z("webgl-missing-extension",`Missing WebGL${p.type} requirements for Heatmap: ${g}`)),!1;"raster"===o&&X.warnOnce(`Missing WebGL${p.type} requirements for accelerated Heatmap: ${g}. Feature support may be limited.`)}break}}return!0}},64596:(fe,ee,v)=>{v.d(ee,{I_:()=>j,XA:()=>Y,Zu:()=>M,ab:()=>F,eT:()=>A,y1:()=>G,yA:()=>w}),v(986);var J=v(62208),q=v(37118),Z=v(65401),R=v(37053);v(61261),v(39351),v(25797);const j=512,G=50;function M(u,T){const i=(0,R.C5)(T);if(!i)return null;const[o,p]=i.valid;return u[2]>p?[(0,Z.Ue)([u[0],u[1],p,u[3]]),(0,Z.Ue)([o,u[1],o+u[2]-p,u[3]])]:u[0]<o?[(0,Z.Ue)([o,u[1],u[2],u[3]]),(0,Z.Ue)([p-(o-u[0]),u[1],p,u[3]])]:null}function F(u){return"text"===u||"esriTS"===u}function w(u){return"simple-marker"===u||"picture-marker"===u||"esriSMS"===u||"esriPMS"===u}function A(u){switch((0,J.Wg)(u.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function Y(u){if(!u)return null;const{xmin:T,ymin:i,xmax:o,ymax:p,spatialReference:g}=u;return new q.Z({rings:[[[T,i],[T,p],[o,p],[o,i],[T,i]]],spatialReference:g})}},11263:(fe,ee,v)=>{v.d(ee,{xS:()=>ie,B3:()=>ae});var L=v(15861),J=v(84175),q=v(39406),Z=v(18716);const R={marker:q.LW.MARKER,fill:q.LW.FILL,line:q.LW.LINE,text:q.LW.TEXT};class te{constructor(P,S,I,B){const K={minScale:null==S?void 0:S.minScale,maxScale:null==S?void 0:S.maxScale},_=function U(D){return D.minScale||D.maxScale?D.minScale+"-"+D.maxScale:""}(K);this.layers=P,this.data=S,this.hash=this._createHash()+_,this.rendererKey=I;const H={isOutline:!1,placement:null,symbologyType:q.mD.DEFAULT,vvFlags:I};for(const re of P){const Q=R[re.type];H.isOutline="line"===re.type&&re.isOutline,re.materialKey=(0,Z.jj)(Q,H),re.maxVVSize=B,re.scaleInfo=K,re.templateHash+=_}}get type(){return"expanded-cim"}_createHash(){let P="";for(const S of this.layers)P+=S.templateHash;return P}}var X=v(83100),j=v(26584),G=v(62208),M=v(10699),F=v(21726),w=v(84687),A=v(29840),k=v(78241);function Y(D,P,S){return u.apply(this,arguments)}function u(){return(u=(0,L.Z)(function*(D,P,S){if(!D.name)throw new j.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");if(D.styleName&&"Esri2DPointSymbolsStyle"===D.styleName)return T(D,S);try{return o(yield(0,k.n2)(D,P,S),D.name,P,S)}catch(I){return(0,M.k_)(I),null}})).apply(this,arguments)}function T(D,P){return i.apply(this,arguments)}function i(){return(i=(0,L.Z)(function*(D,P){const S=k.wm.replace(/\{SymbolName\}/gi,D.name);try{const I=yield(0,k.EJ)(S,P);return(0,k.KV)(I.data)}catch(I){return(0,M.k_)(I),null}})).apply(this,arguments)}function o(D,P,S,I){return p.apply(this,arguments)}function p(){return(p=(0,L.Z)(function*(D,P,S,I){const B=D.data,K={portal:S&&(0,G.pC)(S.portal)?S.portal:w.Z.getDefault(),url:(0,F.mN)(D.baseUrl),origin:"portal-item"},_=B.items.find(re=>re.name===P);if(!_)throw new j.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${P}' could not be found`,{symbolName:P});let H=(0,A.f)((0,k.v9)(_,"cimRef"),K);(0,X.XO)()&&(H=(0,X.pJ)(H));try{const re=yield(0,k.EJ)(H,I);return(0,k.KV)(re.data)}catch(re){return(0,M.k_)(re),null}})).apply(this,arguments)}const E=function(){var D=(0,L.Z)(function*(P,S,I){return new te(yield(0,J.c)(P.data,S,I),P.data,P.rendererKey,P.maxVVSize)});return function(S,I,B){return D.apply(this,arguments)}}(),ae=function(){var D=(0,L.Z)(function*(P,S,I,B){if(!P)return null;if("cim"===P.type)return E(P,S,I);if("web-style"===P.type){const K={type:"cim",data:yield Y(P,null,B),rendererKey:P.rendererKey,maxVVSize:P.maxVVSize};return E(K,S,I)}return P});return function(S,I,B,K){return D.apply(this,arguments)}}();function ie(D){if(!D)return null;const{type:P,cim:S,url:I,materialHash:B}=D,K={cim:S,type:P,mosaicHash:B,url:I,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(P){case"marker":K.size=D.size,K.path=D.path,K.animatedSymbolProperties=D.animatedSymbolProperties;break;case"line":K.dashTemplate=D.dashTemplate;break;case"text":K.text=D.text,K.fontName=D.fontName}return K}},62192:(fe,ee,v)=>{v.d(ee,{OQ:()=>ie,aV:()=>g,S1:()=>i,os:()=>o,yR:()=>E});var k,L=v(26584),J=v(8314),q=v(63290),Z=v(62208),R=v(50011),te=v(68598),U=v(64902),X=v(17626),j=v(58817),G=v(77712),F=(v(90912),v(76898)),w=v(99433),A=v(86971);let Y=k=class extends te.Z{writeLevels(S,I,B){for(const K in S)return void(I.stops=this.levels[K])}clone(){return new k({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,A.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,A.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(S=>S.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,j.d9)(this.levels)})}};(0,X._)([(0,G.Cb)()],Y.prototype,"levels",void 0),(0,X._)([(0,w.c)("levels")],Y.prototype,"writeLevels",null),Y=k=(0,X._)([(0,F.j)("esri.views.2d.engine.LevelDependentSizeVariable")],Y);const u=q.Z.getLogger("esri.views.2d.layers.support.clusterUtils");J.Z.add("esri-cluster-arcade-enabled",!0);const T=(0,J.Z)("esri-cluster-arcade-enabled"),i=(S,I,B,K)=>{const _=I.clone();if(!E(_))return _;if(B.fields)for(const H of B.fields)ie(S,H);if("visualVariables"in _){const H=(_.visualVariables||[]).filter(Q=>"$view.scale"!==Q.valueExpression),re=o(H);H.forEach(Q=>{"rotation"===Q.type?Q.field?Q.field=P(S,Q.field,"avg_angle"):Q.valueExpression&&(Q.field=D(S,Q.valueExpression,"avg_angle"),Q.valueExpression=null):Q.normalizationField?(Q.field=P(S,Q.field,"norm",Q.normalizationField),Q.normalizationField=null):Q.field?Q.field=P(S,Q.field,"avg"):(Q.field=D(S,Q.valueExpression,"avg"),Q.valueExpression=null)}),(0,Z.Wi)(re)&&!p(H)&&(H.push(g(B,K)),_.dynamicClusterSize=!0),_.visualVariables=H}switch(_.type){case"simple":break;case"unique-value":_.field?_.field=P(S,_.field,"mode"):_.valueExpression&&(_.field=D(S,_.valueExpression,"mode"),_.valueExpression=null);break;case"class-breaks":_.normalizationField?(_.field=P(S,_.field,"norm",_.normalizationField),_.normalizationField=null):_.field?_.field=P(S,_.field,"avg"):(_.field=D(S,_.valueExpression,"avg"),_.valueExpression=null)}return _},o=S=>{for(const I of S)if("size"===I.type)return I;return null},p=S=>{for(const I of S)if("cluster_count"===I.field)return!0;return!1},g=(S,I)=>{const B=[new U.Z({value:0,size:0}),new U.Z({value:1})];if((0,Z.Wi)(I))return new te.Z({field:"cluster_count",stops:[...B,new U.Z({value:2,size:0})]});const K=Object.keys(I).reduce((_,H)=>me(ce({},_),{[H]:[...B,new U.Z({value:Math.max(2,I[H].minValue),size:S.clusterMinSize}),new U.Z({value:Math.max(3,I[H].maxValue),size:S.clusterMaxSize})]}),{});return new Y({field:"cluster_count",levels:K})},E=S=>{const I=B=>u.error(new L.Z("Unsupported-renderer",B,{renderer:S}));if("unique-value"===S.type){if(S.field2||S.field3)return I("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===S.type){if(S.normalizationField){const B=S.normalizationType;if("field"!==B)return I(`FeatureReductionCluster does not support a normalizationType of ${B}`),!1}}else if("simple"!==S.type)return I(`FeatureReductionCluster does not support renderers of type ${S.type}`),!1;if(!T){if("valueExpression"in S&&S.valueExpression)return I("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in S&&S.visualVariables||[]).some(B=>!(!("valueExpression"in B)||!B.valueExpression)))return I("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function ie(S,I){const{name:B,outStatistic:K}=I,{onStatisticField:_,onStatisticValueExpression:H,statisticType:re}=K;if(H){const Q=(0,R.F)(H.toLowerCase());S.push({name:B,outStatistic:{onStatisticField:Q,onStatisticValueExpression:H,statisticType:re}})}else _?S.push({name:B,outStatistic:{onStatisticField:_,statisticType:re}}):u.error(new L.Z("mapview-unsupported-field","Unable to handle field",{field:I}))}function D(S,I,B){const K=(0,R.F)(I),_="mode"===B?`cluster_type_${K}`:`cluster_avg_${K}`;return S.some(H=>H.name===_)||S.push({name:_,outStatistic:{onStatisticField:K,onStatisticValueExpression:I,statisticType:B}}),_}function P(S,I,B,K){if("cluster_count"===I||S.some(H=>H.name===I))return I;const _=function ae(S,I,B){switch(S){case"avg":case"avg_angle":return`cluster_avg_${I}`;case"mode":return`cluster_type_${I}`;case"norm":{const K=B,_="field",H=I.toLowerCase()+",norm:"+_+","+K.toLowerCase();return"cluster_avg_"+(0,R.F)(H)}}}(B,I,K);return S.some(H=>H.name===_)||S.push("norm"===B?{name:_,outStatistic:{onStatisticField:I,onStatisticNormalizationField:K,statisticType:B}}:{name:_,outStatistic:{onStatisticField:I,statisticType:B}}),_}},43930:(fe,ee,v)=>{v.d(ee,{JV:()=>R,oq:()=>q});const J=new(v(2076).X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function q(te){return J.toJSON(te)}function R(te){const{bandCount:U,attributeTable:X,colormap:j,pixelType:G}=te.rasterInfo;return 1===U&&(null!=X||null!=j||"u8"===G||"s8"===G)}}}]);