"use strict";(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[2445],{22445:(U,p,r)=>{r.r(p),r.d(p,{createLabelFunction:()=>T,formatField:()=>v});var P=r(15861),f=r(26584),D=r(63290),g=r(88411),O=r(15348),M=r(36630),m=r(86793),C=r(46679);const E=D.Z.getLogger("esri.layers.support.labelFormatUtils"),y={type:"simple",evaluate:()=>null},L={getAttribute:(t,a)=>t.field(a)};function T(t,a,e){return h.apply(this,arguments)}function h(){return(h=(0,P.Z)(function*(t,a,e){if(!t||!t.symbol)return y;const s=t.where,o=(0,m.hV)(t),_=s?yield r.e(410).then(r.bind(r,10410)):null;let i;if("arcade"===o.type){const l=yield(0,C.WW)(o.expression,e,a);i={type:"arcade",evaluate(u){try{const n=l.evaluate({$feature:"attributes"in u?l.repurposeFeature(u):u});if(null!=n)return n.toString()}catch(n){E.error(new f.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:u,expression:o}))}return null},needsHydrationToEvaluate:()=>null==(0,m.el)(o.expression)}}else i={type:"simple",evaluate:l=>o.expression.replace(/{[^}]*}/g,u=>{const n=u.slice(1,-1),c=a.get(n);if(!c)return u;let d=null;return"attributes"in l?l&&l.attributes&&(d=l.attributes[c.name]):d=l.field(c.name),null==d?"":v(d,c)})};if(s){let l;try{l=_.WhereClause.create(s,a)}catch(n){return E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:s,error:n})),y}const u=i.evaluate;i.evaluate=n=>{const c="attributes"in n?void 0:L;try{if(l.testFeature(n,c))return u(n)}catch(d){E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:s,feature:n,error:d}))}return null}}return i})).apply(this,arguments)}function v(t,a){if(null==t)return"";const e=a.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const o=t;for(const _ of e.codedValues)if(_.code===o)return _.name}else if("range"===e.type){const o=+t,i="range"in e?e.range[1]:e.maxValue;if(("range"in e?e.range[0]:e.minValue)<=o&&o<=i)return e.name}let s=t;return"date"===a.type||"esriFieldTypeDate"===a.type?s=(0,g.p6)(s,(0,g.Ze)("short-date")):(0,M.H7)(a)&&(s=(0,O.uf)(+s)),s||""}}}]);