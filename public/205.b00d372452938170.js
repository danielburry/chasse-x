"use strict";var Q=Object.defineProperty,k=Object.defineProperties,q=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,J=(C,m,a)=>m in C?Q(C,m,{enumerable:!0,configurable:!0,writable:!0,value:a}):C[m]=a,w=(C,m)=>{for(var a in m||(m={}))ee.call(m,a)&&J(C,a,m[a]);if($)for(var a of $(m))te.call(m,a)&&J(C,a,m[a]);return C},x=(C,m)=>k(C,q(m));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[205],{52884:(C,m,a)=>{a.d(m,{AM:()=>T});var c=a(17626),u=a(14517),r=a(8314),S=a(58817),I=a(63290),t=a(77712),o=(a(90912),a(76898)),P=a(29538),l=a(53390);let T=class extends u.Z{constructor(n){super(n),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,r.Z)("mapview-transitions-duration"),this.effects=[]}set effect(n){if(this._get("effect")!==(n=n||"")){this._set("effect",n);try{this._transitionTo(B(n))}catch(s){this._transitionTo([]),I.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:n,error:s})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(n){this._updateForScale(n)}get transitioning(){return null!==this._to}canTransitionTo(n){try{return this.scale>0&&U(this._current,B(n),this.scale)}catch(s){return!1}}transitionStep(n,s){this._applyTimeTransition(n),this._updateForScale(s)}end(){this._applyTimeTransition(this.duration)}_transitionTo(n){this.scale>0&&U(this._current,n,this.scale)?(this._final=n,this._to=(0,S.d9)(n),function N(n,s,v){var y,b;const f=n.length>s.length?n:s,p=n.length>s.length?s:n,E=p[p.length-1],_=null!=(y=null==E?void 0:E.scale)?y:v,R=null!=(b=null==E?void 0:E.effects)?b:[];for(let g=p.length;g<f.length;g++)p.push({scale:_,effects:[...R]});for(let g=0;g<f.length;g++)p[g].scale=-1===p[g].scale?v:p[g].scale,f[g].scale=-1===f[g].scale?v:f[g].scale,(0,l.uF)(p[g].effects,f[g].effects)}(this._current,this._to,this.scale),this._from=(0,S.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=n),this._set("effects",this._current[0]?(0,S.d9)(this._current[0].effects):[])}_applyTimeTransition(n){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=n;const s=Math.min(1,this._time/this.duration);for(let v=0;v<this._current.length;v++){const f=this._current[v],p=this._from[v],E=this._to[v];f.scale=j(p.scale,E.scale,s);for(let _=0;_<f.effects.length;_++)f.effects[_].interpolate(p.effects[_],E.effects[_],s)}1===s&&(this._current=this._final,this._set("effects",this._current[0]?(0,S.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(n){if(this._set("scale",n),0===this._current.length)return;const s=this._current,v=this._current.length-1;let f,p,E=1;if(1===s.length||n>=s[0].scale)p=f=s[0].effects;else if(n<=s[v].scale)p=f=s[v].effects;else for(let _=0;_<v;_++){const R=s[_],y=s[_+1];if(R.scale>=n&&y.scale<=n){E=(n-R.scale)/(y.scale-R.scale),f=R.effects,p=y.effects;break}}for(let _=0;_<this.effects.length;_++)this.effects[_].interpolate(f[_],p[_],E)}};function B(n){const s=(0,P.Q)(n)||[];return function K(n){const s=n[0];return!!s&&"type"in s}(s)?[{scale:-1,effects:s}]:s}function U(n,s,v){var f,p,E,_;return!(null==(f=n[0])?void 0:f.effects)||!(null==(p=s[0])?void 0:p.effects)||!((-1===(null==(E=n[0])?void 0:E.scale)||-1===(null==(_=s[0])?void 0:_.scale))&&(n.length>1||s.length>1)&&v<=0)&&(0,l.AS)(n[0].effects,s[0].effects)}function j(n,s,v){return n+(s-n)*v}(0,c._)([(0,t.Cb)()],T.prototype,"_to",void 0),(0,c._)([(0,t.Cb)()],T.prototype,"duration",void 0),(0,c._)([(0,t.Cb)({value:""})],T.prototype,"effect",null),(0,c._)([(0,t.Cb)({readOnly:!0})],T.prototype,"effects",void 0),(0,c._)([(0,t.Cb)({readOnly:!0})],T.prototype,"hasEffects",null),(0,c._)([(0,t.Cb)({value:0})],T.prototype,"scale",null),(0,c._)([(0,t.Cb)({readOnly:!0})],T.prototype,"transitioning",null),T=(0,c._)([(0,o.j)("esri.layers.effects.EffectView")],T)},1011:(C,m,a)=>{a.d(m,{W:()=>S});var c=a(49966),u=a(52884),r=a(57477);class S extends r.s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode=t,this.requestRender()}get clips(){return this._clips}set clips(t){this._clips=t,this.children.forEach(d=>d.clips=t)}get computedEffects(){var t,d;return null!=(d=null==(t=this._effectView)?void 0:t.effects)?d:null}get effect(){var t,d;return null!=(d=null==(t=this._effectView)?void 0:t.effect)?d:""}set effect(t){(this._effectView||t)&&(this._effectView||(this._effectView=new u.AM),this._effectView.effect=t,this.requestRender())}updateTransitionProperties(t,d){super.updateTransitionProperties(t,d),this._effectView&&(this._effectView.transitionStep(t,d),this._effectView.transitioning&&this.requestRender())}doRender(t){const d=this.createRenderParams(t);this.renderChildren(d)}addChild(t){return this.addChildAt(t,this.children.length)}addChildAt(t,d=this.children.length){if(!t||this.contains(t))return t;this._needsSort=!0;const o=t.parent;return o&&o!==this&&o.removeChild(t),d>=this.children.length?this.children.push(t):this.children.splice(d,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}contains(t){return this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0}removeChild(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}removeChildAt(t){if(t<0||t>=this.children.length)return null;this._needsSort=!0;const d=this.children.splice(t,1)[0];return this._childrenSet.delete(d),this!==this.stage&&(d.clips=null),d.stage=null,d.parent=null,d}sortChildren(t){this._needsSort&&(this.children.sort(t),this._needsSort=!1)}_createTransforms(){return{dvs:(0,c.c)()}}onAttach(){super.onAttach();const t=this.stage;for(const d of this.children)d.stage=t}onDetach(){super.onDetach();for(const t of this.children)t.stage=null}renderChildren(t){for(const d of this.children)d.beforeRender(t);for(const d of this.children)d.processRender(t);for(const d of this.children)d.afterRender(t)}createRenderParams(t){return x(w({},t),{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition})}}},57477:(C,m,a)=>{a.d(m,{s:()=>t});var c=a(61885),u=a(8314),r=a(62208),S=a(10699);const I=1/(0,u.Z)("mapview-transitions-duration");class t extends c.Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(o){this._clips=o,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(o){this._opacity!==o&&(this._opacity=Math.min(1,Math.max(o,0)),this.requestRender())}get stage(){return this._stage}set stage(o){if(this._stage===o)return;const P=this._stage;this._stage=o,o?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):P.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,r.Wi)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(o){this._visible!==o&&(this._visible=o,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,S.hh)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,S.hh)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(o){this.updateTransitionProperties(o.deltaTime,o.state.scale)}afterRender(o){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var o;null==(o=this.parent)||o.removeChild(this)}setTransform(o){}processRender(o){this.stage&&this.computedVisible&&this.doRender(o)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(o,P){if(this.fadeTransitionEnabled){const l=this._fadeOutResolver||!this.visible?0:this.opacity,M=this.computedOpacity;if(M===l)this.computedVisible=this.visible;else{const T=o*I;this.computedOpacity=M>l?Math.max(l,M-T):Math.min(l,M+T),this.computedVisible=this.computedOpacity>0;const B=l===this.computedOpacity;this.inFadeTransition=!B,B||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(o){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},61261:(C,m,a)=>{var c,u,l;function r(l){switch(l){case"left":return c.Left;case"right":return c.Right;case"center":return c.Center}}function S(l){switch(l){case"top":return u.Top;case"middle":return u.Center;case"baseline":return u.Baseline;case"bottom":return u.Bottom}}function I(l){switch(l){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[c.Right,u.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[c.Center,u.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[c.Left,u.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[c.Right,u.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[c.Center,u.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[c.Left,u.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[c.Right,u.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[c.Center,u.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[c.Left,u.Top];default:return console.debug(`Found invalid placement type ${l}`),[c.Center,u.Center]}}function t(l){switch(l){case c.Right:return-1;case c.Center:return 0;case c.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${l}`),0}}function d(l){switch(l){case u.Top:return 1;case u.Center:return 0;case u.Bottom:case u.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${l}`),0}}function o(l){switch(l){case"left":return c.Left;case"right":return c.Right;case"center":return c.Center}}function P(l){switch(l){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}a.d(m,{Hd:()=>o,M7:()=>c,NS:()=>P,TR:()=>u,b7:()=>S,g:()=>t,kH:()=>r,qv:()=>I,tf:()=>d}),(l=c||(c={}))[l.Left=-1]="Left",l[l.Center=0]="Center",l[l.Right=1]="Right",function(l){l[l.Top=1]="Top",l[l.Center=0]="Center",l[l.Bottom=-1]="Bottom",l[l.Baseline=2]="Baseline"}(u||(u={}))},18716:(C,m,a)=>{a.d(m,{CA:()=>y,Gq:()=>G,Xp:()=>R,a:()=>X,dk:()=>W,hF:()=>g,jj:()=>b,jy:()=>_,m2:()=>D,mE:()=>H,qr:()=>Z});var c=a(26584),u=a(61261),r=a(39406);const p=Object.keys(r.mD).filter(h=>"number"==typeof r.mD[h]).reduce((h,e)=>x(w({},h),{[e]:r.mD[e]}),{});function _(h){return h===r.mD.OUTLINE_FILL||h===r.mD.OUTLINE_FILL_SIMPLE}function R(h){return function E(h){return h===r.mD.SIMPLE||h===r.mD.OUTLINE_FILL_SIMPLE}(h.symbologyType)}function y(h){return _(h.symbologyType)}function b(h,e){switch(h){case r.LW.FILL:return W.from(e);case r.LW.LINE:return X.from(e);case r.LW.MARKER:return H.from(e);case r.LW.TEXT:return Z.from(e);case r.LW.LABEL:return G.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${h}`)}}function g(h){switch(D.load(h).geometryType){case r.LW.MARKER:return new H(h);case r.LW.FILL:return new W(h);case r.LW.LINE:return new X(h);case r.LW.TEXT:return new Z(h);case r.LW.LABEL:return new G(h)}}class D{constructor(e){this._data=0,this._data=e}static load(e){const i=this.shared;return i.data=e,i}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case r.LW.FILL:return"fill";case r.LW.MARKER:return"marker";case r.LW.LINE:return"line";case r.LW.TEXT:return"text";case r.LW.LABEL:return"label";default:throw new c.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,i){const L=1<<e;i?this._data|=L:this._data&=~L}bit(e){return(this._data&1<<e)>>e}setBits(e,i,L){for(let O=i,Y=0;O<L;O++,Y++)this.setBit(O,0!=(e&1<<Y))}bits(e,i){let L=0;for(let O=e,Y=0;O<i;O++,Y++)L|=this.bit(O)<<Y;return L}hasVV(){return!1}setVV(e,i){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:r.mD[this.symbologyType],options:p,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}D.shared=new D(0);const z=h=>class extends h{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,i){super.setVV(e,i);const L=function S(h,e,i){const L=r.X.SIZE_FIELD_STOPS|r.X.SIZE_MINMAX_VALUE|r.X.SIZE_SCALE_STOPS|r.X.SIZE_UNIT_VALUE,O=(e&(r.mf.FIELD_TARGETS_OUTLINE|r.mf.MINMAX_TARGETS_OUTLINE|r.mf.SCALE_TARGETS_OUTLINE|r.mf.UNIT_TARGETS_OUTLINE))>>>4;return h===r.LW.LINE&&i.isOutline||h===r.LW.FILL&&_(i.symbologyType)?L&O:L&~O}(this.geometryType,e,i)&e;this.vvSizeMinMaxValue=!!(L&r.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(L&r.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(L&r.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(L&r.X.SIZE_SCALE_STOPS)}},A=h=>class extends h{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,i){super.setVV(e,i),this.vvRotation=!i.isOutline&&!!(e&r.X.ROTATION)}},V=h=>class extends h{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,i){super.setVV(e,i),this.vvColor=!i.isOutline&&!!(e&r.X.COLOR)}},F=h=>class extends h{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,i){super.setVV(e,i),this.vvOpacity=!i.isOutline&&!!(e&r.X.OPACITY)}};class W extends(V(F(z(D)))){static load(e){const i=this.shared;return i.data=e,i}static from(e){const{symbologyType:i,vvFlags:L}=e,O=this.load(0);return O.geometryType=r.LW.FILL,O.symbologyType=i,i!==r.mD.DOT_DENSITY&&O.setVV(L,e),O.data}getVariation(){return x(w({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}W.shared=new W(0);class H extends(V(F(A(z(D))))){static load(e){const i=this.shared;return i.data=e,i}static from(e){const{symbologyType:i,vvFlags:L}=e,O=this.load(0);return O.geometryType=r.LW.MARKER,O.symbologyType=i,i!==r.mD.HEATMAP&&O.setVV(L,e),O.data}getVariation(){return x(w({},super.getVariation()),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}H.shared=new H(0);class X extends(V(F(z(D)))){static load(e){const i=this.shared;return i.data=e,i}static from(e){const i=this.load(0);return i.geometryType=r.LW.LINE,i.symbologyType=e.symbologyType,i.setVV(e.vvFlags,e),i.data}getVariation(){return x(w({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}X.shared=new X(0);class Z extends(V(F(A(z(D))))){static load(e){const i=this.shared;return i.data=e,i}static from(e){const i=this.load(0);return i.geometryType=r.LW.TEXT,i.symbologyType=e.symbologyType,i.setVV(e.vvFlags,e),i.data}getVariation(){return x(w({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}Z.shared=new Z(0);class G extends(z(D)){static load(e){const i=this.shared;return i.data=e,i}static from(e){const i=this.load(0);return i.geometryType=r.LW.LABEL,i.symbologyType=e.symbologyType,i.setVV(e.vvFlags,e),i.mapAligned=(0,u.NS)(e.placement),i.data}getVariation(){return x(w({},super.getVariation()),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}G.shared=new G(0)},17807:(C,m,a)=>{a.d(m,{v:()=>u});var c=a(62208);class u{static getStorageSpec(S){return null}static createOrUpdateRendererSchema(S,I){return(0,c.pC)(S)&&"default"===S.type?S:{type:"default"}}static getVariation(S){return{}}static getVariationHash(S){return 0}}u.type="default",u.programSpec=null},37409:(C,m,a)=>{a.d(m,{t4:()=>N,a1:()=>K,EJ:()=>j});var c=a(26584),u=a(39406),r=a(18716),S=a(17807),I=a(62208),t=a(81295),d=a(39351),o=a(67969);class P extends S.v{static getStorageSpec({attributes:s}){return{visualVariables:!1,attributes:null!=s?s:null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(s,v){const{attributes:f,dotValue:p,referenceScale:E,dotSize:_,dotBlendingEnabled:R,seed:y,backgroundColor:b}=v,g=(0,I.pC)(s)&&"dot-density"===s.type?s:this._createRendererSchema();g.dotValue=p,g.dotSize=_,g.dotScale=E,g.dotBlending=R,g.seed=y;const{colors:D,activeDots:z,backgroundColor:A}=g;for(let V=0;V<d.$0;V++)(0,t.Vs)(D,V>=f.length?null:f[V].color,4*V);for(let V=0;V<8;V++)z[V]=V<v.attributes.length?1:0;return(0,t.Vs)(A,b),g}static getVariation(s){return{ddDotBlending:s.dotBlending}}static getVariationHash(s){return s.dotBlending?1:0}}P.type="dot-density",P.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:o.g.SHORT},{location:1,name:"a_id",count:3,type:o.g.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:o.g.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:o.g.FLOAT}]}};var l=a(23841),M=a(36859);class T extends S.v{static getStorageSpec({field:s,valueExpression:v}){return{visualVariables:!1,attributes:s||v?[{field:s,valueExpression:v}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(s,v){const{radius:f,minDensity:p,maxDensity:E,referenceScale:_,field:R,valueExpression:y,colorStops:b}=v,g=E-p,D=R||y?1:0,z=b.map(({color:F,ratio:W})=>`${W}:${F.toString()}`).join();let A,V=!0;return(0,I.pC)(s)&&"heatmap"===s.type?(A=s,V=z!==s.gradientHash):A=this._createRendererSchema(),A.radius=(0,l.F2)(f),A.minDensity=p,A.densityRange=g,A.referenceScale=_,A.isFieldActive=D,V&&(A.gradient=(0,M.uI)(b),A.gradientHash=z),A}}T.type="heatmap",T.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:o.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:o.g.SHORT},{location:4,name:"a_id",count:4,type:o.g.UNSIGNED_BYTE}]}};var B=a(91558);class U extends S.v{static getStorageSpec({attributes:s}){return{visualVariables:!0,attributes:null!=s?s:null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*d.eV),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(s,v){const{attributes:f,defaultColor:p,holePercentage:E,othersCategory:_,outline:R}=v,y=(0,I.pC)(s)&&"pie-chart"===s.type?s:this._createRendererSchema();for(let b=0;b<d.eV;b++){const g=b>=f.length?new B.Z([0,0,0,0]):f[b].color;(0,t.Vs)(y.colors,g,4*b)}return(0,t.Vs)(y.defaultColor,p),(0,t.Vs)(y.othersColor,null==_?void 0:_.color),(0,t.Vs)(y.outlineColor,null==R?void 0:R.color),y.outlineWidth=(0,l.F2)((null==R?void 0:R.width)||0),y.holePercentage=E,y.sectorThreshold=(null==_?void 0:_.threshold)||0,y.numberOfFields=f.length,y}static getVariation(s){return{numberOfFields:s.numberOfFields}}static getVariationHash(s){return s.numberOfFields}}function N(n,s){if(n.type!==s)throw new c.Z("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${s}" but found type "${n.type}"`)}function j(n){switch(n.type){case"dot-density":return P;case"heatmap":return T;case"pie-chart":return U;default:return S.v}}function K(n){const{geometryType:s,symbologyType:v}=r.m2.load(n);switch(s){case u.LW.FILL:if(v===u.mD.DOT_DENSITY)return P;break;case u.LW.MARKER:switch(v){case u.mD.HEATMAP:return T;case u.mD.PIE_CHART:return U}}return S.v}U.type="pie-chart",U.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:o.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:o.g.SHORT},{location:2,name:"a_texCoords",count:2,type:o.g.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:o.g.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:o.g.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:o.g.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:o.g.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:o.g.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:o.g.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]}}}]);