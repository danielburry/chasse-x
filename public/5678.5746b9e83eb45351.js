"use strict";var Xe=Object.defineProperty,Qe=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,me=(it,J,u)=>J in it?Xe(it,J,{enumerable:!0,configurable:!0,writable:!0,value:u}):it[J]=u,Gt=(it,J)=>{for(var u in J||(J={}))qe.call(J,u)&&me(it,u,J[u]);if(de)for(var u of de(J))tn.call(J,u)&&me(it,u,J[u]);return it},Jt=(it,J)=>Qe(it,ke(J));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[5678],{11915:(it,J,u)=>{u.d(J,{e:()=>W});var D,N,S={exports:{}};D=S,void 0!==(N=function(){function $(n,i,a){a=a||2;var l,c,p,d,C,z,tt,_t=i&&i.length,ut=_t?i[0]*a:n.length,q=k(n,0,ut,a,!0),H=[];if(!q||q.next===q.prev)return H;if(_t&&(q=function w(n,i,a,l){var c,p,d,C=[];for(c=0,p=i.length;c<p;c++)(d=k(n,i[c]*l,c<p-1?i[c+1]*l:n.length,l,!1))===d.next&&(d.steiner=!0),C.push(gt(d));for(C.sort(_),c=0;c<C.length;c++)a=L(a=f(C[c],a),a.next);return a}(n,i,q,a)),n.length>80*a){l=p=n[0],c=d=n[1];for(var K=a;K<ut;K+=a)(C=n[K])<l&&(l=C),(z=n[K+1])<c&&(c=z),C>p&&(p=C),z>d&&(d=z);tt=0!==(tt=Math.max(p-l,d-c))?1/tt:0}return I(q,H,a,l,c,tt),H}function k(n,i,a,l,c){var p,d;if(c===Tt(n,i,a,l)>0)for(p=i;p<a;p+=l)d=V(p,n[p],n[p+1],d);else for(p=a-l;p>=i;p-=l)d=V(p,n[p],n[p+1],d);if(d&&Mt(d,d.next)){var C=d.next;Et(d),d=C}return d}function L(n,i){if(!n)return n;i||(i=n);var a,l=n;do{if(a=!1,l.steiner||!Mt(l,l.next)&&0!==Y(l.prev,l,l.next))l=l.next;else{var c=l.prev;if(Et(l),(l=i=c)===l.next)break;a=!0}}while(a||l!==i);return i}function I(n,i,a,l,c,p,d){if(n){!d&&p&&function B(n,i,a,l){var c=n;do{null===c.z&&(c.z=X(c.x,c.y,i,a,l)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==n);c.prevZ.nextZ=null,c.prevZ=null,function rt(n){var i,a,l,c,p,d,C,z,tt=1;do{for(a=n,n=null,p=null,d=0;a;){for(d++,l=a,C=0,i=0;i<tt&&(C++,l=l.nextZ);i++);for(z=tt;C>0||z>0&&l;)0!==C&&(0===z||!l||a.z<=l.z)?(c=a,a=a.nextZ,C--):(c=l,l=l.nextZ,z--),p?p.nextZ=c:n=c,c.prevZ=p,p=c;a=l}p.nextZ=null,tt*=2}while(d>1)}(c)}(n,l,c,p);for(var C,z,tt=n;n.prev!==n.next;)if(C=n.prev,z=n.next,p?U(n,l,c,p):T(n))i.push(C.i/a),i.push(n.i/a),i.push(z.i/a),Et(n),n=z.next,tt=z.next;else if((n=z)===tt){d?1===d?I(n=E(L(n),i,a),i,a,l,c,p,2):2===d&&F(n,i,a,l,c,p):I(L(n),i,a,l,c,p,1);break}}}function T(n){var i=n.prev,a=n,l=n.next;if(Y(i,a,l)>=0)return!1;for(var c=n.next.next;c!==n.prev;){if(pt(i.x,i.y,a.x,a.y,l.x,l.y,c.x,c.y)&&Y(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function U(n,i,a,l){var c=n.prev,p=n,d=n.next;if(Y(c,p,d)>=0)return!1;for(var tt=c.x>p.x?c.x>d.x?c.x:d.x:p.x>d.x?p.x:d.x,_t=c.y>p.y?c.y>d.y?c.y:d.y:p.y>d.y?p.y:d.y,ut=X(c.x<p.x?c.x<d.x?c.x:d.x:p.x<d.x?p.x:d.x,c.y<p.y?c.y<d.y?c.y:d.y:p.y<d.y?p.y:d.y,i,a,l),q=X(tt,_t,i,a,l),H=n.prevZ,K=n.nextZ;H&&H.z>=ut&&K&&K.z<=q;){if(H!==n.prev&&H!==n.next&&pt(c.x,c.y,p.x,p.y,d.x,d.y,H.x,H.y)&&Y(H.prev,H,H.next)>=0||(H=H.prevZ,K!==n.prev&&K!==n.next&&pt(c.x,c.y,p.x,p.y,d.x,d.y,K.x,K.y)&&Y(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;H&&H.z>=ut;){if(H!==n.prev&&H!==n.next&&pt(c.x,c.y,p.x,p.y,d.x,d.y,H.x,H.y)&&Y(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;K&&K.z<=q;){if(K!==n.prev&&K!==n.next&&pt(c.x,c.y,p.x,p.y,d.x,d.y,K.x,K.y)&&Y(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function E(n,i,a){var l=n;do{var c=l.prev,p=l.next.next;!Mt(c,p)&&Pt(c,l,l.next,p)&&ht(c,p)&&ht(p,c)&&(i.push(c.i/a),i.push(l.i/a),i.push(p.i/a),Et(l),Et(l.next),l=n=p),l=l.next}while(l!==n);return L(l)}function F(n,i,a,l,c,p){var d=n;do{for(var C=d.next.next;C!==d.prev;){if(d.i!==C.i&&vt(d,C)){var z=yt(d,C);return d=L(d,d.next),z=L(z,z.next),I(d,i,a,l,c,p),void I(z,i,a,l,c,p)}C=C.next}d=d.next}while(d!==n)}function _(n,i){return n.x-i.x}function A(n){if(n.next.prev===n)return n;let i=n;for(;;){const a=i.next;if(a.prev===i||a===i||a===n)break;i=a}return i}function f(n,i){var a=function x(n,i){var a,l=i,c=n.x,p=n.y,d=-1/0;do{if(p<=l.y&&p>=l.next.y&&l.next.y!==l.y){var C=l.x+(p-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(C<=c&&C>d){if(d=C,C===c){if(p===l.y)return l;if(p===l.next.y)return l.next}a=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!a)return null;if(c===d)return a;var z,tt=a,_t=a.x,ut=a.y,q=1/0;l=a;do{c>=l.x&&l.x>=_t&&c!==l.x&&pt(p<ut?c:d,p,_t,ut,p<ut?d:c,p,l.x,l.y)&&(z=Math.abs(p-l.y)/(c-l.x),ht(l,n)&&(z<q||z===q&&(l.x>a.x||l.x===a.x&&R(a,l)))&&(a=l,q=z)),l=l.next}while(l!==tt);return a}(n,i);if(!a)return i;var l=yt(a,n),c=L(a,a.next);let p=A(l);return L(p,p.next),c=A(c),A(i===a?c:i)}function R(n,i){return Y(n.prev,n,i.prev)<0&&Y(i.next,n,n.next)<0}function X(n,i,a,l,c){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*c)|n<<8))|n<<4))|n<<2))|n<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-l)*c)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function gt(n){var i=n,a=n;do{(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next}while(i!==n);return a}function pt(n,i,a,l,c,p,d,C){return(c-d)*(i-C)-(n-d)*(p-C)>=0&&(n-d)*(l-C)-(a-d)*(i-C)>=0&&(a-d)*(p-C)-(c-d)*(l-C)>=0}function vt(n,i){return n.next.i!==i.i&&n.prev.i!==i.i&&!function bt(n,i){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==i.i&&a.next.i!==i.i&&Pt(a,a.next,n,i))return!0;a=a.next}while(a!==n);return!1}(n,i)&&(ht(n,i)&&ht(i,n)&&function dt(n,i){var a=n,l=!1,c=(n.x+i.x)/2,p=(n.y+i.y)/2;do{a.y>p!=a.next.y>p&&a.next.y!==a.y&&c<(a.next.x-a.x)*(p-a.y)/(a.next.y-a.y)+a.x&&(l=!l),a=a.next}while(a!==n);return l}(n,i)&&(Y(n.prev,n,i.prev)||Y(n,i.prev,i))||Mt(n,i)&&Y(n.prev,n,n.next)>0&&Y(i.prev,i,i.next)>0)}function Y(n,i,a){return(i.y-n.y)*(a.x-i.x)-(i.x-n.x)*(a.y-i.y)}function Mt(n,i){return n.x===i.x&&n.y===i.y}function Pt(n,i,a,l){var c=ot(Y(n,i,a)),p=ot(Y(n,i,l)),d=ot(Y(a,l,n)),C=ot(Y(a,l,i));return c!==p&&d!==C||!(0!==c||!Z(n,a,i))||!(0!==p||!Z(n,l,i))||!(0!==d||!Z(a,n,l))||!(0!==C||!Z(a,i,l))}function Z(n,i,a){return i.x<=Math.max(n.x,a.x)&&i.x>=Math.min(n.x,a.x)&&i.y<=Math.max(n.y,a.y)&&i.y>=Math.min(n.y,a.y)}function ot(n){return n>0?1:n<0?-1:0}function ht(n,i){return Y(n.prev,n,n.next)<0?Y(n,i,n.next)>=0&&Y(n,n.prev,i)>=0:Y(n,i,n.prev)<0||Y(n,n.next,i)<0}function yt(n,i){var a=new wt(n.i,n.x,n.y),l=new wt(i.i,i.x,i.y),c=n.next,p=i.prev;return n.next=i,i.prev=n,a.next=c,c.prev=a,l.next=a,a.prev=l,p.next=l,l.prev=p,l}function V(n,i,a,l){var c=new wt(n,i,a);return l?(c.next=l.next,c.prev=l,l.next.prev=c,l.next=c):(c.prev=c,c.next=c),c}function Et(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function wt(n,i,a){this.i=n,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tt(n,i,a,l){for(var c=0,p=i,d=a-l;p<a;p+=l)c+=(n[d]-n[p])*(n[p+1]+n[d+1]),d=p;return c}return $.deviation=function(n,i,a,l){var c=i&&i.length,d=Math.abs(Tt(n,0,c?i[0]*a:n.length,a));if(c)for(var C=0,z=i.length;C<z;C++)d-=Math.abs(Tt(n,i[C]*a,C<z-1?i[C+1]*a:n.length,a));var ut=0;for(C=0;C<l.length;C+=3){var q=l[C]*a,H=l[C+1]*a,K=l[C+2]*a;ut+=Math.abs((n[q]-n[K])*(n[H+1]-n[q+1])-(n[q]-n[H])*(n[K+1]-n[q+1]))}return 0===d&&0===ut?0:Math.abs((ut-d)/d)},$.flatten=function(n){for(var i=n[0][0].length,a={vertices:[],holes:[],dimensions:i},l=0,c=0;c<n.length;c++){for(var p=0;p<n[c].length;p++)for(var d=0;d<i;d++)a.vertices.push(n[c][p][d]);c>0&&a.holes.push(l+=n[c-1].length)}return a},$}())&&(D.exports=N);const W=S.exports},61751:(it,J,u)=>{u.d(J,{Z:()=>_});var E,D=u(17626),M=u(86810),N=u(58817),S=u(63290),W=u(77712),$=u(66656),k=u(76898),L=u(90912),I=u(45348),T=u(27530),U=u(92529);const F=S.Z.getLogger("esri.geometry.support.MeshComponent");let w=E=class extends M.wq{constructor(A){super(A),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(A){return(0,L.TJ)(E,A)}castFaces(A){return(0,U.X)(A,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},F)}castMaterial(A){return(0,L.TJ)(A&&"object"==typeof A&&("metallic"in A||"roughness"in A||"metallicRoughnessTexture"in A)?T.Z:I.Z,A)}clone(){return new E({faces:(0,N.d9)(this.faces),shading:this.shading,material:(0,N.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(A,f){const x={faces:(0,N.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(A,f):null,trustSourceNormals:this.trustSourceNormals};return new E(x)}};(0,D._)([(0,W.Cb)({json:{write:!0}})],w.prototype,"faces",void 0),(0,D._)([(0,$.p)("faces")],w.prototype,"castFaces",null),(0,D._)([(0,W.Cb)({type:I.Z,json:{write:!0}})],w.prototype,"material",void 0),(0,D._)([(0,$.p)("material")],w.prototype,"castMaterial",null),(0,D._)([(0,W.Cb)({type:String,json:{write:!0}})],w.prototype,"shading",void 0),(0,D._)([(0,W.Cb)({type:Boolean})],w.prototype,"trustSourceNormals",void 0),w=E=(0,D._)([(0,k.j)("esri.geometry.support.MeshComponent")],w);const _=w},45348:(it,J,u)=>{u.d(J,{Z:()=>F});var U,D=u(17626),M=u(91558),N=u(86810),S=u(62208),W=u(77712),I=(u(85931),u(8314),u(90912),u(76898)),T=u(57807);let E=U=class extends N.wq{constructor(w){super(w),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(w,_){const A=(0,S.pC)(w)?w.get(this):null;if(A)return A;const f=new U(this.clonePropertiesWithDeduplication(_));return(0,S.pC)(w)&&w.set(this,f),f}clonePropertiesWithDeduplication(w){return{color:(0,S.pC)(this.color)?this.color.clone():null,colorTexture:(0,S.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(w):null,normalTexture:(0,S.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(w):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,D._)([(0,W.Cb)({type:M.Z,json:{write:!0}})],E.prototype,"color",void 0),(0,D._)([(0,W.Cb)({type:T.Z,json:{write:!0}})],E.prototype,"colorTexture",void 0),(0,D._)([(0,W.Cb)({type:T.Z,json:{write:!0}})],E.prototype,"normalTexture",void 0),(0,D._)([(0,W.Cb)({nonNullable:!0,json:{write:!0}})],E.prototype,"alphaMode",void 0),(0,D._)([(0,W.Cb)({nonNullable:!0,json:{write:!0}})],E.prototype,"alphaCutoff",void 0),(0,D._)([(0,W.Cb)({nonNullable:!0,json:{write:!0}})],E.prototype,"doubleSided",void 0),E=U=(0,D._)([(0,I.j)("esri.geometry.support.MeshMaterial")],E);const F=E},27530:(it,J,u)=>{u.d(J,{Z:()=>F});var U,D=u(17626),M=u(91558),N=u(62208),S=u(77712),L=(u(85931),u(8314),u(90912),u(76898)),I=u(45348),T=u(57807);let E=U=class extends I.Z{constructor(w){super(w),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(w,_){const A=(0,N.pC)(w)?w.get(this):null;if(A)return A;const f=new U(this.clonePropertiesWithDeduplication(_));return(0,N.pC)(w)&&w.set(this,f),f}clonePropertiesWithDeduplication(w){return Jt(Gt({},super.clonePropertiesWithDeduplication(w)),{emissiveColor:(0,N.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,N.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(w):null,occlusionTexture:(0,N.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(w):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,N.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(w):null})}};(0,D._)([(0,S.Cb)({type:M.Z,json:{write:!0}})],E.prototype,"emissiveColor",void 0),(0,D._)([(0,S.Cb)({type:T.Z,json:{write:!0}})],E.prototype,"emissiveTexture",void 0),(0,D._)([(0,S.Cb)({type:T.Z,json:{write:!0}})],E.prototype,"occlusionTexture",void 0),(0,D._)([(0,S.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],E.prototype,"metallic",void 0),(0,D._)([(0,S.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],E.prototype,"roughness",void 0),(0,D._)([(0,S.Cb)({type:T.Z,json:{write:!0}})],E.prototype,"metallicRoughnessTexture",void 0),E=U=(0,D._)([(0,L.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],E);const F=E},57807:(it,J,u)=>{u.d(J,{Z:()=>A});var E,D=u(17626),N=(u(8314),u(86810)),S=u(77712),$=(u(85931),u(90912)),k=u(68653),L=u(76898),I=u(99433),T=u(29840),U=u(18605);const F=new WeakMap;let w=0,_=E=class extends N.wq{constructor(f){super(f),this.wrap="repeat"}get url(){return this._get("url")||null}set url(f){this._set("url",f),f&&this._set("data",null)}get data(){return this._get("data")||null}set data(f){this._set("data",f),f&&this._set("url",null)}writeData(f,x,R,B){if(f instanceof HTMLImageElement){const rt={type:"image-element",src:(0,T.t)(f.src,B),crossOrigin:f.crossOrigin};x[R]=rt}else if(f instanceof HTMLCanvasElement){const rt=f.getContext("2d").getImageData(0,0,f.width,f.height),X={type:"canvas-element",imageData:this._encodeImageData(rt)};x[R]=X}else if(f instanceof HTMLVideoElement){const rt={type:"video-element",src:(0,T.t)(f.src,B),autoplay:f.autoplay,loop:f.loop,muted:f.muted,crossOrigin:f.crossOrigin,preload:f.preload};x[R]=rt}else{const rt={type:"image-data",imageData:this._encodeImageData(f)};x[R]=rt}}readData(f){switch(f.type){case"image-element":{const x=new Image;return x.src=f.src,x.crossOrigin=f.crossOrigin,x}case"canvas-element":{const x=this._decodeImageData(f.imageData),R=document.createElement("canvas");return R.width=x.width,R.height=x.height,R.getContext("2d").putImageData(x,0,0),R}case"image-data":return this._decodeImageData(f.imageData);case"video-element":{const x=document.createElement("video");return x.src=f.src,x.crossOrigin=f.crossOrigin,x.autoplay=f.autoplay,x.loop=f.loop,x.muted=f.muted,x.preload=f.preload,x}default:return}}get transparent(){const f=this.data,x=this.url;if(f instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(f.getContext("2d").getImageData(0,0,f.width,f.height));if(f instanceof ImageData)return this._imageDataContainsTransparent(f);if(x){const R=x.substr(x.length-4,4).toLowerCase(),B=x.substr(0,15).toLocaleLowerCase();if(".png"===R||"data:image/png;"===B)return!0}return!1}set transparent(f){null!=f?this._override("transparent",f):this._clearOverride("transparent")}get contentHash(){const f="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",x=(R="")=>`d:${R},t:${this.transparent},w:${f}`;return null!=this.url?x(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?x(this.data.src):(F.has(this.data)||F.set(this.data,++w),x(F.get(this.data))):x()}clone(){const f={url:this.url,data:this.data,wrap:this._cloneWrap()};return new E(f)}cloneWithDeduplication(f){const x=f.get(this);if(x)return x;const R=this.clone();return f.set(this,R),R}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(f){let x="";for(let R=0;R<f.data.length;R++)x+=String.fromCharCode(f.data[R]);return{data:btoa(x),width:f.width,height:f.height}}_decodeImageData(f){const x=atob(f.data),R=new Uint8ClampedArray(x.length);for(let B=0;B<x.length;B++)R[B]=x.charCodeAt(B);return(0,U.Jl)(R,f.width,f.height)}_imageDataContainsTransparent(f){for(let x=3;x<f.data.length;x+=4)if(255!==f.data[x])return!0;return!1}static from(f){return"string"==typeof f?new E({url:f}):f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof ImageData||f instanceof HTMLVideoElement?new E({data:f}):(0,$.TJ)(E,f)}};(0,D._)([(0,S.Cb)({type:String,json:{write:T.w}})],_.prototype,"url",null),(0,D._)([(0,S.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,S.Cb)()],_.prototype,"data",null),(0,D._)([(0,I.c)("data")],_.prototype,"writeData",null),(0,D._)([(0,k.r)("data")],_.prototype,"readData",null),(0,D._)([(0,S.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],_.prototype,"transparent",null),(0,D._)([(0,S.Cb)({json:{write:!0}})],_.prototype,"wrap",void 0),(0,D._)([(0,S.Cb)({readOnly:!0})],_.prototype,"contentHash",null),_=E=(0,D._)([(0,L.j)("esri.geometry.support.MeshTexture")],_);const A=_},92529:(it,J,u)=>{u.d(J,{Q:()=>T,X:()=>E});var L,D=u(17626),M=u(86810),N=u(58817),S=u(63290),W=u(77712),$=u(66656),k=u(76898);const I=S.Z.getLogger("esri.geometry.support.MeshVertexAttributes");let T=L=class extends M.wq{constructor(_){super(_),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(_){return E(_,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},I)}castPosition(_){return _&&_ instanceof Float32Array&&I.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),E(_,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},I)}castUv(_){return E(_,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},I)}castNormal(_){return E(_,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},I)}castTangent(_){return E(_,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},I)}clone(){const _={position:(0,N.d9)(this.position),uv:(0,N.d9)(this.uv),normal:(0,N.d9)(this.normal),tangent:(0,N.d9)(this.tangent),color:(0,N.d9)(this.color)};return new L(_)}clonePositional(){const _={position:(0,N.d9)(this.position),normal:(0,N.d9)(this.normal),tangent:(0,N.d9)(this.tangent),uv:this.uv,color:this.color};return new L(_)}};function U(_,A,f,x){const{loggerTag:R,stride:B}=A;return _.length%B!=0?(x.error(R,`Invalid array length, expected a multiple of ${B}`),new f([])):_}function E(_,A,f,x,R){if(!_)return _;if(_ instanceof A)return U(_,x,A,R);for(const B of f)if(_ instanceof B)return U(new A(_),x,A,R);if(Array.isArray(_))return U(new A(_),x,A,R);{const B=f.map(rt=>`'${rt.name}'`);return R.error(`Failed to set property, expected one of ${B}, but got ${_.constructor.name}`),new A([])}}function F(_,A,f){A[f]=function w(_){const A=new Array(_.length);for(let f=0;f<_.length;f++)A[f]=_[f];return A}(_)}(0,D._)([(0,W.Cb)({json:{write:F}})],T.prototype,"color",void 0),(0,D._)([(0,$.p)("color")],T.prototype,"castColor",null),(0,D._)([(0,W.Cb)({nonNullable:!0,json:{write:F}})],T.prototype,"position",void 0),(0,D._)([(0,$.p)("position")],T.prototype,"castPosition",null),(0,D._)([(0,W.Cb)({json:{write:F}})],T.prototype,"uv",void 0),(0,D._)([(0,$.p)("uv")],T.prototype,"castUv",null),(0,D._)([(0,W.Cb)({json:{write:F}})],T.prototype,"normal",void 0),(0,D._)([(0,$.p)("normal")],T.prototype,"castNormal",null),(0,D._)([(0,W.Cb)({json:{write:F}})],T.prototype,"tangent",void 0),(0,D._)([(0,$.p)("tangent")],T.prototype,"castTangent",null),T=L=(0,D._)([(0,k.j)("esri.geometry.support.MeshVertexAttributes")],T)},13757:(it,J,u)=>{u.d(J,{d:()=>M});var D=u(21286);function M(k,L,I){var Pt;const T=k.byteLength/(4*L),U=new Uint32Array(k,0,T*L);let E=new Uint32Array(T);const F=null!=(Pt=null==I?void 0:I.minReduction)?Pt:0,w=(null==I?void 0:I.originalIndices)||null,_=w?w.length:0,A=(null==I?void 0:I.componentOffsets)||null;let f=0;if(A)for(let Z=0;Z<A.length-1;Z++){const ot=A[Z+1]-A[Z];ot>f&&(f=ot)}else f=T;const x=Math.floor(1.1*f)+1;(null==$||$.length<2*x)&&($=new Uint32Array((0,D.Sf)(2*x)));for(let Z=0;Z<2*x;Z++)$[Z]=0;let R=0;const B=!!A&&!!w,rt=B?_:T,X=B?new Uint32Array(_):null;let pt=0!==F?Math.ceil(7.84*1.96/(F*F)*F*(1-F)):rt,vt=1,Y=A?A[1]:rt;for(let Z=0;Z<rt;Z++){if(Z===pt){const V=1-R/Z;if(V+1.96*Math.sqrt(V*(1-V)/Z)<F)return null;pt*=2}if(Z===Y){for(let V=0;V<2*x;V++)$[V]=0;if(w)for(let V=A[vt-1];V<A[vt];V++)X[V]=E[w[V]];Y=A[++vt]}const ot=B?w[Z]:Z,bt=ot*L,ht=W(U,bt,L);let dt=ht%x,yt=R;for(;0!==$[2*dt+1];){if($[2*dt]===ht){const V=$[2*dt+1]-1;if(N(U,bt,V*L,L)){yt=E[V];break}}dt++,dt>=x&&(dt-=x)}yt===R&&($[2*dt]=ht,$[2*dt+1]=ot+1,R++),E[ot]=yt}if(0!==F&&1-R/T<F)return null;if(B){for(let Z=A[vt-1];Z<X.length;Z++)X[Z]=E[w[Z]];E=X}const Mt=new Uint32Array(L*R);R=0;for(let Z=0;Z<rt;Z++)E[Z]===R&&(S(U,(B?w[Z]:Z)*L,Mt,R*L,L),R++);if(w&&!B){const Z=new Uint32Array(_);for(let ot=0;ot<Z.length;ot++)Z[ot]=E[w[ot]];E=Z}return{buffer:Mt.buffer,indices:E,uniqueCount:R}}function N(k,L,I,T){for(let U=0;U<T;U++)if(k[L+U]!==k[I+U])return!1;return!0}function S(k,L,I,T,U){for(let E=0;E<U;E++)I[T+E]=k[L+E]}function W(k,L,I){let T=0;for(let U=0;U<I;U++)T=k[L+U]+T|0,T=T+(T<<11)+(T>>>2)|0;return T>>>0}let $=null},25678:(it,J,u)=>{u.r(J),u.d(J,{meshFeatureSetFromJSON:()=>$e});var yt,t,D=u(88879),M=u(62208),N=u(2004),S=u(15861),W=u(17626),$=u(26584),k=u(80542),L=u(47996),I=u(63290),T=u(60330),U=u(10699),E=u(32917),F=u(77712),f=(u(85931),u(8314),u(90912),u(76898)),x=u(28093),R=u(21674),B=u(49672),rt=u(37118),X=u(89586),gt=u(61751),pt=u(99746),vt=u(92529),Y=u(11915),Mt=u(25748),Pt=u(13757);function ht(t,r,e,o,s,h,g){s*=3;for(let m=0;m<h;++m){const v=t[r];o[s++]=v[0],o[s++]=v[1],o[s++]=g?v[2]:0,r+=e}return s/3}function dt(t){return!(0,Mt.bu)(t,!1,!1)}(t=yt||(yt={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var V=u(55915),Et=u(92545),wt=u(60853);const Tt=I.Z.getLogger("esri.geometry.support.meshUtils.centerAt");const p=(0,x.c)(),d=(0,x.c)();var C=u(21726);function tt(){return tt=(0,S.Z)(function*(t,r,e){const{loadGLTFMesh:o}=yield(0,U.Hl)(Promise.all([u.e(5268),u.e(9185)]).then(u.bind(u,29185)),e),s=yield ut(r,e),h=o(new B.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),s.url,{resolveFile:_t(s),useTransform:!0,signal:(0,M.pC)(e)?e.signal:null});h.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:g,components:m}=yield h;t.vertexAttributes=g,t.components=m}),tt.apply(this,arguments)}function _t(t){const r=(0,C.Yd)(t.url);return e=>{var h;const o=(0,C.PF)(e,r,r),s=o?o.replace(/^ *\.\//,""):null;return null!=(h=t.files.get(s))?h:e}}function ut(t,r){return q.apply(this,arguments)}function q(){return q=(0,S.Z)(function*(t,r){return t instanceof Blob?It.fromBlob(t):"string"==typeof t?new It(t):Array.isArray(t)?H(t,r):xe(t,r)}),q.apply(this,arguments)}function H(t,r){return K.apply(this,arguments)}function K(){return K=(0,S.Z)(function*(t,r){const e=new Map;let o=null;const s=yield(0,U.WW)(t.map(function(){var g=(0,S.Z)(function*(m){return{name:m.name,source:yield ut(m instanceof Blob?m:m.source,r)}});return function(m){return g.apply(this,arguments)}}())),h=[];for(const g of s)g&&((0,U.Hc)(r)?g.source.dispose():h.push(g));(0,U.k_)(r);for(const{name:g,source:m}of h)((0,M.Wi)(o)||/\.(gltf|glb)/i.test(g))&&(o=m.url),e.set(g,m.url),m.files&&m.files.forEach((v,y)=>e.set(y,v));if((0,M.Wi)(o))throw new $.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new It(o,()=>h.forEach(({source:g})=>g.dispose()),e)}),K.apply(this,arguments)}function xe(t,r){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,S.Z)(function*(t,r){const{default:e}=yield(0,U.Hl)(Promise.resolve().then(u.bind(u,84792)),r),o="string"==typeof t.multipart[0]?yield Promise.all(t.multipart.map(function(){var s=(0,S.Z)(function*(h){return(yield e(h,{responseType:"array-buffer"})).data});return function(h){return s.apply(this,arguments)}}())):t.multipart;return It.fromBlob(new Blob(o))}),Vt.apply(this,arguments)}class It{constructor(r,e=(()=>{}),o=new Map){this.url=r,this.dispose=e,this.files=o}static fromBlob(r){const e=URL.createObjectURL(r);return new It(e,()=>URL.revokeObjectURL(e))}}var kt=u(30217),Yt=u(550),qt=u(43703),at=u(84161),Xt=u(12080),st=u(65231);const ve=I.Z.getLogger("esri.geometry.support.meshUtils.offset");function te(t,r){if(t)for(let e=0;e<t.length;e+=3)for(let o=0;o<3;o++)t[e+o]+=r[o]}const Me=(0,x.c)(),ee=(0,qt.c)(),ne=(0,Yt.c)(),Kt={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function Nt(t,r,e){t.isPlane||function Re(t){for(let r=0;r<t.position.length;r+=3)t.position[r+2]+=.5}(t),function be(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];At[0]=e[0],At[4]=e[1],At[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let s=0;s<3;s++)et[s]=t.position[o+s];(0,at.t)(et,et,At);for(let s=0;s<3;s++)t.position[o+s]=et[s]}if(e[0]!==e[1]||e[1]!==e[2]){At[0]=1/e[0],At[4]=1/e[1],At[8]=1/e[2];for(let o=0;o<t.normal.length;o+=3){for(let s=0;s<3;s++)et[s]=t.normal[o+s];(0,at.t)(et,et,At),(0,at.n)(et,et);for(let s=0;s<3;s++)t.normal[o+s]=et[s]}}}(t,e&&e.size);const{vertexAttributes:o,transform:s}=(0,wt.w1)(t,r,e);return{vertexAttributes:new vt.Q(Jt(Gt({},o),{uv:t.uv})),transform:s,components:[new gt.Z({faces:t.faces,material:e&&e.material||null})],spatialReference:r.spatialReference}}const Ie={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Le={south:0,east:1,north:2,west:3,up:4,down:5},et=(0,x.c)(),At=(0,Yt.c)();var Ue=u(28347);const re=I.Z.getLogger("esri.geometry.support.meshUtils.rotate");function jt(t,r,e,o=x.Z){if(!(0,M.Wi)(t)){(0,Ue.d)(zt,(0,X.WH)(r),(0,X.ZZ)(r));for(let s=0;s<t.length;s+=e){for(let h=0;h<3;h++)Ft[h]=t[s+h]-o[h];(0,at.m)(Ft,Ft,zt);for(let h=0;h<3;h++)t[s+h]=Ft[h]+o[h]}}}const Ft=(0,x.c)(),oe=(0,x.c)(),se=(0,X.Ue)(),zt=(0,qt.c)(),ie=(0,Yt.c)(),ae=(0,x.c)(),le=I.Z.getLogger("esri.geometry.support.meshUtils.scale");function ce(t,r,e=x.Z){if(t)for(let o=0;o<t.length;o+=3){for(let s=0;s<3;s++)St[s]=t[o+s]-e[s];(0,at.g)(St,St,r);for(let s=0;s<3;s++)t[o+s]=St[s]+e[s]}}const St=(0,x.c)(),ue=(0,x.c)(),pe=(0,x.c)();var Ct;const mt=I.Z.getLogger("esri.geometry.Mesh");let ft=Ct=class extends((0,k.p)(L.Z.LoadableMixin((0,T.v)(R.Z)))){constructor(t){super(t),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new vt.Q,this.type="mesh"}initialize(){((0,M.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.handles.add((0,E.YP)(()=>{var t;return{vertexAttributes:this.vertexAttributes,components:null==(t=this.components)?void 0:t.map(r=>r.clone()),transform:(0,M.pC)(this.transform)?this.transform.clone():null}},()=>this._set("external",null),{once:!0,sync:!0}))})}get hasExtent(){return!this.loaded&&(0,M.pC)(this.external)&&(0,M.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const t=this.vertexAttributes.position,r=this.spatialReference;if(0===t.length||this.components&&0===this.components.length)return{extent:new N.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:r}),center:new B.Z({x:0,y:0,z:0,spatialReference:r})};const e=(0,M.pC)(this.transform)?this.transform.project(t,r):t;let o=1/0,s=1/0,h=1/0,g=-1/0,m=-1/0,v=-1/0,y=0,b=0,j=0;const O=e.length,P=1/(O/3);let G=0;for(;G<O;){const xt=e[G++],nt=e[G++],lt=e[G++];o=Math.min(o,xt),s=Math.min(s,nt),h=Math.min(h,lt),g=Math.max(g,xt),m=Math.max(m,nt),v=Math.max(v,lt),y+=P*xt,b+=P*nt,j+=P*lt}return{extent:new N.Z({xmin:o,ymin:s,zmin:h,xmax:g,ymax:m,zmax:v,spatialReference:r}),center:new B.Z({x:y,y:b,z:j,spatialReference:r})}}get anchor(){if((0,M.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);const t=this.boundingInfo;return new B.Z({x:t.center.x,y:t.center.y,z:t.extent.zmin,spatialReference:this.spatialReference})}get origin(){return(0,M.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&(0,M.pC)(this.external)&&(0,M.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(t){this.loaded?(this.components||(this.components=[]),this.components.push(gt.Z.from(t)),this.notifyChange("components")):mt.error("addComponent()","Mesh must be loaded before applying operations")}removeComponent(t){if(this.loaded){if(this.components){const r=this.components.indexOf(t);if(-1!==r)return this.components.splice(r,1),void this.notifyChange("components")}mt.error("removeComponent()","Provided component is not part of the list of components")}else mt.error("removeComponent()","Mesh must be loaded before applying operations")}rotate(t,r,e,o){return(0,X.uT)(Qt.x,t,Wt),(0,X.uT)(Qt.y,r,he),(0,X.uT)(Qt.z,e,fe),(0,X.qC)(Wt,he,Wt),(0,X.qC)(Wt,fe,Wt),function Ze(t,r,e){var s,h;if(!t.vertexAttributes||!t.vertexAttributes.position||0===r[3])return;const o=t.spatialReference;if((0,M.pC)(t.transform)){null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&re.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const g=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function je(t,r,e){const o=(0,at.s)(Ft,e.x,e.y,e.z),s=(0,at.b)(Ft,o,t.origin);t.applyLocalInverse(s,oe),t.rotation=(0,X.qC)(t.rotation,r,(0,X.Ue)()),t.applyLocalInverse(s,s),(0,at.b)(s,s,oe),t.translation=(0,at.a)((0,x.c)(),t.translation,s)}(t.transform,r,g)}else{const g=null!=(h=null==e?void 0:e.origin)?h:t.origin;(0,Et.h)(t.spatialReference,e)?function Fe(t,r,e){const o=t.spatialReference,s=(0,Xt.rS)(o),h=ae;(0,V.KC)(e,h,s)||(0,V.KC)(t.origin,h,s);const g=t.vertexAttributes.position,m=t.vertexAttributes.normal,v=t.vertexAttributes.tangent,y=new Float64Array(g.length),b=(0,M.pC)(m)?new Float32Array(m.length):null,j=(0,M.pC)(v)?new Float32Array(v.length):null;(0,V.Bm)(s,h,zt,s),(0,kt.f)(ie,zt);const O=se;(0,at.t)((0,X.ZZ)(se),(0,X.ZZ)(r),ie),O[3]=r[3],(0,st.XO)(g,o,y),(0,M.pC)(m)&&(0,st.Iz)(m,g,y,o,b),(0,M.pC)(v)&&(0,st.wi)(v,g,y,o,j),jt(y,O,3,h),(0,st.To)(y,g,o),(0,M.pC)(m)&&(jt(b,O,3),(0,st.Yk)(b,g,y,o,m)),(0,M.pC)(v)&&(jt(j,O,4),(0,st.M2)(j,g,y,o,v)),t.vertexAttributesChanged()}(t,r,g):function Se(t,r,e){const o=ae;if(!(0,V.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,re.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}jt(t.vertexAttributes.position,r,3,o),jt(t.vertexAttributes.normal,r,3),jt(t.vertexAttributes.tangent,r,4),t.vertexAttributesChanged()}(t,r,g)}}(this,Wt,o),this}offset(t,r,e,o){return this.loaded?($t[0]=t,$t[1]=r,$t[2]=e,function ye(t,r,e){t.vertexAttributes&&t.vertexAttributes.position&&((0,M.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&ve.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function _e(t,r){const e=t.origin;t.origin=(0,at.a)((0,x.c)(),e,r)}(t.transform,r)):(0,Et.h)(t.spatialReference,e)?function Ce(t,r){const e=t.spatialReference,o=t.vertexAttributes.position,s=t.vertexAttributes.normal,h=t.vertexAttributes.tangent,g=new Float64Array(o.length),m=(0,M.pC)(s)?new Float32Array(s.length):null,v=(0,M.pC)(h)?new Float32Array(h.length):null,y=t.extent.center,b=Me;(0,V.Bm)(e,[y.x,y.y,y.z],ee,(0,Xt.rS)(e)),(0,kt.f)(ne,ee),(0,at.t)(b,r,ne),(0,st.XO)(o,e,g),(0,M.pC)(s)&&(0,st.Iz)(s,o,g,e,m),(0,M.pC)(h)&&(0,st.wi)(h,o,g,e,v),te(g,b),(0,st.To)(g,o,e),(0,M.pC)(s)&&(0,st.Yk)(m,o,g,e,s),(0,M.pC)(h)&&(0,st.M2)(v,o,g,e,h),t.vertexAttributesChanged()}(t,r):function Ee(t,r){te(t.vertexAttributes.position,r),t.vertexAttributesChanged()}(t,r))}(this,$t,o),this):(mt.error("offset()","Mesh must be loaded before applying operations"),this)}scale(t,r){return this.loaded?(function We(t,r,e){var s;if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=t.spatialReference;if((0,M.pC)(t.transform)){null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&le.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const h=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function Be(t,r,e){const o=(0,at.s)(St,e.x,e.y,e.z),s=(0,at.b)(St,o,t.origin);t.applyLocalInverse(s,ue);const h=(0,at.g)((0,x.c)(),t.scale,r);t.scale=h,t.applyLocalInverse(s,s),(0,at.b)(s,s,ue),t.translation=(0,at.a)((0,x.c)(),t.translation,s)}(t.transform,r,h)}else{const h=(0,Et.h)(t.spatialReference,e),g=e&&e.origin||t.origin;h?function Ke(t,r,e){const o=t.spatialReference,s=(0,Xt.rS)(o),h=pe;(0,V.KC)(e,h,s)||(0,V.KC)(t.origin,h,s);const g=t.vertexAttributes.position,m=t.vertexAttributes.normal,v=t.vertexAttributes.tangent,y=new Float64Array(g.length),b=(0,M.pC)(m)?new Float32Array(m.length):null,j=(0,M.pC)(v)?new Float32Array(v.length):null;(0,st.XO)(g,o,y),(0,M.pC)(m)&&(0,st.Iz)(m,g,y,o,b),(0,M.pC)(v)&&(0,st.wi)(v,g,y,o,j),ce(y,r,h),(0,st.To)(y,g,o),(0,M.pC)(m)&&(0,st.Yk)(b,g,y,o,m),(0,M.pC)(v)&&(0,st.M2)(j,g,y,o,v),t.vertexAttributesChanged()}(t,r,g):function Ne(t,r,e){const o=pe;if(!(0,V.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,le.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}ce(t.vertexAttributes.position,r,o),t.vertexAttributesChanged()}(t,r,g)}}(this,t,r),this):(mt.error("scale()","Mesh must be loaded before applying operations"),this)}centerAt(t,r){return this.loaded?(function n(t,r,e){var s;if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=null!=(s=null==e?void 0:e.origin)?s:t.origin;(0,M.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&Tt.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function i(t,r,e){const g=t.origin;t.origin=[g[0]+(r.x-e.x),g[1]+(r.y-e.y),g[2]+(r.hasZ&&e.hasZ?r.z-e.z:0)]}(t.transform,r,o)):(0,Et.h)(t.spatialReference,e)?function a(t,r,e){const o=(0,wt.FF)(t.vertexAttributes,e,{geographic:!0}),{position:s,normal:h,tangent:g}=(0,wt.iv)(o,r,{geographic:!0});t.vertexAttributes.position=s,t.vertexAttributes.normal=h,t.vertexAttributes.tangent=g,t.vertexAttributesChanged()}(t,r,o):function l(t,r,e){const o=d,s=p;if((0,V.KC)(r,s,t.spatialReference)){if(!(0,V.KC)(e,o,t.spatialReference)){const h=t.origin;o[0]=h.x,o[1]=h.y,o[2]=h.z,Tt.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}(function c(t,r,e){if(t)for(let o=0;o<t.length;o+=3)for(let s=0;s<3;s++)t[o+s]+=r[s]-e[s]})(t.vertexAttributes.position,s,o),t.vertexAttributesChanged()}else Tt.error(`Failed to project centerAt location (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid})`)}(t,r,o)}(this,t,r),this):(mt.error("centerAt()","Mesh must be loaded before applying operations"),this)}load(t){return(0,M.pC)(this.external)&&this.addResolvingPromise(function z(t,r,e){return tt.apply(this,arguments)}(this,this.external.source,t)),Promise.resolve(this)}clone(){const t=this.components?new Map:null,r=this.components?new Map:null,e={components:this.components?this.components.map(o=>o.cloneWithDeduplication(t,r)):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,M.pC)(this.transform)?this.transform.clone():null,external:(0,M.pC)(this.external)?{source:this.external.source,extent:(0,M.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Ct(e)}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var r=this;return(0,S.Z)(function*(){const{toBinaryGLTF:e}=yield Promise.all([u.e(8592),u.e(4367)]).then(u.bind(u,54367));return e(r,t)})()}static createBox(t,r){if(!(t instanceof B.Z))return mt.error(".createBox()","expected location to be a Point instance"),null;const e=new Ct(Nt(function Ae(){const{faceDescriptions:t,faceVertexOffsets:r,uvScales:e}=Ie,o=4*t.length,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array(2*t.length*3);let v=0,y=0,b=0,j=0;for(let O=0;O<t.length;O++){const P=t[O],G=v/3;for(const nt of r)m[j++]=G+nt;const xt=P.corners;for(let nt=0;nt<4;nt++){const lt=xt[nt];let Q=0;g[b++]=.25*e[nt][0]+P.uvOrigin[0],g[b++]=P.uvOrigin[1]-.25*e[nt][1];for(let ct=0;ct<3;ct++)0!==P.axis[ct]?(s[v++]=.5*P.axis[ct],h[y++]=P.axis[ct]):(s[v++]=.5*lt[Q++],h[y++]=0)}}return{position:s,normal:h,uv:g,faces:m}}(),t,r));return r&&r.imageFace&&"all"!==r.imageFace?function De(t,r){const e=t.components[0],o=e.faces,s=Le[r],h=6*s,g=new Uint32Array(6),m=new Uint32Array(o.length-6);let v=0,y=0;for(let b=0;b<o.length;b++)b>=h&&b<h+6?g[v++]=o[b]:m[y++]=o[b];if((0,M.pC)(t.vertexAttributes.uv)){const b=new Float32Array(t.vertexAttributes.uv),j=4*s*2,O=[0,1,1,1,1,0,0,0];for(let P=0;P<O.length;P++)b[j+P]=O[P];t.vertexAttributes.uv=b}return t.components=[new gt.Z({faces:g,material:e.material}),new gt.Z({faces:m})],t}(e,r.imageFace):e}static createSphere(t,r){return t instanceof B.Z?new Ct(Nt(function Oe(t=0){const r=Math.round(8*2**t),e=2*r,o=(r-1)*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array((r-1)*e*2*3);let v=0,y=0,b=0,j=0;for(let O=0;O<=r;O++){const P=O/r*Math.PI+.5*Math.PI,G=Math.cos(P),xt=Math.sin(P);et[2]=xt;const nt=0===O||O===r,lt=nt?e-1:e;for(let Q=0;Q<=lt;Q++){const ct=Q/lt*2*Math.PI;et[0]=-Math.sin(ct)*G,et[1]=Math.cos(ct)*G;for(let Ot=0;Ot<3;Ot++)s[v]=.5*et[Ot],h[v]=et[Ot],++v;g[y++]=(Q+(nt?.5:0))/e,g[y++]=O/r,0!==O&&Q!==e&&(O!==r&&(m[b++]=j,m[b++]=j+1,m[b++]=j-e),1!==O&&(m[b++]=j,m[b++]=j-e,m[b++]=j-e-1)),j++}}return{position:s,normal:h,uv:g,faces:m}}(r&&r.densificationFactor||0),t,r)):(mt.error(".createSphere()","expected location to be a Point instance"),null)}static createCylinder(t,r){return t instanceof B.Z?new Ct(Nt(function Pe(t=0){const e=Math.round(16*2**t),o=4*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),g=new Float32Array(2*o),m=new Uint32Array(4*e*3);let v=0,y=0,b=0,j=0,O=0;for(let P=0;P<=5;P++){const G=0===P||5===P,xt=P<=1||P>=4,nt=2===P||4===P,lt=G?e-1:e;for(let Q=0;Q<=lt;Q++){const ct=Q/lt*2*Math.PI,Ot=G?0:.5;et[0]=Ot*Math.sin(ct),et[1]=Ot*-Math.cos(ct),et[2]=P<=2?.5:-.5;for(let Bt=0;Bt<3;Bt++)s[v++]=et[Bt],h[y++]=xt?2===Bt?P<=1?1:-1:0:2===Bt?0:et[Bt]/Ot;g[b++]=(Q+(G?.5:0))/e,g[b++]=P<=1?1*P/3:P<=3?1*(P-2)/3+1/3:1*(P-4)/3+2/3,nt||0===P||Q===e||(5!==P&&(m[j++]=O,m[j++]=O+1,m[j++]=O-e),1!==P&&(m[j++]=O,m[j++]=O-e,m[j++]=O-e-1)),O++}}return{position:s,normal:h,uv:g,faces:m}}(r&&r.densificationFactor||0),t,r)):(mt.error(".createCylinder()","expected location to be a Point instance"),null)}static createPlane(t,r){var s;if(!(t instanceof B.Z))return mt.error(".createPlane()","expected location to be a Point instance"),null;const e=null!=(s=null==r?void 0:r.facing)?s:"up",o=function we(t,r){const e="number"==typeof r?r:null!=r?r.width:1,o="number"==typeof r?r:null!=r?r.height:1;switch(t){case"up":case"down":return{width:e,depth:o};case"north":case"south":return{width:e,height:o};case"east":case"west":return{depth:e,height:o}}}(e,null==r?void 0:r.size);return new Ct(Nt(function Te(t){const r=Kt.facingAxisOrderSwap[t],e=Kt.position,o=Kt.normal,s=new Float64Array(e.length),h=new Float32Array(o.length);let g=0;for(let m=0;m<4;m++){const v=g;for(let y=0;y<3;y++){const b=r[y],j=Math.abs(b)-1,O=b>=0?1:-1;s[g]=e[v+j]*O,h[g]=o[v+j]*O,g++}}return{position:s,normal:h,uv:new Float32Array(Kt.uv),faces:new Uint32Array(Kt.faces),isPlane:!0}}(e),t,Jt(Gt({},r),{size:o})))}static createFromPolygon(t,r){if(!(t instanceof rt.Z))return mt.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;const e=function Z(t){const r=function bt(t,r,e){const o=t.length,s=new Array(o),h=new Array(o),g=new Array(o);let m=0,v=0,y=0,b=0;for(let P=0;P<o;++P)b+=t[P].length;const j=new Float64Array(3*b);let O=0;for(let P=o-1;P>=0;P--){const G=t[P],xt=e===yt.CCW_IS_HOLE&&dt(G);if(xt&&1!==o)s[m++]=G;else{let nt=G.length;for(let Q=0;Q<m;++Q)nt+=s[Q].length;const lt={index:O,pathLengths:new Array(m+1),count:nt,holeIndices:new Array(m)};lt.pathLengths[0]=G.length,G.length>0&&(g[y++]={index:O,count:G.length}),O=xt?ht(G,G.length-1,-1,j,O,G.length,r):ht(G,0,1,j,O,G.length,r);for(let Q=0;Q<m;++Q){const ct=s[Q];lt.holeIndices[Q]=O,lt.pathLengths[Q+1]=ct.length,ct.length>0&&(g[y++]={index:O,count:ct.length}),O=ht(ct,0,1,j,O,ct.length,r)}m=0,lt.count>0&&(h[v++]=lt)}}for(let P=0;P<m;++P){const G=s[P];G.length>0&&(g[y++]={index:O,count:G.length}),O=ht(G,0,1,j,O,G.length,r)}return v<o&&(h.length=v),y<o&&(g.length=y),{position:j,polygons:h,outlines:g}}(t.rings,t.hasZ,yt.CCW_IS_HOLE),e=[];let o=0,s=0;for(const m of r.polygons){const y=m.index,b=new Float64Array(r.position.buffer,3*y*r.position.BYTES_PER_ELEMENT,3*m.count),j=m.holeIndices.map(P=>P-y),O=new Uint32Array((0,Y.e)(b,j,3));e.push({position:b,faces:O}),o+=b.length,s+=O.length}const h=function ot(t,r,e){if(1===t.length)return t[0];const o=new Float64Array(r),s=new Uint32Array(e);let h=0,g=0,m=0;for(const v of t){for(let y=0;y<v.position.length;y++)o[h++]=v.position[y];for(let y=0;y<v.faces.length;y++)s[g++]=v.faces[y]+m;m=h/3}return{position:o,faces:s}}(e,o,s),g=(0,Pt.d)(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(g.buffer),h.faces=g.indices,h}(t);return new Ct({vertexAttributes:new vt.Q({position:e.position}),components:[new gt.Z({faces:e.faces,shading:"flat",material:r&&r.material||null})],spatialReference:t.spatialReference})}static createFromGLTF(t,r,e){return(0,S.Z)(function*(){if(!(t instanceof B.Z))throw mt.error(".createfromGLTF()","expected location to be a Point instance"),new $.Z("invalid-input","Expected location to be a Point instance");const{loadGLTFMesh:o}=yield(0,U.Hl)(Promise.all([u.e(5268),u.e(9185)]).then(u.bind(u,29185)),e);return new Ct(yield o(t,r,e))})()}static createWithExternalSource(t,r,e){var g,m,v;const o=null!=(g=null==e?void 0:e.extent)?g:null,s=null!=(m=null==e?void 0:e.transform.clone())?m:new pt.Z;return s.origin=[t.x,t.y,null!=(v=t.z)?v:0],new Ct({external:{source:r,extent:o},transform:s,spatialReference:t.spatialReference})}static createIncomplete(t,r){var h,g;const e=null!=(h=null==r?void 0:r.transform.clone())?h:new pt.Z;e.origin=[t.x,t.y,null!=(g=t.z)?g:0];const s=new Ct({transform:e,spatialReference:t.spatialReference});return s.addResolvingPromise(Promise.reject(new $.Z("mesh-incomplete","Mesh resources are not complete"))),s}};(0,W._)([(0,F.Cb)({type:[gt.Z],json:{write:!0}})],ft.prototype,"components",void 0),(0,W._)([(0,F.Cb)({type:pt.Z,json:{write:!0}})],ft.prototype,"transform",void 0),(0,W._)([(0,F.Cb)({constructOnly:!0})],ft.prototype,"external",void 0),(0,W._)([(0,F.Cb)({readOnly:!0})],ft.prototype,"hasExtent",null),(0,W._)([(0,F.Cb)({readOnly:!0})],ft.prototype,"boundingInfo",null),(0,W._)([(0,F.Cb)({readOnly:!0})],ft.prototype,"anchor",null),(0,W._)([(0,F.Cb)({readOnly:!0})],ft.prototype,"origin",null),(0,W._)([(0,F.Cb)({readOnly:!0,json:{read:!1}})],ft.prototype,"extent",null),(0,W._)([(0,F.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],ft.prototype,"hasZ",void 0),(0,W._)([(0,F.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],ft.prototype,"hasM",void 0),(0,W._)([(0,F.Cb)({type:vt.Q,nonNullable:!0,json:{write:!0}})],ft.prototype,"vertexAttributes",void 0),ft=Ct=(0,W._)([(0,f.j)("esri.geometry.Mesh")],ft);const Qt={x:(0,x.f)(1,0,0),y:(0,x.f)(0,1,0),z:(0,x.f)(0,0,1)},Wt=(0,X.Ue)(),he=(0,X.Ue)(),fe=(0,X.Ue)(),$t=(0,x.c)(),ge=ft;var Rt,Ht;(function(t){t.featureGUID="featureGUID",t.assetName="assetName",t.hash="hash",t.type="type",t.conversionStatus="conversionStatus",t.flags="flags",t.complexity="complexity",t.size="size",t.seqNo="seqNo",t.sourceHash="sourceHash",t.assetURL="assetURL"})(Rt||(Rt={})),function(t){t.SUBMITTED="SUBMITTED",t.INPROGRESS="INPROGRESS",t.FAILED="FAILED",t.COMPLETED="COMPLETED"}(Ht||(Ht={}));var Dt,ze=u(17253);function $e(t,r,e){const o=e.features;e.features=[],delete e.geometryType;const s=ze.default.fromJSON(e);s.geometryType="mesh";const h=s.spatialReference,g=(0,M.Wi)(t.outFields)||!t.outFields.length?()=>({}):function He(t){return({attributes:r})=>{if(!r)return{};if(!t)return r;for(const e in r)t.has(e)||delete r[e];return r}}(t.outFields.includes("*")?null:new Set(t.outFields));for(const m of o){const v=Ge(m,h,r);(0,M.pC)(v)&&s.features.push(new D.Z({geometry:v,attributes:g(m)}))}return s}function Ge(t,r,e){const{status:o,source:s}=function Ye(t){if(!t.assetMappings)return{status:Dt.FAILED};const r=[],e=new Map;for(const o of t.assetMappings){const s=o[Rt.seqNo],h=o[Rt.assetName],g=o[Rt.assetURL],m=o[Rt.conversionStatus];if(m===Ht.FAILED)return{status:Dt.FAILED};if(m!==Ht.COMPLETED)return{status:Dt.PENDING};if(null==s)r.push({name:h,source:g});else{const v=e.get(h);let y;v?y=v.multipart:(y=[],r.push({name:h,source:{multipart:y}}),e.set(h,{multipart:y})),y[s]=g}}return{status:Dt.COMPLETED,source:r}}(t);if(o===Dt.FAILED)return null;const h=function Je({attributes:t},r,{transformFieldRoles:e}){return new B.Z({x:t[e.originX],y:t[e.originY],z:t[e.originZ],spatialReference:r})}(t,r,e),g=N.Z.fromJSON(t.geometry);g.spatialReference=r;const m=function Ve({attributes:t,assetMappings:r},{transformFieldRoles:e}){var o;return new pt.Z({translation:[t[e.translationX],t[e.translationY],t[e.translationZ]],rotation:(0,X.uT)([t[e.rotationX],t[e.rotationY],t[e.rotationZ]],t[e.rotationDeg]),scale:[t[e.scaleX],t[e.scaleY],t[e.scaleZ]],geographic:!(null==(o=r[Rt.flags])?void 0:o.includes("PROJECT_VERTICES"))})}(t,e);return o===Dt.PENDING?ge.createIncomplete(h,{extent:g,transform:m}):ge.createWithExternalSource(h,s,{extent:g,transform:m})}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(Dt||(Dt={}))}}]);