"use strict";var zt=Object.defineProperty,Ut=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,_t=(v,T,C)=>T in v?zt(v,T,{enumerable:!0,configurable:!0,writable:!0,value:C}):v[T]=C,it=(v,T)=>{for(var C in T||(T={}))Ft.call(T,C)&&_t(v,C,T[C]);if(yt)for(var C of yt(T))Yt.call(T,C)&&_t(v,C,T[C]);return v},ot=(v,T)=>Ut(v,Kt(T));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[8594],{28594:(v,T,C)=>{C.d(T,{Hq:()=>ut,Mk:()=>F,P_:()=>vt,Qp:()=>Wt,VO:()=>H,_D:()=>Ct,kZ:()=>kt,kr:()=>Dt,nF:()=>Q,tB:()=>q,ut:()=>O,vF:()=>jt,zD:()=>wt});var K,t,dt=C(15861),Mt=(C(29132),C(26584)),E=C(62208),j=C(16730),w=C(44956),b=C(55915),Z=C(2004),G=C(49672),Pt=C(37118),Rt=C(65234);function F(t,n,i){return!(0,b.Up)(t,n,i)}function L(t,n,i){const s=F(t,n,i);if(s&&!(0,b.kR)())throw new Mt.Z("rasterprojectionhelper-project","projection engine is not loaded");return s}(t=K||(K={}))[t.None=0]="None",t[t.North=1]="North",t[t.South=2]="South",t[t.Both=3]="Both";const st=(t,n,i,s=0)=>{if(1===i[0])return[0,0];let r=1,e=-1,o=1,u=-1;for(let c=0;c<t.length;c+=2)isNaN(t[c])||(r=r>t[c]?t[c]:r,e=e>t[c]?e:t[c],o=o>t[c+1]?t[c+1]:o,u=u>t[c+1]?u:t[c+1]);const{cols:l,rows:a}=n,h=(e-r)/l/i[0],d=(u-o)/a/i[1],g=2*s;let m=0,f=!1,x=[0,0];for(let c=0;c<l-3;c++){for(let P=0;P<a-3;P++){const y=c*a*2+2*P,_=(t[y+1]+t[y+5]+t[y+4*a+1]+t[y+4*a+5])/4,M=Math.abs(((t[y]+t[y+4]+t[y+4*a]+t[y+4*a+4])/4-t[y+2*a+2])/h),R=Math.abs((_-t[y+2*a+3])/d);if(M+R>m&&(m=M+R,x=[M,R]),g&&m>g){f=!0;break}}if(f)break}return x},Et={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},V=new Map,J=new Map;function wt(){return X.apply(this,arguments)}function X(){return(X=(0,dt.Z)(function*(){if((0,b.kR)())return null;yield(0,b.zD)()})).apply(this,arguments)}function Ct(t,n,i){return L(t.spatialReference,n)?i?(0,b.rS)(n,t.spatialReference,t):(0,b.rS)(t.spatialReference,n,t):null}function H(t,n,i,s=null){const r=t.spatialReference;if(r.equals(n))return t;L(r,n,s);const e=i.center,o=new Z.Z({xmin:e.x-t.x/2,xmax:e.x+t.x/2,ymin:e.y-t.y/2,ymax:e.y+t.y/2,spatialReference:r}),u=(0,b.iV)(o,n,s),l=O(n);let a;if((0,E.Wi)(u)||(0,E.pC)(l)&&u.width>=l){const h=(0,j.c9)(r)/(0,j.c9)(n);a={x:t.x*h,y:t.y*h}}else a={x:u.width,y:u.height};return a}function N(t,n=.01){return(0,j.c9)(t)?n/(0,j.c9)(t):0}function Q(t,n,i=null,s=!0){const r=t.spatialReference;if(r.equals(n))return t;L(r,n,i);const e=(0,b.iV)(t,n,i);if(!s||!e)return e;const o=z(r,!0),u=z(n,!0),l=N(r);return l&&(0,E.pC)(o)&&(0,E.pC)(u)&&(e.x>0&&Math.abs(t.x-o[0])<l?e.x-=u[1]-u[0]:e.x<0&&Math.abs(t.x-o[1])<l&&(e.x+=u[1]-u[0])),e}function rt(t){const{inSR:n,outSR:i,datumTransformation:s}=t,r=D(n),{points:e,mask:o}=$(t,r);if(!n.isGeographic){const l=n.wkid?w.e.coordsys(n.wkid):w.e.fromString(n.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,n.wkt);w.g.projToGeog(l,e.length,e)}if((0,E.pC)(s)&&s.steps.length&&s.steps.forEach(l=>{const a=l.wkid?w.e.geogtran(l.wkid):w.e.fromString(w.f.PE_TYPE_GEOGTRAN,l.wkt);w.h.geogToGeog(a,e.length,e,null,l.isInverse?w.f.PE_TRANSFORM_2_TO_1:w.f.PE_TRANSFORM_1_TO_2)}),!i.isGeographic){const l=D(i,!0),a=(0,E.pC)(l)&&l.isEnvelope?[l.bbox[1],l.bbox[3]]:[-90,90];!function Gt(t,n){const[i,s]=n;for(let r=0;r<t.length;r++){const e=t[r][1];(e<i||e>s)&&(t[r]=[NaN,NaN])}}(e,a);const h=i.wkid?w.e.coordsys(i.wkid):w.e.fromString(i.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,i.wkt);w.g.geogToProj(h,e.length,e)}let u=e;if(o&&e.length!==o.length){u=[];for(let l=0,a=0;l<o.length;l++)u.push(o[l]?e[a++]:[NaN,NaN])}return u}function D(t,n=!1){let i=t.wkid||t.wkt;if(!i||t.isGeographic)return null;if(i=String(i),V.has(i)){const o=V.get(i);return n?null==o?void 0:o.gcs:null==o?void 0:o.pcs}const s=t.wkid?w.e.coordsys(t.wkid):w.e.fromString(t.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,t.wkt),r=at(s,N(t,1e-4)),e=at(s,0,!0);return V.set(i,{pcs:r,gcs:e}),n?e:r}function at(t,n=0,i=!1){const s=w.j.generate(t),r=i?t.horizonGcsGenerate():t.horizonPcsGenerate();if(!(null==r?void 0:r.length))return null;let e=!1,o=r.find(c=>1===c.getInclusive()&&1===c.getKind());if(!o){if(o=r.find(c=>1===c.getInclusive()&&0===c.getKind()),!o)return null;e=!0}const u=i?0:(2===s.getNorthPoleLocation()?1:0)|(2===s.getSouthPoleLocation()?2:0),l=s.isPannableRectangle(),a=o.getCoord();if(e)return{isEnvelope:e,isPannable:l,vertices:a,coef:null,bbox:[a[0][0]-n,a[0][1]-n,a[1][0]+n,a[1][1]+n],poleLocation:u};let h=0;const d=[];let[g,m]=a[0],[f,x]=a[0];for(let c=0,P=a.length;c<P;c++){h++,h===P&&(h=0);const[y,p]=a[c],[_,M]=a[h];if(M===p)d.push([y,_,p,M,2]);else{const R=(_-y)/(M-p||1e-4),W=y-R*p;d.push(p<M?[R,W,p,M,0]:[R,W,M,p,1])}g=g<y?g:y,m=m<p?m:p,f=f>y?f:y,x=x>p?x:p}return{isEnvelope:!1,isPannable:l,vertices:a,coef:d,bbox:[g,m,f,x],poleLocation:u}}function $(t,n){const i=[],{cols:s,rows:r,xres:e,yres:o,usePixelCenter:u}=t;let{xmin:l,ymax:a}=t;if(u&&(l+=e/2,a-=o/2),(0,E.Wi)(n)){for(let m=0;m<s;m++)for(let f=0;f<r;f++)i.push([l+e*m,a-o*f]);return{points:i}}const h=new Uint8Array(s*r);if(n.isEnvelope){const{bbox:[m,f,x,c]}=n;for(let P=0,y=0;P<s;P++){const p=l+e*P,_=n.isPannable||p>=m&&p<=x;for(let M=0;M<r;M++,y++){const R=a-o*M;_&&R>=f&&R<=c&&(i.push([p,R]),h[y]=1)}}return{points:i,mask:h}}const{coef:d}=n,g=[];for(let m=0;m<r;m++){const f=a-o*m,x=[],c=[];for(let y=0;y<d.length;y++){const[p,_,M,R,W]=d[y];f===M&&M===R?(x.push(p),x.push(_),c.push(2),c.push(2)):f>=M&&f<=R&&(x.push(p*f+_),c.push(W))}let P=x;if(x.length>2){let y=2===c[0]?0:c[0],p=x[0];P=[];for(let _=1;_<c.length;_++)2===c[_]&&_!==c.length-1||(c[_]!==y&&(P.push(0===y?Math.min(p,x[_-1]):Math.max(p,x[_-1])),y=c[_],p=x[_]),_===c.length-1&&P.push(0===c[_]?Math.min(p,x[_]):Math.max(p,x[_])));P.sort((_,M)=>_-M)}else x[0]>x[1]&&(P=[x[1],x[0]]);g.push(P)}for(let m=0,f=0;m<s;m++){const x=l+e*m;for(let c=0;c<r;c++,f++){const P=a-o*c,y=g[c];if(2===y.length)x>=y[0]&&x<=y[1]&&(i.push([x,P]),h[f]=1);else if(y.length>2){let p=!1;for(let _=0;_<y.length;_+=2)if(x>=y[_]&&x<=y[_+1]){p=!0;break}p&&(i.push([x,P]),h[f]=1)}}}return{points:i,mask:h}}function lt(t){const n=O(t[0].spatialReference);if(t.length<2||(0,E.Wi)(n))return t[0];let{xmin:i,xmax:s,ymin:r,ymax:e}=t[0];for(let o=1;o<t.length;o++){const u=t[o];s=u.xmax+n*o,r=Math.min(r,u.ymin),e=Math.max(e,u.ymax)}return new Z.Z({xmin:i,xmax:s,ymin:r,ymax:e,spatialReference:t[0].spatialReference})}function q(t,n,i=null,s=!0){const r=t.spatialReference;if(r.equals(n))return t;const e=ut(t),o=O(r,!0),u=O(n);if(0===e||(0,E.Wi)(o)||(0,E.Wi)(u)){const a=ct(t,n,i,s);if((0,E.Wi)(o)&&(0,E.pC)(u)&&Math.abs(a.width-u)<N(n)&&(0,b.kR)()){const h=D(r);if((0,E.pC)(h)&&h.poleLocation===K.None&&t.width<(h.bbox[2]-h.bbox[0])/2)return function Nt(t,n){const i=O(n);if((0,E.Wi)(i))return null;let{xmin:s,ymin:r,xmax:e,ymax:o}=t;const u=t.spatialReference,l=new Pt.Z({spatialReference:u,rings:[[[s,r],[e,r],[e,o],[s,o],[s,r]]]}),a=(0,b.iV)(l,n);if(2!==a.rings.length||!a.rings[0].length||!a.rings[1].length)return null;const{rings:h}=a,d=N(u),g=new Z.Z({spatialReference:n});for(let m=0;m<2;m++){s=e=h[m][0][0],r=o=h[m][0][1];for(let f=0;f<h[m].length;f++)s=s>h[m][f][0]?h[m][f][0]:s,e=e<h[m][f][0]?h[m][f][0]:e,r=r>h[m][f][1]?h[m][f][1]:r,o=o<h[m][f][1]?h[m][f][1]:o;if(0===m)g.ymin=r,g.ymax=o,g.xmin=s,g.xmax=e;else if(g.ymin=Math.min(g.ymin,r),g.ymax=Math.max(g.ymax,o),Math.abs(e-i/2)<d)g.xmin=s,g.xmax=g.xmax+i;else{if(!(Math.abs(s+i/2)<d))return null;g.xmax=e+i}}return g}(t,n)||a}return a}const l=t.clone().normalize();if(1===l.length&&t.xmax<o&&t.xmax-o/2>N(r)){const{xmin:a,xmax:h}=t;for(let d=0;d<=e;d++)l[d]=new Z.Z({xmin:0===d?a:-o/2,xmax:d===e?h-o*d:o/2,ymin:t.ymin,ymax:t.ymax,spatialReference:r})}return lt(l.map(a=>ct(a,n,i,s)).filter(a=>!!a))}function ct(t,n,i=null,s=!0,r=!0){const e=t.spatialReference;if(e.equals(n))return t;L(e,n,i);const o=(0,b.iV)(t,n,i);if(r&&n.isWebMercator&&o&&(o.ymax=Math.min(20037508.342787,o.ymax),o.ymin=Math.max(-20037508.342787,o.ymin),o.ymin>=o.ymax))return null;if(!s||!o)return o;const u=z(e,!0),l=z(n,!0);if((0,E.Wi)(u)||(0,E.Wi)(l))return o;const a=N(e,.001),h=N(e,500),d=N(n,.001);if(Math.abs(o.xmin-l[0])<d&&Math.abs(o.xmax-l[1])<d){const g=Math.abs(t.xmin-u[0]),m=Math.abs(u[1]-t.xmax);if(g<a&&m>h){o.xmin=l[0];const f=[];f.push(new G.Z(t.xmax,t.ymin,e)),f.push(new G.Z(t.xmax,(t.ymin+t.ymax)/2,e)),f.push(new G.Z(t.xmax,t.ymax,e));const x=f.map(c=>Q(c,n,i)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>c.x);o.xmax=Math.max.apply(null,x)}if(m<a&&g>h){o.xmax=l[1];const f=[];f.push(new G.Z(t.xmin,t.ymin,e)),f.push(new G.Z(t.xmin,(t.ymin+t.ymax)/2,e)),f.push(new G.Z(t.xmin,t.ymax,e));const x=f.map(c=>Q(c,n,i)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>c.x);o.xmin=Math.min.apply(null,x)}}else{const g=N(n,.001);Math.abs(o.xmin-l[0])<g&&(o.xmin=l[0]),Math.abs(o.xmax-l[1])<g&&(o.xmax=l[1])}return o}function O(t,n=!1){return t.isWebMercator?2*(n?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*Et[t.wkid]||null}function z(t,n=!1){if(t.isGeographic)return[-180,180];const i=O(t,n);return(0,E.pC)(i)?[-i/2,i/2]:null}function ft(t,n,i,s){let r=(t-n)/i;return r-Math.floor(r)!=0?r=Math.floor(r):s&&(r-=1),r}function ut(t,n=!1){const i=O(t.spatialReference);if((0,E.Wi)(i))return 0;const s=n?0:-i/2,r=N(t.spatialReference),e=!n&&Math.abs(t.xmax-i/2)<r?i/2:t.xmax,o=!n&&Math.abs(t.xmin+i/2)<r?-i/2:t.xmin;return ft(e,s,i,!0)-ft(o,s,i,!1)}function vt(t){const n=t.storageInfo.origin.x,i=O(t.spatialReference,!0);if((0,E.Wi)(i))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const s=i/2,{nativePixelSize:r,storageInfo:e,extent:o}=t,{maximumPyramidLevel:u,blockWidth:l,pyramidScalingFactor:a}=e;let h=r.x;const d=[],g=(0,E.pC)(t.transform)&&"gcs-shift"===t.transform.type,m=n+(g?0:s),f=g?i-n:s-n;for(let x=0;x<=u;x++){const c=(o.xmax-n)/h/l,P=c-Math.floor(c)==0?c:Math.ceil(c),y=f/h/l,p=y-Math.floor(y)==0?y:Math.ceil(y),_=Math.floor(m/h/l),M=Math.round(m/h)%l,R=(l-Math.round(f/h)%l)%l;d.push({resolutionX:h,blockWidth:l,datsetColumnCount:P,worldColumnCountFromOrigin:p,leftMargin:M,rightPadding:R,originColumnOffset:_}),h*=a}return{originX:n,halfWorldWidth:s,pyramidsInfo:d,hasGCSSShiftTransform:g}}function Wt(t){const n=t.isAdaptive&&null==t.spacing;let i=t.spacing||[32,32],s=tt(t),r={cols:s.size[0]+1,rows:s.size[1]+1};const e=s.outofBoundPointCount>0&&s.outofBoundPointCount<s.offsets.length/2;let o=s.outofBoundPointCount===s.offsets.length/2||n&&e?[0,0]:st(s.offsets,r,i,4);const l=t.projectedExtent.spatialReference,a=t.srcBufferExtent.spatialReference;if(n&&(e||(o[0]+o[1])/2>4)&&(F(l,a,t.datumTransformation)&&(l.isGeographic||(0,E.pC)(D(l))),i=[4,4],s=tt(ot(it({},t),{spacing:i})),r={cols:s.size[0]+1,rows:s.size[1]+1},o=st(s.offsets,r,i,4)),s.error=o,i[0]>1&&(s.coefficients=ht(s.offsets,r,e)),t.includeGCSGrid&&!l.isGeographic&&!l.isWebMercator)if(a.isGeographic)s.gcsGrid={offsets:s.offsets,coefficients:s.coefficients,spacing:i};else{const h=D(l);if((0,E.pC)(h)&&!h.isEnvelope){const d=function Ot(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let i;return J.has(n)?i=J.get(n):(i=(t.wkid?w.e.coordsys(t.wkid):w.e.fromString(w.f.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),J.set(n,i)),new Rt.Z({wkid:i})}(l),g=q(t.projectedExtent,d),{offsets:m}=tt(ot(it({},t),{srcBufferExtent:g,spacing:i})),f=ht(m,r,e);s.gcsGrid={offsets:m,coefficients:f,spacing:i}}}return s}function tt(t){const{projectedExtent:n,srcBufferExtent:i,pixelSize:s,datumTransformation:r,rasterTransform:e}=t,o=n.spatialReference,u=i.spatialReference,l=L(o,u),{xmin:a,ymin:h,xmax:d,ymax:g}=n,m=O(u),f=(0,E.pC)(m)&&(t.hasWrapAround||"gcs-shift"===(null==e?void 0:e.type)),x=t.spacing||[32,32],c=x[0]*s.x,P=x[1]*s.y,y=1===x[0],p=Math.ceil((d-a)/c-.1/x[0])+(y?0:1),_=Math.ceil((g-h)/P-.1/x[1])+(y?0:1),M=function St(t){const{inSR:n,outSR:i,datumTransformation:s,preferPE:r}=t;if(n.equals(i)){const{points:e}=$(t,null);return e}if(n.isWebMercator&&i.isWGS84||n.isWGS84&&i.isWebMercator)return function bt(t){const{cols:n,rows:i,xres:s,yres:r,usePixelCenter:e,inSR:o,outSR:u}=t;let{xmin:l,ymax:a}=t;e&&(l+=s/2,a-=r/2);const h=[],d=[],g=Math.max(n,i);for(let f=0;f<g;f++){const x=l+s*Math.min(n,f),c=a-r*Math.min(i,f),P=(0,b.iV)(new G.Z({x,y:c,spatialReference:o}),u);f<=n&&h.push(P.x),f<=i&&d.push(P.y)}const m=[];for(let f=0;f<n;f++)for(let x=0;x<i;x++)m.push([h[f],d[x]]);return m}(t);if(L(n,i,s)&&r){if(n.isGeographic)return rt(t);const e=D(n);if((0,E.pC)(e))return rt(t)}return function Tt(t){const{points:n}=$(t,null),i=n.map(s=>new G.Z(s[0],s[1],t.inSR));return(0,b.iV)(i,t.outSR,t.datumTransformation).map(s=>s?[s.x,s.y]:[NaN,NaN])}(t)}({cols:p,rows:_,xmin:a,ymax:g,xres:c,yres:P,inSR:o,outSR:u,datumTransformation:r,preferPE:x[0]<=4,usePixelCenter:y}),R=[];let W,U=0;const xt=y?-1:NaN,{xmin:mt,xmax:nt,ymax:Lt,width:Bt,height:Zt}=i,At=N(u,500),It=(0,E.pC)(m)&&mt>0&&nt>m/2;let pt=!1;if(l){const k=D(o);pt=(0,E.pC)(k)&&k.poleLocation>0}for(let k=0;k<p;k++){const et=[];for(let B=0;B<_;B++){let S=M[k*_+B];if(f&&S[0]>nt&&S[0]>m/2-At?S[0]-=m:f&&0===k&&S[0]<0&&It&&!e&&(S[0]+=m),!S||isNaN(S[0])||isNaN(S[1]))R.push(xt),R.push(xt),et.push(null),U++;else{if(e){const gt=e.inverseTransform(new G.Z({x:S[0],y:S[1],spatialReference:u}));S=[gt.x,gt.y]}et.push(S),k>0&&f&&W[B]&&S[0]<W[B][0]&&(S[0]+=m,pt&&S[0]>nt&&S[0]>m&&(S[0]-=m)),R.push((S[0]-mt)/Bt),R.push((Lt-S[1])/Zt)}}W=et}return{offsets:R,error:null,coefficients:null,outofBoundPointCount:U,spacing:x,size:y?[p,_]:[p-1,_-1]}}function ht(t,n,i){const{cols:s,rows:r}=n,e=new Float32Array((s-1)*(r-1)*2*6),o=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),u=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<s-1;l++){for(let a=0;a<r-1;a++){let h=l*r*2+2*a;const d=t[h],g=t[h+1],m=t[h+2],f=t[h+3];h+=2*r;const x=t[h],c=t[h+1],P=t[h+2],y=t[h+3];let p=0,_=12*(a*(s-1)+l);for(let M=0;M<3;M++)e[_++]=o[p++]*d+o[p++]*m+o[p++]*P;p=0;for(let M=0;M<3;M++)e[_++]=o[p++]*g+o[p++]*f+o[p++]*y;p=0;for(let M=0;M<3;M++)e[_++]=u[p++]*d+u[p++]*x+u[p++]*P;p=0;for(let M=0;M<3;M++)e[_++]=u[p++]*g+u[p++]*c+u[p++]*y}if(i)for(let a=0;a<e.length;a++)isNaN(e[a])&&(e[a]=-1)}return e}function kt(t){const n=t.clone().normalize();return 1===n.length?n[0]:lt(n)}function Dt(t,n,i){const{storageInfo:s,pixelSize:r}=n;let e,o=!1;const{pyramidResolutions:u}=s;if((0,E.pC)(u)&&u.length){const g=(t.x+t.y)/2,m=u[u.length-1],f=(m.x+m.y)/2,x=(r.x+r.y)/2;if(g<=x)e=0;else if(g>=f)e=u.length,o=g/f>8;else{let P,y=x;for(let p=1;p<=u.length;p++){if(P=(u[p-1].x+u[p-1].y)/2,g<=P){g===P?e=p:"down"===i?(e=p-1,o=g/y>8):e="up"===i||g-y>P-g||g/y>2?p:p-1;break}y=P}}const c=0===e?r:u[e-1];return o&&Math.min(c.x,c.y)*(0,j.c9)(n.spatialReference)>19567&&(o=!1),{pyramidLevel:e,pyramidResolution:new G.Z({x:c.x,y:c.y,spatialReference:n.spatialReference}),excessiveReading:o}}const l=Math.log(t.x/r.x)/Math.LN2,a=Math.log(t.y/r.y)/Math.LN2,h=n.storageInfo.maximumPyramidLevel||0;e="down"===i?Math.floor(Math.min(l,a)):"up"===i?Math.ceil(Math.max(l,a)):Math.round((l+a)/2),e<0?e=0:e>h&&(o=e>h+3,e=h);const d=2**e;return{pyramidLevel:e,pyramidResolution:new G.Z({x:d*n.nativePixelSize.x,y:d*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:o}}function jt(t,n,i=512,s=!0){const{extent:r,spatialReference:e,pixelSize:o}=t,u=H(new G.Z({x:o.x,y:o.y,spatialReference:e}),n,r);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const l=(u.x+u.y)/2,a=(0,j.c9)(n),h=l*a*96*39.37,d=n.isGeographic?256/i*295828763.7958547:256/i*591657527.591555;let g="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const m=q(r,n);g||s&&(n.isGeographic||n.isWebMercator)&&(g=m.xmin*m.xmax<0);let f,x=h;const c=1.001;if(g){x=d;const M=n.isGeographic?1341104507446289e-21:.29858214164761665,R=M*(96*a*39.37);f=H(new G.Z({x:M,y:M,spatialReference:{wkid:n.isGeographic?4326:3857}}),e,m),f.x*=x/R,f.y*=x/R}else{f={x:o.x,y:o.y};const M=Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2);let R=0;for(;x<d*(c/2)&&R<M;)R++,x*=2,f.x*=2,f.y*=2;Math.max(x,d)/Math.min(x,d)<=c&&(x=d)}const P=[x],y=[{x:f.x,y:f.y}],_=Math.min(70.5310735,h)/c;for(;x>=_;)x/=2,f.x/=2,f.y/=2,P.push(x),y.push({x:f.x,y:f.y});return{projectedPixelSize:u,scales:P,srcResolutions:y,isCustomTilingScheme:!g}}}}]);