"use strict";var Ce=Object.defineProperty,Se=Object.defineProperties,We=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Pe=(j,h,a)=>h in j?Ce(j,h,{enumerable:!0,configurable:!0,writable:!0,value:a}):j[h]=a,b=(j,h)=>{for(var a in h||(h={}))ve.call(h,a)&&Pe(j,a,h[a]);if(he)for(var a of he(h))Re.call(h,a)&&Pe(j,a,h[a]);return j},U=(j,h)=>Se(j,We(h));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[9628],{58775:(j,h,a)=>{a.d(h,{O3:()=>te,lG:()=>fe,my:()=>de,q9:()=>y});var O=a(26584),ne=a(66385),D=a(88071),I=a(36630);const X={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function y(e){return X[e]}function*$(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*N(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function Y(e){for(const t of e)if(t.length>2)return!0;return!1}function Z(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],f=e[(n+1)%e.length];t+=i[0]*f[1]-f[0]*i[1]}return t<=0}function J(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function w(e,t,n){switch(t.type){case"LineString":return function H(e,t,n){return v(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function q(e,t,n){for(const i of t.coordinates)v(e,i,n);return e}(e,t,n);case"MultiPoint":return function le(e,t,n){return v(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ue(e,t,n){for(const i of t.coordinates){z(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n)}return e}(e,t,n);case"Point":return function ee(e,t,n){return G(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ce(e,t,n){const i=t.coordinates;z(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n);return e}(e,t,n)}}function z(e,t,n){const i=J(t);!function P(e){return!Z(e)}(i)?v(e,i,n):se(e,i,n)}function re(e,t,n){const i=J(t);!function T(e){return Z(e)}(i)?v(e,i,n):se(e,i,n)}function v(e,t,n){for(const i of t)G(e,i,n);e.lengths.push(t.length)}function se(e,t,n){for(let i=t.length-1;i>=0;i--)G(e,t[i],n);e.lengths.push(t.length)}function G(e,t,n){const[i,f,C]=t;e.coords.push(i,f),n.hasZ&&e.coords.push(C||0)}function pe(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function te(e){if(!e)throw new O.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new O.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new O.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function de(e,t={}){const n=[],i=new Set,f=new Set;let C,S=!1,E=null,R=!1,{geometryType:g=null}=t,r=!1;for(const o of $(e)){const{geometry:l,properties:p,id:d}=o;if((!l||(g||(g=y(l.type)),y(l.type)===g))&&(S||(S=Y(N(l))),R||(R=null!=d,R&&(C=typeof d,E=Object.keys(p).filter(m=>p[m]===d))),R&&null!=d&&(E.length>1?E=E.filter(m=>p[m]===d):1===E.length&&(E=p[E[0]]===d?E:[])),!r&&p)){let m=!0;for(const c in p){if(i.has(c))continue;const F=p[c];if(null==F){m=!1,f.add(c);continue}const B=pe(F);"unknown"!==B?(f.delete(c),i.add(c),n.push({name:c,alias:c,type:B})):f.add(c)}r=m}}const s=E&&1===E.length&&E[0]||null;if(s)for(const o of n)if(o.name===s&&(0,I.H7)(o)){o.type="esriFieldTypeOID";break}return{fields:n,geometryType:g,hasZ:S,objectIdFieldName:s,objectIdFieldType:C,unknownFields:Array.from(f)}}function fe(e,t){return Array.from(function*x(e,t={}){var f;const{geometryType:n,objectIdField:i}=t;for(const C of e){const{geometry:S,properties:E,id:R}=C;if(S&&y(S.type)!==n)continue;const g=E||{};let r=null!=(f=g[i])?f:null;i&&null!=R&&!g[i]&&(g[i]=r=R),yield new ne.u_(S?w(new D.Z,S,t):null,g,null,r)}}($(e),t))}},56554:(j,h,a)=>{a.d(h,{Dm:()=>N,Hq:()=>x,MS:()=>Y,bU:()=>X});var O=a(8314),ne=a(58817),D=a(87757),I=a(24837);function X(P){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===P||"esriGeometryMultipoint"===P?I.I4:"esriGeometryPolyline"===P?I.ET:I.lF}}}const y=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let $=1;function N(P,T){if((0,O.Z)("esri-csp-restrictions"))return()=>b({[T]:null},P);try{let Z=`this.${T} = null;`;for(const w in P)Z+=`this${y.test(w)?`.${w}`:`["${w}"]`} = ${JSON.stringify(P[w])};`;const J=new Function(`\n      return class AttributesClass$${$++} {\n        constructor() {\n          ${Z};\n        }\n      }\n    `)();return()=>new J}catch(Z){return()=>b({[T]:null},P)}}function x(P={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,ne.d9)(P)}}]}function Y(P,T){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:P},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:T,supportsDelete:T,supportsEditing:T,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:T,supportsExceedsLimitStatistics:!0},query:D.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:T,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(j,h,a)=>{a.d(h,{$9:()=>le,G4:()=>re,Lu:()=>q,WW:()=>t,d:()=>de,eS:()=>pe,gp:()=>se,j:()=>ce,w9:()=>ue,yN:()=>fe});var O=a(15861),D=(a(29132),a(84792)),I=a(26584),X=a(63290),y=a(62208),$=a(37053),N=a(46367),x=a(82054),Y=a(95786),P=a(58775),T=a(56554),Z=a(60466),J=a(85),w=a(65234);const H=X.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),q="http://www.opengis.net/def/crs/",le=`${q}OGC/1.3/CRS84`;function ue(r,s){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(r,s,o={},l=5){const{links:p}=r,d=g(p,"items","application/geo+json")||g(p,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(d))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:m}=yield(0,D.default)(d.href,{signal:o.signal,query:U(b({limit:l},o.customParameters),{token:o.apiKey}),headers:{accept:"application/geo+json"}});yield(0,P.O3)(m);const c=(0,P.my)(m,{geometryType:s.geometryType}),F=s.fields||c.fields||[],B=null!=s.hasZ?s.hasZ:c.hasZ,Q=c.geometryType,A=s.objectIdField||c.objectIdFieldName||"OBJECTID";let _=s.timeInfo;const L=F.find(u=>u.name===A);if(L)L.type="esriFieldTypeOID",L.editable=!1,L.nullable=!1;else{if(!c.objectIdFieldType)throw new I.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");F.unshift({name:A,alias:A,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(A!==c.objectIdFieldName){const u=F.find(M=>M.name===c.objectIdFieldName);u&&(u.type="esriFieldTypeInteger")}F===c.fields&&c.unknownFields.length>0&&H.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const u of F){if(null==u.name&&(u.name=u.alias),null==u.alias&&(u.alias=u.name),"esriFieldTypeOID"!==u.type&&"esriFieldTypeGlobalID"!==u.type&&(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable),!u.name)throw new I.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:u});if(!J.v.jsonValues.includes(u.type))throw new I.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${u.name}"`,{field:u})}if(_){const u=new Z.Z(F);if(_.startTimeField){const M=u.get(_.startTimeField);M?(_.startTimeField=M.name,M.type="esriFieldTypeDate"):_.startTimeField=null}if(_.endTimeField){const M=u.get(_.endTimeField);M?(_.endTimeField=M.name,M.type="esriFieldTypeDate"):_.endTimeField=null}if(_.trackIdField){const M=u.get(_.trackIdField);M?_.trackIdField=M.name:(_.trackIdField=null,H.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:_}}))}_.startTimeField||_.endTimeField||(H.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:_}}),_=null)}return{drawingInfo:Q?(0,T.bU)(Q):null,geometryType:Q,fields:F,hasZ:!!B,objectIdField:A,timeInfo:_}})).apply(this,arguments)}function ce(r){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(r,s={}){const{links:o}=r,l=g(o,"data","application/json")||g(o,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:p,customParameters:d,signal:m}=s,{data:c}=yield(0,D.default)(l.href,{signal:m,headers:{accept:"application/json"},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function re(r){return v.apply(this,arguments)}function v(){return(v=(0,O.Z)(function*(r,s={}){const{links:o}=r,l=g(o,"conformance","application/json")||g(o,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:p,customParameters:d,signal:m}=s,{data:c}=yield(0,D.default)(l.href,{signal:m,headers:{accept:"application/json"},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function se(r){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*(r,s={}){const{apiKey:o,customParameters:l,signal:p}=s,{data:d}=yield(0,D.default)(r,{signal:p,headers:{accept:"application/json"},query:U(b({},l),{token:o})});return d})).apply(this,arguments)}function pe(r){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(r,s={}){const o="application/vnd.oai.openapi+json;version=3.0",l=g(r.links,"service-desc",o);if((0,y.Wi)(l))return H.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:p,customParameters:d,signal:m}=s,{data:c}=yield(0,D.default)(l.href,{signal:m,headers:{accept:o},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function de(r){var p;const s=null==(p=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(r))?void 0:p.groups;if(!s)return null;const{authority:o,code:l}=s;switch(o.toLowerCase()){case"ogc":switch(l.toLowerCase()){case"crs27":return w.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return w.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const d=Number.parseInt(l,10);return Number.isNaN(d)?null:d}default:return null}}function fe(r,s,o){return e.apply(this,arguments)}function e(){return(e=(0,O.Z)(function*(r,s,o){const l=yield t(r,s,o);return(0,x.cn)(l)})).apply(this,arguments)}function t(r,s,o){return n.apply(this,arguments)}function n(){return(n=(0,O.Z)(function*(r,s,o){const{capabilities:{query:{maxRecordCount:l}},collection:p,layerDefinition:d,queryParameters:{apiKey:m,customParameters:c},spatialReference:F,supportedCrs:B}=r,{links:Q}=p,A=g(Q,"items","application/geo+json")||g(Q,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(A))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:_,num:L,start:u,timeExtent:M,where:Ee}=s;if(s.objectIds)throw new I.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const Ie=w.Z.fromJSON(F),V=(0,y.Pt)(s.outSpatialReference,Ie),oe=V.isWGS84?null:f(V,B),Me=R(_,B),Oe=S(M),Te=E(Ee),je=null!=L?L:null!=u&&void 0!==u?10:l,{data:K}=yield(0,D.default)(A.href,U(b({},o),{query:U(b(b({},c),Me),{crs:oe,datetime:Oe,query:Te,limit:je,startindex:u,token:m}),headers:{accept:"application/geo+json"}}));let ie=!1;K.links&&(ie=!!K.links.find(ae=>"next"===ae.rel)),!ie&&Number.isInteger(K.numberMatched)&&Number.isInteger(K.numberReturned)&&(ie=K.numberReturned<K.numberMatched);const{fields:we,globalIdField:Fe,hasM:be,hasZ:ye,objectIdField:_e}=d,me=d.geometryType,ge=(0,P.lG)(K,{geometryType:me,hasZ:ye,objectIdField:_e});if(!oe&&V.isWebMercator)for(const k of ge)if((0,y.pC)(k.geometry)){const ae=(0,x.di)(k.geometry,me,ye,!1);ae.spatialReference=w.Z.WGS84,k.geometry=(0,x.GH)((0,N.iV)(ae,V))}for(const k of ge)k.objectId=k.attributes[_e];const De=oe||!oe&&V.isWebMercator?V.toJSON():$.Zn,W=new Y.Z;return W.exceededTransferLimit=ie,W.features=ge,W.fields=we,W.geometryType=me,W.globalIdFieldName=Fe,W.hasM=be,W.hasZ=ye,W.objectIdFieldName=_e,W.spatialReference=De,W})).apply(this,arguments)}function f(r,s){var d,m,c;const{isWebMercator:o,wkid:l}=r;if(!l)return null;const p=o?null!=(c=null!=(m=null!=(d=s[3857])?d:s[102100])?m:s[102113])?c:s[900913]:s[r.wkid];return p?`${q}${p}`:null}function C(r){if((0,y.Wi)(r))return"";const{xmin:s,ymin:o,xmax:l,ymax:p}=r;return`${s},${o},${l},${p}`}function S(r){if((0,y.Wi)(r))return null;const{start:s,end:o}=r;return`${(0,y.pC)(s)?s.toISOString():".."}/${(0,y.pC)(o)?o.toISOString():".."}`}function E(r){return(0,y.Wi)(r)||!r||"1=1"===r?null:r}function R(r,s){if(!function i(r){return(0,y.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:o}=r;if(!o||o.isWGS84)return{bbox:C(r)};const l=f(o,s);return(0,y.pC)(l)?{bbox:C(r),"bbox-crs":l}:o.isWebMercator?{bbox:C((0,N.iV)(r,w.Z.WGS84))}:null}function g(r,s,o){return r.find(l=>l.rel===s&&l.type===o)||r.find(l=>l.rel===s&&!l.type)}}}]);