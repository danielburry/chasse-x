"use strict";(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[4642,5994],{550:(bt,ht,S)=>{function q(){return[1,0,0,0,1,0,0,0,1]}function rt(Y,D){return new Float64Array(Y,D,9)}S.d(ht,{a:()=>rt,c:()=>q}),Object.freeze(Object.defineProperty({__proto__:null,create:q,clone:function ut(Y){return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8]]},fromValues:function X(Y,D,ft,$,ct,k,j,z,P){return[Y,D,ft,$,ct,k,j,z,P]},createView:rt},Symbol.toStringTag,{value:"Module"}))},43703:(bt,ht,S)=>{function q(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ut(D){return[D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15]]}function rt(D,ft){return new Float64Array(D,ft,16)}S.d(ht,{I:()=>J,a:()=>rt,b:()=>ut,c:()=>q});const J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:q,clone:ut,fromValues:function X(D,ft,$,ct,k,j,z,P,Q,tt,it,W,U,x,C,y){return[D,ft,$,ct,k,j,z,P,Q,tt,it,W,U,x,C,y]},createView:rt,IDENTITY:J},Symbol.toStringTag,{value:"Module"}))},78451:(bt,ht,S)=>{function q(){return[0,0,0,1]}function ut(D){return[D[0],D[1],D[2],D[3]]}function rt(D,ft){return new Float64Array(D,ft,4)}S.d(ht,{I:()=>J,a:()=>q,b:()=>ut,c:()=>rt});const J=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:q,clone:ut,fromValues:function X(D,ft,$,ct){return[D,ft,$,ct]},createView:rt,IDENTITY:J},Symbol.toStringTag,{value:"Module"}))},97535:(bt,ht,S)=>{S.d(ht,{x:()=>ut});var q=S(79682);class ut{constructor(J){this.allocator=J,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,q.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const J=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*X);this._items.length=Math.min(J,this._items.length),this._itemsPtr=0}_grow(){for(let J=0;J<Math.max(8,Math.min(this._items.length,X));J++)this._items.push(this.allocator())}}const X=1024},15994:(bt,ht,S)=>{S.d(ht,{N:()=>q});const q={convertToGEGeometry:function ut(z,P){return null==P?null:z.convertJSONToGeometry(P)},exportPoint:function rt(z,P,Q){const tt=new X(z.getPointX(P),z.getPointY(P),Q),it=z.hasZ(P),W=z.hasM(P);return it&&(tt.z=z.getPointZ(P)),W&&(tt.m=z.getPointM(P)),tt},exportPolygon:function Y(z,P,Q){return new J(z.exportPaths(P),Q,z.hasZ(P),z.hasM(P))},exportPolyline:function ft(z,P,Q){return new D(z.exportPaths(P),Q,z.hasZ(P),z.hasM(P))},exportMultipoint:function ct(z,P,Q){return new $(z.exportPoints(P),Q,z.hasZ(P),z.hasM(P))},exportExtent:function j(z,P,Q){const tt=z.hasZ(P),it=z.hasM(P),W=new k(z.getXMin(P),z.getYMin(P),z.getXMax(P),z.getYMax(P),Q);if(tt){const U=z.getZExtent(P);W.zmin=U.vmin,W.zmax=U.vmax}if(it){const U=z.getMExtent(P);W.mmin=U.vmin,W.mmax=U.vmax}return W}};class X{constructor(P,Q,tt){this.x=P,this.y=Q,this.spatialReference=tt,this.z=void 0,this.m=void 0}}class J{constructor(P,Q,tt,it){this.rings=P,this.spatialReference=Q,this.hasZ=void 0,this.hasM=void 0,tt&&(this.hasZ=tt),it&&(this.hasM=it)}}class D{constructor(P,Q,tt,it){this.paths=P,this.spatialReference=Q,this.hasZ=void 0,this.hasM=void 0,tt&&(this.hasZ=tt),it&&(this.hasM=it)}}class ${constructor(P,Q,tt,it){this.points=P,this.spatialReference=Q,this.hasZ=void 0,this.hasM=void 0,tt&&(this.hasZ=tt),it&&(this.hasM=it)}}class k{constructor(P,Q,tt,it,W){this.xmin=P,this.ymin=Q,this.xmax=tt,this.ymax=it,this.spatialReference=W,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},10992:(bt,ht,S)=>{S.d(ht,{Ue:()=>Y,nF:()=>z,zk:()=>ct});var q=S(21286),ut=S(97535),X=S(84161),rt=S(28093),J=S(26242);function Y(y){return y?{origin:(0,rt.a)(y.origin),vector:(0,rt.a)(y.vector)}:{origin:(0,rt.c)(),vector:(0,rt.c)()}}function ct(y,H,Z=Y()){return(0,X.c)(Z.origin,y),(0,X.b)(Z.vector,H,y),Z}function z(y,H,Z){return function Q(y,H,Z,mt,At){const{vector:lt,origin:Nt}=y,gt=(0,X.b)(J.WM.get(),H,Nt),Ft=(0,X.e)(lt,gt)/(0,X.p)(lt);return(0,X.g)(At,lt,(0,q.uZ)(Ft,Z,mt)),(0,X.a)(At,At,y.origin)}(y,H,0,1,Z)}(0,rt.c)(),(0,rt.c)(),new ut.x(()=>({origin:null,vector:null}))},26242:(bt,ht,S)=>{S.d(ht,{MP:()=>Q,WM:()=>j});var q=S(27306),ut=S(79682),X=S(550),rt=S(43703),J=S(78451),Y=S(99770),D=S(28093),ft=S(4794);class ${constructor(W,U,x){this.itemByteSize=W,this.itemCreate=U,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(x/this.itemByteSize)}get(){0===this._itemsPtr&&(0,ut.Y)(()=>this._reset());const W=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=W;){const U=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let x=0;x<this._itemsPerBuffer;++x)this._items.push(this.itemCreate(U,x*this.itemByteSize));this._buffers.push(U)}return this._items[this._itemsPtr++]}_reset(){const W=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>W;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(W=ct){return new $(16,Y.c,W)}static createVec3f64(W=ct){return new $(24,D.b,W)}static createVec4f64(W=ct){return new $(32,ft.a,W)}static createMat3f64(W=ct){return new $(72,X.a,W)}static createMat4f64(W=ct){return new $(128,rt.a,W)}static createQuatf64(W=ct){return new $(32,J.c,W)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const ct=4*q.Y8.KILOBYTES,j=($.createVec2f64(),$.createVec3f64()),Q=($.createVec4f64(),$.createMat3f64(),$.createMat4f64());$.createQuatf64()},82959:(bt,ht,S)=>{S.d(ht,{_W:()=>k,iV:()=>Q,oj:()=>W});var q=S(15861),ut=S(62208),X=S(55915),rt=S(15994),J=S(37053),Y=S(46367);const D=[0,0];function ft(U,x){if(!x)return null;if("x"in x){const C={x:0,y:0};return[C.x,C.y]=U(x.x,x.y,D),null!=x.z&&(C.z=x.z),null!=x.m&&(C.m=x.m),C}if("xmin"in x){const C={xmin:0,ymin:0,xmax:0,ymax:0};return[C.xmin,C.ymin]=U(x.xmin,x.ymin,D),[C.xmax,C.ymax]=U(x.xmax,x.ymax,D),x.hasZ&&(C.zmin=x.zmin,C.zmax=x.zmax,C.hasZ=!0),x.hasM&&(C.mmin=x.mmin,C.mmax=x.mmax,C.hasM=!0),C}return"rings"in x?{rings:$(x.rings,U),hasM:x.hasM,hasZ:x.hasZ}:"paths"in x?{paths:$(x.paths,U),hasM:x.hasM,hasZ:x.hasZ}:"points"in x?{points:ct(x.points,U),hasM:x.hasM,hasZ:x.hasZ}:void 0}function $(U,x){const C=[];for(const y of U)C.push(ct(y,x));return C}function ct(U,x){const C=[];for(const y of U){const H=x(y[0],y[1],[0,0]);C.push(H),y.length>2&&H.push(y[2]),y.length>3&&H.push(y[3])}return C}function k(U,x){return j.apply(this,arguments)}function j(){return(j=(0,q.Z)(function*(U,x){if(!x)return;const C=Array.isArray(U)?U.map(y=>(0,ut.pC)(y.geometry)&&y.geometry.spatialReference):[U];yield(0,X.iQ)(C.map(y=>({source:y,dest:x})))})).apply(this,arguments)}const z=ft.bind(null,Y.hG),P=ft.bind(null,Y.R6);function Q(U,x,C,y){if(!U||(C||(C=x,x=U.spatialReference),!(0,J.JY)(x)||!(0,J.JY)(C)||(0,J.fS)(x,C)))return U;if((0,Y.Q8)(x,C)){const H=(0,J.sS)(C)?z(U):P(U);return H.spatialReference=C,H}return(0,X.oj)(rt.N,[U],x,C,null,y)[0]}const it=new class tt{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}push(x,C,y){var H=this;return(0,q.Z)(function*(){if(!x||!x.length||!C||!y||(0,J.fS)(C,y))return x;const Z={geometries:x,inSpatialReference:C,outSpatialReference:y,resolve:null};return H._jobs.push(Z),new Promise(mt=>{Z.resolve=mt,null===H._timer&&(H._timer=setTimeout(H._process,10))})})()}_process(){this._timer=null;const x=this._jobs.shift();if(!x)return;const{geometries:C,inSpatialReference:y,outSpatialReference:H,resolve:Z}=x;(0,Y.Q8)(y,H)?(0,J.sS)(H)?Z(C.map(z)):Z(C.map(P)):Z((0,X.oj)(rt.N,C,y,H,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function W(U,x,C){return it.push(U,x,C)}},41060:(bt,ht,S)=>{S.r(ht),S.d(ht,{SceneLayerSnappingSourceWorker:()=>re,default:()=>we});var Rt,d,xt,V,yt,oe,q=S(15861),ut=S(17626),X=S(62208),rt=S(10699),ct=(S(63290),S(90912),S(85931),S(8314),S(82255),S(76898)),k=S(84161),j=S(28093),z=S(10992),P=S(2071),Q=S(83308),tt=S(27899),it=S(77029),W=S(97535),C=(S(28347),S(993),S(4794)),y=S(70562);function te(d,l){for(let p=0;p<yt.NUM;p++){const T=d[p];if(T[0]*l[0]+T[1]*l[1]+T[2]*l[2]+T[3]>=l[3])return!1}return!0}S(26242),new W.x(()=>({c0:0,c1:0,ray:null})),S(21286),S(34054),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(d=Rt||(Rt={}))[d.NONE=0]="NONE",d[d.CLAMP=1]="CLAMP",d[d.INFINITE_MIN=4]="INFINITE_MIN",d[d.INFINITE_MAX=8]="INFINITE_MAX",function(d){d[d.LEFT=0]="LEFT",d[d.RIGHT=1]="RIGHT",d[d.BOTTOM=2]="BOTTOM",d[d.TOP=3]="TOP",d[d.NEAR=4]="NEAR",d[d.FAR=5]="FAR"}(xt||(xt={})),function(d){d[d.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",d[d.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",d[d.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",d[d.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",d[d.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",d[d.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",d[d.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",d[d.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(V||(V={})),function(d){d[d.NUM=6]="NUM"}(yt||(yt={})),function(d){d[d.NUM=8]="NUM"}(oe||(oe={})),(0,C.f)(-1,-1,-1,1),(0,C.f)(1,-1,-1,1),(0,C.f)(1,1,-1,1),(0,C.f)(-1,1,-1,1),(0,C.f)(-1,-1,1,1),(0,C.f)(1,-1,1,1),(0,C.f)(1,1,1,1),(0,C.f)(-1,1,1,1),new W.x(function Z(d){return d?{ray:(0,y.Ue)(d.ray),c0:d.c0,c1:d.c1}:{ray:(0,y.Ue)(),c0:0,c1:Number.MAX_VALUE}}),function Le(){(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)(),(0,j.c)()}();var Te=S(2282);class Vt{constructor(l,p){this._objectToBoundingSphere=l,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new et,this._objectCount=0,p&&(void 0!==p.maximumObjectsPerNode&&(this._maximumObjectsPerNode=p.maximumObjectsPerNode),void 0!==p.maximumDepth&&(this._maximumDepth=p.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),et.clearPool(),ce[0]=null,Dt.prune(),Ut.prune()}add(l,p=l.length){this._objectCount+=p,this._grow(l,p);const T=et.acquire();for(let E=0;E<p;E++){const v=l[E];this._isDegenerate(v)?this._degenerateObjects.add(v):(T.init(this._root),this._add(v,T))}et.release(T)}remove(l,p=null){this._objectCount-=l.length;const T=et.acquire();for(const E of l){const v=(0,X.pC)(p)?p:(0,P.b)(this._objectToBoundingSphere(E),Ve);Xt(v[3])?(T.init(this._root),this._remove(E,v,T)):this._degenerateObjects.delete(E)}et.release(T),this._shrink()}update(l,p){if(!Xt(p[3])&&this._isDegenerate(l))return;const T=function Ze(d){return ce[0]=d,ce}(l);this.remove(T,p),this.add(T)}forEachAlongRay(l,p,T){const E=(0,y.re)(l,p);this._forEachNode(this._root,v=>{if(!this._intersectsNode(E,v))return!1;const b=v.node;return b.terminals.forAll(I=>{this._intersectsObject(E,I)&&T(I)}),null!==b.residents&&b.residents.forAll(I=>{this._intersectsObject(E,I)&&T(I)}),!0})}forEachAlongRayWithVerticalOffset(l,p,T,E){const v=(0,y.re)(l,p);this._forEachNode(this._root,b=>{if(!this._intersectsNodeWithOffset(v,b,E))return!1;const I=b.node;return I.terminals.forAll(L=>{this._intersectsObjectWithOffset(v,L,E)&&T(L)}),null!==I.residents&&I.residents.forAll(L=>{this._intersectsObjectWithOffset(v,L,E)&&T(L)}),!0})}forEach(l){this._forEachNode(this._root,p=>{const T=p.node;return T.terminals.forAll(l),null!==T.residents&&T.residents.forAll(l),!0}),this._degenerateObjects.forEach(l)}forEachDegenerateObject(l){this._degenerateObjects.forEach(l)}findClosest(l,p,T,E=(()=>!0),v=1/0){let b=1/0,I=1/0,L=null;const w=se(l,p),K=nt=>{if(--v,!E(nt))return;const at=this._objectToBoundingSphere(nt);if(!te(T,at))return;const dt=It(l,p,(0,P.g)(at)),Tt=dt-at[3];Tt<b&&(b=Tt,I=dt+at[3],L=nt)};return this._forEachNodeDepthOrdered(this._root,nt=>{if(v<=0||!te(T,nt.bounds)||((0,k.g)(Mt,w,nt.halfSize),(0,k.a)(Mt,Mt,nt.bounds),It(l,p,Mt)>I))return!1;const at=nt.node;return at.terminals.forAll(dt=>K(dt)),null!==at.residents&&at.residents.forAll(dt=>K(dt)),!0},l,p),L}forEachInDepthRange(l,p,T,E,v,b,I){let L=-1/0,w=1/0;const K={setRange:_t=>{T===Vt.DepthOrder.FRONT_TO_BACK?(L=Math.max(L,_t.near),w=Math.min(w,_t.far)):(L=Math.max(L,-_t.far),w=Math.min(w,-_t.near))}};K.setRange(E);const nt=It(p,T,l),at=se(p,T),dt=se(p,-T),Tt=_t=>{if(!I(_t))return;const St=this._objectToBoundingSphere(_t),Yt=(0,P.g)(St),be=It(p,T,Yt)-nt;be-St[3]>w||be+St[3]<L||!te(b,St)||v(_t,K)};this._forEachNodeDepthOrdered(this._root,_t=>{if(!te(b,_t.bounds)||((0,k.g)(Mt,at,_t.halfSize),(0,k.a)(Mt,Mt,_t.bounds),It(p,T,Mt)-nt>w)||((0,k.g)(Mt,dt,_t.halfSize),(0,k.a)(Mt,Mt,_t.bounds),It(p,T,Mt)-nt<L))return!1;const St=_t.node;return St.terminals.forAll(Yt=>Tt(Yt)),null!==St.residents&&St.residents.forAll(Yt=>Tt(Yt)),!0},p,T)}forEachNode(l){this._forEachNode(this._root,p=>l(p.node,p.bounds,p.halfSize))}forEachNeighbor(l,p){const T=(0,P.d)(p),E=(0,P.g)(p),v=b=>{const I=this._objectToBoundingSphere(b),L=(0,P.d)(I),w=T+L;(0,k.d)((0,P.g)(I),E)-w*w<=0&&l(b)};this._forEachNode(this._root,b=>{const I=(0,P.d)(b.bounds),L=T+I;if((0,k.d)((0,P.g)(b.bounds),E)-L*L>0)return!1;const w=b.node;return w.terminals.forAll(K=>v(K)),null!==w.residents&&w.residents.forAll(K=>v(K)),!0}),this.forEachDegenerateObject(v)}_intersectsNode(l,p){return ee(p.bounds,2*-p.halfSize,pt),ee(p.bounds,2*p.halfSize,Ot),(0,Te.yK)(l.origin,l.direction,pt,Ot)}_intersectsNodeWithOffset(l,p,T){return ee(p.bounds,2*-p.halfSize,pt),ee(p.bounds,2*p.halfSize,Ot),T.applyToMinMax(pt,Ot),(0,Te.yK)(l.origin,l.direction,pt,Ot)}_intersectsObject(l,p){const T=this._objectToBoundingSphere(p);return!(T[3]>0)||(0,P.i)(T,l)}_intersectsObjectWithOffset(l,p,T){const E=this._objectToBoundingSphere(p);return!(E[3]>0)||(0,P.i)(T.applyToBoundingSphere(E),l)}_forEachNode(l,p){let T=et.acquire().init(l);const E=[T];for(;0!==E.length;){if(T=E.pop(),p(T)&&!T.isLeaf())for(let v=0;v<T.node.children.length;v++)T.node.children[v]&&E.push(et.acquire().init(T).advance(v));et.release(T)}}_forEachNodeDepthOrdered(l,p,T,E=Vt.DepthOrder.FRONT_TO_BACK){let v=et.acquire().init(l);const b=[v];for(function He(d,l,p){if(!Ut.length)for(let T=0;T<8;++T)Ut.push({index:0,distance:0});for(let T=0;T<8;++T){const E=Ee[T];Ut.data[T].index=T,Ut.data[T].distance=It(d,l,E)}Ut.sort((T,E)=>T.distance-E.distance);for(let T=0;T<8;++T)p[T]=Ut.data[T].index}(T,E,Ae);0!==b.length;){if(v=b.pop(),p(v)&&!v.isLeaf())for(let I=7;I>=0;--I){const L=Ae[I];v.node.children[L]&&b.push(et.acquire().init(v).advance(L))}et.release(v)}}_remove(l,p,T){Dt.clear();const E=T.advanceTo(p,(v,b)=>{Dt.push(v.node),Dt.push(b)})?T.node.terminals:T.node.residents;if(E.removeUnordered(l),0===E.length)for(let v=Dt.length-2;v>=0&&this._purge(Dt.data[v],Dt.data[v+1]);v-=2);}_nodeIsEmpty(l){if(0!==l.terminals.length)return!1;if(null!==l.residents)return 0===l.residents.length;for(let p=0;p<l.children.length;p++)if(l.children[p])return!1;return!0}_purge(l,p){return p>=0&&(l.children[p]=null),!!this._nodeIsEmpty(l)&&(null===l.residents&&(l.residents=new it.Z({shrink:!0})),!0)}_add(l,p){p.advanceTo(this._objectToBoundingSphere(l))?p.node.terminals.push(l):(p.node.residents.push(l),p.node.residents.length>this._maximumObjectsPerNode&&p.depth<this._maximumDepth&&this._split(p))}_split(l){const p=l.node.residents;l.node.residents=null;for(let T=0;T<p.length;T++){const E=et.acquire().init(l);this._add(p.getItemAt(T),E),et.release(E)}}_grow(l,p){if(0!==p&&(Me(l,p,T=>this._objectToBoundingSphere(T),vt),Xt(vt[3])&&!this._fitsInsideTree(vt)))if(this._nodeIsEmpty(this._root.node))(0,P.b)(vt,this._root.bounds),this._root.halfSize=1.25*vt[3];else{const T=this._rootBoundsForRootAsSubNode(vt);this._placingRootViolatesMaxDepth(T)?this._rebuildTree(vt,T):this._growRootAsSubNode(T),et.release(T)}}_rebuildTree(l,p){(0,k.c)(ue,p.bounds),ue[3]=p.halfSize,Me([l,ue],2,E=>E,he);const T=et.acquire().init(this._root);this._root.initFrom(null,he,1.25*he[3]),this._forEachNode(T,E=>(this.add(E.node.terminals.data,E.node.terminals.length),null!==E.node.residents&&this.add(E.node.residents.data,E.node.residents.length),!0)),et.release(T)}_placingRootViolatesMaxDepth(l){const p=Math.log(l.halfSize/this._root.halfSize)*Math.LOG2E;let T=0;return this._forEachNode(this._root,E=>(T=Math.max(T,E.depth),T+p<=this._maximumDepth)),T+p>this._maximumDepth}_rootBoundsForRootAsSubNode(l){const p=l[3],T=l;let E=-1/0;const v=this._root.bounds,b=this._root.halfSize;for(let I=0;I<3;I++){const w=T[I]+p-(v[I]+b),K=Math.max(0,Math.ceil((v[I]-b-(T[I]-p))/(2*b))),nt=Math.max(0,Math.ceil(w/(2*b)))+1,at=2**Math.ceil(Math.log(K+nt)*Math.LOG2E);E=Math.max(E,at),ne[I].min=K,ne[I].max=nt}for(let I=0;I<3;I++){let L=ne[I].min,w=ne[I].max;const K=(E-(L+w))/2;L+=Math.ceil(K),w+=Math.floor(K),ae[I]=v[I]-b-L*b*2+(w+L)*b}return ae[3]=E*b*ve,et.acquire().initFrom(null,ae,E*b,0)}_growRootAsSubNode(l){const p=this._root.node;(0,k.c)(vt,this._root.bounds),vt[3]=this._root.halfSize,this._root.init(l),l.advanceTo(vt,null,!0),l.node.children=p.children,l.node.residents=p.residents,l.node.terminals=p.terminals}_shrink(){for(;;){const l=this._findShrinkIndex();if(-1===l)break;this._root.advance(l),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let l=null;const p=this._root.node.children;let T=0,E=0;for(;E<p.length&&null==l;)T=E++,l=p[T];for(;E<p.length;)if(p[E++])return-1;return T}_isDegenerate(l){return!Xt(this._objectToBoundingSphere(l)[3])}_fitsInsideTree(l){const p=this._root.bounds,T=this._root.halfSize;return l[3]<=T&&l[0]>=p[0]-T&&l[0]<=p[0]+T&&l[1]>=p[1]-T&&l[1]<=p[1]+T&&l[2]>=p[2]-T&&l[2]<=p[2]+T}}class et{constructor(){this.bounds=(0,P.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(l){return this.initFrom(l.node,l.bounds,l.halfSize,l.depth)}initFrom(l,p,T,E=this.depth){return this.node=(0,X.pC)(l)?l:et.createEmptyNode(),(0,X.pC)(p)&&(0,P.b)(p,this.bounds),this.halfSize=T,this.depth=E,this}advance(l){let p=this.node.children[l];p||(p=et.createEmptyNode(),this.node.children[l]=p),this.node=p,this.halfSize/=2,this.depth++;const T=Ee[l];return this.bounds[0]+=T[0]*this.halfSize,this.bounds[1]+=T[1]*this.halfSize,this.bounds[2]+=T[2]*this.halfSize,this.bounds[3]=this.halfSize*ve,this}advanceTo(l,p,T=!1){for(;;){if(this.isTerminalFor(l))return p&&p(this,-1),!0;if(this.isLeaf()){if(!T)return p&&p(this,-1),!1;this.node.residents=null}const E=this._childIndex(l);p&&p(this,E),this.advance(E)}}isLeaf(){return null!=this.node.residents}isTerminalFor(l){return l[3]>this.halfSize/2}_childIndex(l){const p=this.bounds;return(p[0]<l[0]?1:0)+(p[1]<l[1]?2:0)+(p[2]<l[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new it.Z({shrink:!0}),residents:new it.Z({shrink:!0})}}static acquire(){return et._pool.acquire()}static release(l){et._pool.release(l)}static clearPool(){et._pool.prune()}}function Ue(d,l){d[0]=Math.min(d[0],l[0]-l[3]),d[1]=Math.min(d[1],l[1]-l[3]),d[2]=Math.min(d[2],l[2]-l[3])}function Ge(d,l){d[0]=Math.max(d[0],l[0]+l[3]),d[1]=Math.max(d[1],l[1]+l[3]),d[2]=Math.max(d[2],l[2]+l[3])}function ee(d,l,p){p[0]=d[0]+l,p[1]=d[1]+l,p[2]=d[2]+l}function Me(d,l,p,T){if(1===l){const E=p(d[0]);(0,P.b)(E,T)}else{pt[0]=1/0,pt[1]=1/0,pt[2]=1/0,Ot[0]=-1/0,Ot[1]=-1/0,Ot[2]=-1/0;for(let E=0;E<l;E++){const v=p(d[E]);Xt(v[3])&&(Ue(pt,v),Ge(Ot,v))}(0,k.h)(T,pt,Ot,.5),T[3]=Math.max(Ot[0]-pt[0],Ot[1]-pt[1],Ot[2]-pt[2])/2}}function se(d,l){let p=1/0,T=null;for(let E=0;E<8;++E){const v=It(d,l,Re[E]);v<p&&(p=v,T=Re[E])}return T}function It(d,l,p){return l*(d[0]*p[0]+d[1]*p[1]+d[2]*p[2])}function Xt(d){return!isNaN(d)&&d!==-1/0&&d!==1/0&&d>0}et._pool=new tt.Z(et),function(d){var l;(l=d.DepthOrder||(d.DepthOrder={}))[l.FRONT_TO_BACK=1]="FRONT_TO_BACK",l[l.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(Vt||(Vt={}));const Ee=[(0,j.f)(-1,-1,-1),(0,j.f)(1,-1,-1),(0,j.f)(-1,1,-1),(0,j.f)(1,1,-1),(0,j.f)(-1,-1,1),(0,j.f)(1,-1,1),(0,j.f)(-1,1,1),(0,j.f)(1,1,1)],Re=[(0,j.f)(-1,-1,-1),(0,j.f)(-1,-1,1),(0,j.f)(-1,1,-1),(0,j.f)(-1,1,1),(0,j.f)(1,-1,-1),(0,j.f)(1,-1,1),(0,j.f)(1,1,-1),(0,j.f)(1,1,1)],ve=Math.sqrt(3),ce=[null],ae=(0,P.c)(),Mt=(0,j.c)(),pt=(0,j.c)(),Ot=(0,j.c)(),Dt=new it.Z,Ve=(0,P.c)(),vt=(0,P.c)(),ue=(0,P.c)(),he=(0,P.c)(),ne=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],Ut=new it.Z,Ae=[0,0,0,0,0,0,0,0],Ne=Vt;var We=S(36239);let re=class{constructor(){this._idToComponent=new Map,this._components=new Ne(d=>d.bounds),this._edges=new Ne(d=>d.bounds),this._tmpLineSegment=(0,z.Ue)(),this._tmpP1=(0,j.c)(),this._tmpP2=(0,j.c)(),this._tmpP3=(0,j.c)(),this.remoteClient=null}fetchCandidates(d,l){var p=this;return(0,q.Z)(function*(){yield Promise.resolve(),(0,rt.k_)(l),yield p._ensureEdgeLocations(d,l);const T=[];return p._edges.forEachNeighbor(E=>p._addCandidates(d,E,T),d.bounds),{result:{candidates:T}}})()}_ensureEdgeLocations(d,l){var p=this;return(0,q.Z)(function*(){const T=[];if(p._components.forEachNeighbor(b=>{if((0,X.Wi)(b.info)){const{id:I,uid:L}=b;T.push({id:I,uid:L})}},d.bounds),!T.length)return;const E={components:T},v=yield p.remoteClient.invoke("fetchAllEdgeLocations",E,(0,X.Pt)(l,{}));for(const b of v.components)p._setFetchEdgeLocations(b)})()}add(d){var l=this;return(0,q.Z)(function*(){const p=new Ke(d.id,d.bounds);return l._idToComponent.set(p.id,p),l._components.add([p]),{result:{}}})()}remove(d){var l=this;return(0,q.Z)(function*(){const p=l._idToComponent.get(d.id);if(p){const T=[];l._edges.forEachNeighbor(E=>{E.component===p&&T.push(E)},p.bounds),l._edges.remove(T),l._components.remove([p]),l._idToComponent.delete(p.id)}return{result:{}}})()}_setFetchEdgeLocations(d){const l=this._idToComponent.get(d.id);if((0,X.Wi)(l)||d.uid!==l.uid)return;const p=We.extractComponentsEdgeLocationsLayout.createView(d.locations),T=new Array(p.count),E=(0,j.c)(),v=(0,j.c)();for(let L=0;L<p.count;L++){const w=(0,P.c)(),K=(0,P.g)(w);p.position0.getVec(L,E),p.position1.getVec(L,v),(0,k.C)(K,K,E,.5),(0,k.C)(K,K,v,.5),(0,k.a)(K,K,d.origin),w[3]=(0,k.i)(K,E);const nt=new Xe(l,L,w);T[L]=nt}this._edges.add(T);const{objectIds:b,origin:I}=d;l.info={locations:p,objectIds:b,origin:I}}_addCandidates(d,l,p){const{locations:T,origin:E,objectIds:v}=l.component.info,b=T.position0.getVec(l.index,this._tmpP1),I=T.position1.getVec(l.index,this._tmpP2);(0,k.a)(b,b,E),(0,k.a)(I,I,E);const L=v[T.componentIndex.get(l.index)];this._addEdgeCandidate(d,L,b,I,p),this._addVertexCandidate(d,L,b,p),this._addVertexCandidate(d,L,I,p)}_addEdgeCandidate(d,l,p,T,E){if(!(d.types&Q.r.EDGE))return;const v=(0,P.g)(d.bounds),b=(0,z.zk)(p,T,this._tmpLineSegment),I=(0,z.nF)(b,v,this._tmpP3);if(!(0,P.m)(d.bounds,I))return null;E.push({type:"edge",objectId:l,target:(0,j.a)(I),distance:(0,k.i)(v,I),start:(0,j.a)(p),end:(0,j.a)(T)})}_addVertexCandidate(d,l,p,T){if(!(d.types&Q.r.VERTEX))return;const E=(0,P.g)(d.bounds);if(!(0,P.m)(d.bounds,p))return null;T.push({type:"vertex",objectId:l,target:(0,j.a)(p),distance:(0,k.i)(E,p)})}};function we(){return new re}re=(0,ut._)([(0,ct.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],re);let Ke=(()=>{class d{constructor(p,T){this.id=p,this.bounds=T,this.info=null,this.uid=++d.uid}}return d.uid=0,d})();class Xe{constructor(l,p,T){this.component=l,this.index=p,this.bounds=T}}}}]);