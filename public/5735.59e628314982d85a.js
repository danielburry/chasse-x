"use strict";(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[5735],{7848:(rn,q,I)=>{I.d(q,{G6:()=>an,Ie:()=>ln,J9:()=>tn,RF:()=>R,U1:()=>en,vY:()=>_,ym:()=>X});var V=I(62208),T=I(91179);const S=(i,a,t)=>[a,t],N=(i,a,t)=>[a,t,i[2]],y=(i,a,t)=>[a,t,i[2],i[3]];function _(i){return i?{originPosition:"upper-left"===i.originPosition?"upperLeft":"lower-left"===i.originPosition?"lowerLeft":i.originPosition,scale:i.tolerance?[i.tolerance,i.tolerance]:[1,1],translate:(0,V.pC)(i.extent)?[i.extent.xmin,i.extent.ymax]:[0,0]}:null}function F({scale:i,translate:a},t){return Math.round((t-a[0])/i[0])}function C({scale:i,translate:a},t){return Math.round((a[1]-t)/i[1])}function k(i,a,t){const e=[];let l,o,r,u;for(let s=0;s<t.length;s++){const c=t[s];s>0?(r=F(i,c[0]),u=C(i,c[1]),r===l&&u===o||(e.push(a(c,r-l,u-o)),l=r,o=u)):(l=F(i,c[0]),o=C(i,c[1]),e.push(a(c,l,o)))}return e.length>0?e:null}function g({scale:i,translate:a},t){return t*i[0]+a[0]}function z({scale:i,translate:a},t){return a[1]-t*i[1]}function w(i,a,t){const e=new Array(t.length);if(!t.length)return e;const[l,o]=i.scale;let r=g(i,t[0][0]),u=z(i,t[0][1]);e[0]=a(t[0],r,u);for(let s=1;s<t.length;s++){const c=t[s];r+=c[0]*l,u-=c[1]*o,e[s]=a(c,r,u)}return e}function G(i,a,t){const e=new Array(t.length);for(let l=0;l<t.length;l++)e[l]=w(i,a,t[l]);return e}function R(i,a,t,e,l){return a.x=F(i,t.x),a.y=C(i,t.y),a!==t&&(e&&(a.z=t.z),l&&(a.m=t.m)),a}function X(i,a){return i&&a?(0,T.wp)(a)?R(i,{},a,!1,!1):(0,T.l9)(a)?function nn(i,a,t,e,l){const o=function B(i,a,t,e){const l=[],o=t?e?y:N:e?N:S;for(let r=0;r<a.length;r++){const u=k(i,o,a[r]);u&&u.length>=2&&l.push(u)}return l.length?l:null}(i,t.paths,e,l);return o?(a.paths=o,a):null}(i,{},a,!1,!1):(0,T.oU)(a)?function $(i,a,t,e,l){const o=function D(i,a,t,e){const l=[],o=t?e?y:N:e?N:S;for(let r=0;r<a.length;r++){const u=k(i,o,a[r]);u&&u.length>=3&&l.push(u)}return l.length?l:null}(i,t.rings,e,l);return o?(a.rings=o,a):null}(i,{},a,!1,!1):(0,T.aW)(a)?function H(i,a,t,e,l){return a.points=function U(i,a,t,e){return k(i,t?e?y:N:e?N:S,a)}(i,t.points,e,l),a}(i,{},a,!1,!1):(0,T.YX)(a)?function Y(i,a,t,e,l){return a.xmin=F(i,t.xmin),a.ymin=C(i,t.ymin),a.xmax=F(i,t.xmax),a.ymax=C(i,t.ymax),a!==t&&(e&&(a.zmin=t.zmin,a.zmax=t.zmax),l&&(a.mmin=t.mmin,a.mmax=t.mmax)),a}(i,{},a,!1,!1):null:null}function tn(i,a,t,e,l){return(0,V.pC)(t)&&(a.points=function Q(i,a,t,e){return w(i,t?e?y:N:e?N:S,a)}(i,t.points,e,l)),a}function en(i,a,t,e,l){return(0,V.Wi)(t)||(a.x=g(i,t.x),a.y=z(i,t.y),a!==t&&(e&&(a.z=t.z),l&&(a.m=t.m))),a}function ln(i,a,t,e,l){return(0,V.pC)(t)&&(a.rings=function Z(i,a,t,e){return G(i,t?e?y:N:e?N:S,a)}(i,t.rings,e,l)),a}function an(i,a,t,e,l){return(0,V.pC)(t)&&(a.paths=function A(i,a,t,e){return G(i,t?e?y:N:e?N:S,a)}(i,t.paths,e,l)),a}},79767:(rn,q,I)=>{I.d(q,{Z:()=>z});var V=I(17626),T=I(2076),M=I(77712),_=(I(85931),I(8314),I(90912),I(76898)),O=I(86810),F=I(79023),C=I(10012);const k=new T.X({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let E=class extends O.wq{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};(0,V._)([(0,M.Cb)({type:C.Z,json:{write:!0}})],E.prototype,"baseSymbol",void 0),(0,V._)([(0,M.Cb)({types:F.V,json:{read:{reader:F.i},write:!0}})],E.prototype,"colorRamp",void 0),(0,V._)([(0,M.Cb)({json:{read:k.read,write:k.write}})],E.prototype,"type",void 0),E=(0,V._)([(0,_.j)("esri.rest.support.ClassificationDefinition")],E);const U=E,D=new T.X({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),B=new T.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let g=class extends U{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(w){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",w)}set definedInterval(w){"defined-interval"===this.classificationMethod&&this._set("definedInterval",w)}};(0,V._)([(0,M.Cb)({json:{write:!0}})],g.prototype,"breakCount",void 0),(0,V._)([(0,M.Cb)({json:{write:!0}})],g.prototype,"classificationField",void 0),(0,V._)([(0,M.Cb)({type:String,json:{read:D.read,write:D.write}})],g.prototype,"classificationMethod",void 0),(0,V._)([(0,M.Cb)({json:{write:!0}})],g.prototype,"normalizationField",void 0),(0,V._)([(0,M.Cb)({json:{read:B.read,write:B.write}})],g.prototype,"normalizationType",void 0),(0,V._)([(0,M.Cb)({value:null,json:{write:!0}})],g.prototype,"standardDeviationInterval",null),(0,V._)([(0,M.Cb)({value:null,json:{write:!0}})],g.prototype,"definedInterval",null),(0,V._)([(0,M.Cb)()],g.prototype,"type",void 0),g=(0,V._)([(0,_.j)("esri.rest.support.ClassBreaksDefinition")],g);const z=g},63930:(rn,q,I)=>{I.d(q,{G2:()=>X,oF:()=>ln,XL:()=>j,i5:()=>L,H0:()=>Z,eT:()=>R,Qm:()=>$,Lq:()=>J,fk:()=>nn,S5:()=>A,F_:()=>H,DL:()=>en});var V=I(79767);function T(t,e){return Number(t.toFixed(e))}function N(t){const e=t.definition,{classificationMethod:l,breakCount:o,normalizationType:r,definedInterval:u}=e,s=[];let c=t.values;if(0===c.length)return[];c=c.sort((f,b)=>f-b);const h=c[0],v=c[c.length-1];if("equal-interval"===l)if(c.length>=o){const f=(v-h)/o;let b=h;for(let d=1;d<o;d++){const m=T(h+d*f,6);s.push({minValue:b,maxValue:m,label:y(b,m,r)}),b=m}s.push({minValue:b,maxValue:v,label:y(b,v,r)})}else c.forEach(f=>{s.push({minValue:f,maxValue:f,label:y(f,f,r)})});else if("natural-breaks"===l){const f=function _(t){const e=[],l=[];let o=Number.MIN_VALUE,r=1,u=-1;for(let s=0;s<t.length;s++){const c=t[s];c===o?(r++,l[u]=r):null!==c&&(e.push(c),o=c,r=1,l.push(r),u++)}return{uniqueValues:e,valueFrequency:l}}(c),d=function O(t,e,l){const o=t.length,r=[];l>o&&(l=o);for(let s=0;s<l;s++)r.push(Math.round(s*o/l-1));r.push(o-1);let u=F(r,t,e,l);return function C(t,e,l,o,r,u){let s=0,c=0,h=0,v=0,f=!0;for(let b=0;b<2&&f;b++){0===b&&(f=!1);for(let d=0;d<u-1;d++)for(;l[d+1]+1!==l[d+2];){l[d+1]=l[d+1]+1;const m=D(d,l,o,r);h=m.sbMean,s=m.sbSdcm;const p=D(d+1,l,o,r);if(v=p.sbMean,c=p.sbSdcm,!(s+c<e[d]+e[d+1])){l[d+1]=l[d+1]-1;break}e[d]=s,e[d+1]=c,t[d]=h,t[d+1]=v,f=!0}for(let d=u-1;d>0;d--)for(;l[d]!==l[d-1]+1;){l[d]=l[d]-1;const m=D(d-1,l,o,r);h=m.sbMean,s=m.sbSdcm;const p=D(d,l,o,r);if(v=p.sbMean,c=p.sbSdcm,!(s+c<e[d-1]+e[d])){l[d]=l[d]+1;break}e[d-1]=s,e[d]=c,t[d-1]=h,t[d]=v,f=!0}}return f}(u.mean,u.sdcm,r,t,e,l)&&(u=F(r,t,e,l)),r}(f.uniqueValues,t.valueFrequency||f.valueFrequency,o);let m=h;for(let p=1;p<o;p++)if(f.uniqueValues.length>p){const x=T(f.uniqueValues[d[p]],6);s.push({minValue:m,maxValue:x,label:y(m,x,r)}),m=x}s.push({minValue:m,maxValue:v,label:y(m,v,r)})}else if("quantile"===l)if(c.length>=o&&h!==v){let f=h,b=Math.ceil(c.length/o),d=0;for(let m=1;m<o;m++){let p=b+d-1;p>c.length&&(p=c.length-1),p<0&&(p=0),s.push({minValue:f,maxValue:c[p],label:y(f,c[p],r)}),f=c[p],d+=b,b=Math.ceil((c.length-d)/(o-m))}s.push({minValue:f,maxValue:v,label:y(f,v,r)})}else{let f=-1;for(let b=0;b<c.length;b++){const d=c[b];d!==f&&(f=d,s.push({minValue:f,maxValue:d,label:y(f,d,r)}),f=d)}}else if("standard-deviation"===l){const f=function E(t){let e=0;for(let l=0;l<t.length;l++)e+=t[l];return e/=t.length,e}(c),b=function U(t,e){let l=0;for(let o=0;o<t.length;o++){const r=t[o];l+=(r-e)*(r-e)}return l/=t.length,Math.sqrt(l)}(c,f);if(0===b)s.push({minValue:c[0],maxValue:c[0],label:y(c[0],c[0],r)});else{const d=function k(t,e,l,o,r){let u=Math.max(o-t,e-o)/r/l;return u=u>=1?1:u>=.5?.5:.25,u}(h,v,o,f,b)*b;let m=0,p=h;for(let P=o;P>=1;P--){const on=T(f-(P-.5)*d,6);s.push({minValue:p,maxValue:on,label:y(p,on,r)}),p=on,m++}let x=T(f+.5*d,6);s.push({minValue:p,maxValue:x,label:y(p,x,r)}),p=x,m++;for(let P=1;P<=o;P++)x=m===2*o?v:T(f+(P+.5)*d,6),s.push({minValue:p,maxValue:x,label:y(p,x,r)}),p=x,m++}}else if("defined-interval"===l){if(!u)return s;const f=c[0],b=c[c.length-1],d=Math.ceil((b-f)/u);let m=f;for(let p=1;p<d;p++){const x=T(f+p*u,6);s.push({minValue:m,maxValue:x,label:y(m,x,r)}),m=x}s.push({minValue:m,maxValue:b,label:y(m,b,r)})}return s}function y(t,e,l){let o=null;return o=t===e?l&&"percent-of-total"===l?t+"%":t.toString():l&&"percent-of-total"===l?t+"% - "+e+"%":t+" - "+e,o}function F(t,e,l,o){let r=[],u=[],s=[],c=0;const h=[],v=[];for(let m=0;m<o;m++){const p=D(m,t,e,l);h.push(p.sbMean),v.push(p.sbSdcm),c+=v[m]}let f,b=c,d=!0;for(;d||c<b;){d=!1,r=[];for(let m=0;m<o;m++)r.push(t[m]);for(let m=0;m<o;m++)for(let p=t[m]+1;p<=t[m+1];p++)if(f=e[p],m>0&&p!==t[m+1]&&Math.abs(f-h[m])>Math.abs(f-h[m-1]))t[m]=p;else if(m<o-1&&t[m]!==p-1&&Math.abs(f-h[m])>Math.abs(f-h[m+1])){t[m+1]=p-1;break}b=c,c=0,u=[],s=[];for(let m=0;m<o;m++){u.push(h[m]),s.push(v[m]);const p=D(m,t,e,l);h[m]=p.sbMean,v[m]=p.sbSdcm,c+=v[m]}}if(c>b){for(let m=0;m<o;m++)t[m]=r[m],h[m]=u[m],v[m]=s[m];c=b}return{mean:h,sdcm:v}}function D(t,e,l,o){let r=0,u=0;for(let h=e[t]+1;h<=e[t+1];h++){const v=o[h];r+=l[h]*v,u+=v}u<=0&&console.log("Exception in Natural Breaks calculation");const s=r/u;let c=0;for(let h=e[t]+1;h<=e[t+1];h++)c+=o[h]*(l[h]-s)**2;return{sbMean:s,sbSdcm:c}}const G=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,W=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Q=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function A(t){return!(null!=t.normalizationField||null!=t.normalizationType||null!=t.minValue||null!=t.maxValue||t.sqlExpression&&t.supportsSQLExpression)}function Z(t){const e=t.returnDistinct?[...new Set(t.values)]:t.values,l=e.filter(r=>null!=r).length,o={count:l};return t.supportsNullCount&&(o.nullcount=e.length-l),t.percentileParams&&(o.median=j(e,t.percentileParams)),o}function L(t){const{values:e,useSampleStdDev:l,supportsNullCount:o}=t;let r=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,s=null,c=null,h=null,v=null,f=0;const b=null==t.minValue?-1/0:t.minValue,d=null==t.maxValue?1/0:t.maxValue;for(const p of e)Number.isFinite(p)?p>=b&&p<=d&&(s+=p,r=Math.min(r,p),u=Math.max(u,p),f++):"string"==typeof p&&f++;if(f&&null!=s){c=s/f;let p=0;for(const x of e)Number.isFinite(x)&&x>=b&&x<=d&&(p+=(x-c)**2);v=l?f>1?p/(f-1):0:f>0?p/f:0,h=Math.sqrt(v)}else r=null,u=null;const m={avg:c,count:f,max:u,min:r,stddev:h,sum:s,variance:v};return o&&(m.nullcount=e.length-f),t.percentileParams&&(m.median=j(e,t.percentileParams)),m}function j(t,e){const{fieldType:l,value:o,orderBy:r,isDiscrete:u}=e,s=J(l,"desc"===r);if(0===(t=[...t].filter(m=>null!=m).sort((m,p)=>s(m,p))).length)return null;if(o<=0)return t[0];if(o>=1)return t[t.length-1];const c=(t.length-1)*o,h=Math.floor(c),v=h+1,f=c%1,b=t[h],d=t[v];return v>=t.length||u||"string"==typeof b||"string"==typeof d?b:b*(1-f)+d*f}function J(t,e){const l=e?1:-1,o=function un(t){return t?(e,l)=>l-e:(e,l)=>e-l}(e),r=K(e);if(!t||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...W].includes(t))return(u,s)=>"number"==typeof u&&"number"==typeof s?o(u,s):"string"==typeof u&&"string"==typeof s?r(u,s):l;if("esriFieldTypeDate"===t)return(u,s)=>{const c=new Date(u).getTime(),h=new Date(s).getTime();return isNaN(c)||isNaN(h)?l:o(c,h)};if(W.has(t))return(u,s)=>o(u,s);if("esriFieldTypeString"===t)return(u,s)=>r(u,s);if("esriFieldTypeGUID"===t||"esriFieldTypeGlobalID"===t){const u=K(e);return(s,c)=>u(Y(s),Y(c))}return e?(u,s)=>1:(u,s)=>-1}function K(t){return t?(e,l)=>(e=null==e?void 0:e.toUpperCase())>(l=null==l?void 0:l.toUpperCase())?-1:e<l?1:0:(e,l)=>(e=null==e?void 0:e.toUpperCase())<(l=null==l?void 0:l.toUpperCase())?-1:e>l?1:0}function Y(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function H(t,e){let l;for(l in t)Q.includes(l)&&(Number.isFinite(t[l])||(t[l]=null));return e&&["avg","stddev","variance"].forEach(o=>{null!=t[o]&&(t[o]=Math.ceil(t[o]))}),t}function R(t){const e={};for(let l of t)(null==l||"string"==typeof l&&""===l.trim())&&(l=null),null==e[l]?e[l]={count:1,data:l}:e[l].count++;return{count:e}}function $(t,e,l){const o=t.count,r=[];l&&e&&"coded-value"===e.type&&e.codedValues.forEach(u=>{const s=u.code;o.hasOwnProperty(s)||(o[s]={data:s,count:0})});for(const u in o){const s=o[u];r.push({value:s.data,count:s.count,label:s.label})}return{uniqueValueInfos:r}}function nn(t,e,l,o){let r=null;switch(e){case"log":0!==t&&(r=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(o)&&0!==o&&(r=t/o*100);break;case"field":Number.isFinite(l)&&0!==l&&(r=t/l);break;case"natural-log":t>0&&(r=Math.log(t));break;case"square-root":t>0&&(r=t**.5)}return r}function X(t,e){const l=function tn(t){const e=t.field,l=t.classificationMethod||"equal-interval",o=t.normalizationType,r=t.normalizationField,u=new V.Z;return u.classificationField=e,u.breakCount=t.breakCount,u.classificationMethod=l,u.standardDeviationInterval="standard-deviation"===l?t.standardDeviationInterval||1:void 0,u.normalizationType=o,u.normalizationField="field"===o?r:void 0,u}({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||5});return t=function sn(t,e,l){return e=null==e?-1/0:e,l=null==l?1/0:l,t.filter(o=>Number.isFinite(o)&&o>=e&&o<=l)}(t,e.minValue,e.maxValue),function S(t){const{normalizationTotal:e}=t;return{classBreaks:N(t),normalizationTotal:e}}({definition:l,values:t,normalizationTotal:e.normalizationTotal})}function en(t,e){let l=t.classBreaks;const r=l[0].minValue,u=l[l.length-1].maxValue,s="standard-deviation"===e,c=G;return l=l.map(h=>{const v=h.label,f={minValue:h.minValue,maxValue:h.maxValue,label:v};if(s&&v){const b=v.match(c).map(d=>+d.trim());2===b.length?(f.minStdDev=b[0],f.maxStdDev=b[1],b[0]<0&&b[1]>0&&(f.hasAvg=!0)):1===b.length&&(v.includes("<")?(f.minStdDev=null,f.maxStdDev=b[0]):v.includes(">")&&(f.minStdDev=b[0],f.maxStdDev=null))}return f}),{minValue:r,maxValue:u,classBreakInfos:l,normalizationTotal:t.normalizationTotal}}function ln(t,e){const{min:l,max:o,intervals:r}=function an(t,e){const{field:l,classificationMethod:o,standardDeviationInterval:r,normalizationType:u,normalizationField:s,normalizationTotal:c,minValue:h,maxValue:v}=e,f=e.numBins||10;let b=null,d=null,m=null;if(o&&"equal-interval"!==o||u){const{classBreaks:p}=X(t,{field:l,normalizationType:u,normalizationField:s,normalizationTotal:c,classificationMethod:o,standardDeviationInterval:r,minValue:h,maxValue:v,numClasses:f});b=p[0].minValue,d=p[p.length-1].maxValue,m=p.map(x=>[x.minValue,x.maxValue])}else{if(null!=h&&null!=v)b=h,d=v;else{const p=L({values:t,minValue:h,maxValue:v,useSampleStdDev:!u,supportsNullCount:A({normalizationType:u,normalizationField:s,minValue:h,maxValue:v})});b=p.min,d=p.max}m=function a(t,e,l){const o=(e-t)/l,r=[];let u,s=t;for(let c=1;c<=l;c++)u=s+o,u=Number(u.toFixed(16)),r.push([s,c===l?e:u]),s=u;return r}(b,d,f)}return{min:b,max:d,intervals:m}}(t,e),u=r.map((s,c)=>({minValue:r[c][0],maxValue:r[c][1],count:0}));for(const s of t)if(null!=s&&s>=l&&s<=o){const c=i(r,s);c>-1&&u[c].count++}return{bins:u,minValue:l,maxValue:o,normalizationTotal:e.normalizationTotal}}function i(t,e){let l=-1;for(let o=t.length-1;o>=0;o--)if(e>=t[o][0]){l=o;break}return l}}}]);