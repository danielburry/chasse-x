"use strict";var ae=Object.defineProperty,oe=Object.defineProperties,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,ie=(F,_,d)=>_ in F?ae(F,_,{enumerable:!0,configurable:!0,writable:!0,value:d}):F[_]=d,re=(F,_)=>{for(var d in _||(_={}))ue.call(_,d)&&ie(F,d,_[d]);if(se)for(var d of se(_))ce.call(_,d)&&ie(F,d,_[d]);return F},ne=(F,_)=>oe(F,le(_));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[3022,3100],{11915:(F,_,d)=>{d.d(_,{e:()=>W});var S,h,K={exports:{}};S=K,void 0!==(h=function(){function U(e,t,r){r=r||2;var n,s,i,l,y,T,R,ee=t&&t.length,X=ee?t[0]*r:e.length,O=P(e,0,X,r,!0),z=[];if(!O||O.next===O.prev)return z;if(ee&&(O=function Y(e,t,r,n){var s,i,l,y=[];for(s=0,i=t.length;s<i;s++)(l=P(e,t[s]*n,s<i-1?t[s+1]*n:e.length,n,!1))===l.next&&(l.steiner=!0),y.push(Q(l));for(y.sort(B),s=0;s<y.length;s++)r=w(r=G(y[s],r),r.next);return r}(e,t,O,r)),e.length>80*r){n=i=e[0],s=l=e[1];for(var E=r;E<X;E+=r)(y=e[E])<n&&(n=y),(T=e[E+1])<s&&(s=T),y>i&&(i=y),T>l&&(l=T);R=0!==(R=Math.max(i-n,l-s))?1/R:0}return L(O,z,r,n,s,R),z}function P(e,t,r,n,s){var i,l;if(s===A(e,t,r,n)>0)for(i=t;i<r;i+=n)l=C(i,e[i],e[i+1],l);else for(i=r-n;i>=t;i-=n)l=C(i,e[i],e[i+1],l);if(l&&o(l,l.next)){var y=l.next;I(l),l=y}return l}function w(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!o(n,n.next)&&0!==f(n.prev,n,n.next))n=n.next;else{var s=n.prev;if(I(n),(n=t=s)===n.next)break;r=!0}}while(r||n!==t);return t}function L(e,t,r,n,s,i,l){if(e){!l&&i&&function Z(e,t,r,n){var s=e;do{null===s.z&&(s.z=te(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function D(e){var t,r,n,s,i,l,y,T,R=1;do{for(r=e,e=null,i=null,l=0;r;){for(l++,n=r,y=0,t=0;t<R&&(y++,n=n.nextZ);t++);for(T=R;y>0||T>0&&n;)0!==y&&(0===T||!n||r.z<=n.z)?(s=r,r=r.nextZ,y--):(s=n,n=n.nextZ,T--),i?i.nextZ=s:e=s,s.prevZ=i,i=s;r=n}i.nextZ=null,R*=2}while(l>1)}(s)}(e,n,s,i);for(var y,T,R=e;e.prev!==e.next;)if(y=e.prev,T=e.next,i?k(e,n,s,i):m(e))t.push(y.i/r),t.push(e.i/r),t.push(T.i/r),I(e),e=T.next,R=T.next;else if((e=T)===R){l?1===l?L(e=j(w(e),t,r),t,r,n,s,i,2):2===l&&$(e,t,r,n,s,i):L(w(e),t,r,n,s,i,1);break}}}function m(e){var t=e.prev,r=e,n=e.next;if(f(t,r,n)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(N(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&f(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function k(e,t,r,n){var s=e.prev,i=e,l=e.next;if(f(s,i,l)>=0)return!1;for(var R=s.x>i.x?s.x>l.x?s.x:l.x:i.x>l.x?i.x:l.x,ee=s.y>i.y?s.y>l.y?s.y:l.y:i.y>l.y?i.y:l.y,X=te(s.x<i.x?s.x<l.x?s.x:l.x:i.x<l.x?i.x:l.x,s.y<i.y?s.y<l.y?s.y:l.y:i.y<l.y?i.y:l.y,t,r,n),O=te(R,ee,t,r,n),z=e.prevZ,E=e.nextZ;z&&z.z>=X&&E&&E.z<=O;){if(z!==e.prev&&z!==e.next&&N(s.x,s.y,i.x,i.y,l.x,l.y,z.x,z.y)&&f(z.prev,z,z.next)>=0||(z=z.prevZ,E!==e.prev&&E!==e.next&&N(s.x,s.y,i.x,i.y,l.x,l.y,E.x,E.y)&&f(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;z&&z.z>=X;){if(z!==e.prev&&z!==e.next&&N(s.x,s.y,i.x,i.y,l.x,l.y,z.x,z.y)&&f(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;E&&E.z<=O;){if(E!==e.prev&&E!==e.next&&N(s.x,s.y,i.x,i.y,l.x,l.y,E.x,E.y)&&f(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function j(e,t,r){var n=e;do{var s=n.prev,i=n.next.next;!o(s,i)&&a(s,n,n.next,i)&&p(s,i)&&p(i,s)&&(t.push(s.i/r),t.push(n.i/r),t.push(i.i/r),I(n),I(n.next),n=e=i),n=n.next}while(n!==e);return w(n)}function $(e,t,r,n,s,i){var l=e;do{for(var y=l.next.next;y!==l.prev;){if(l.i!==y.i&&q(l,y)){var T=x(l,y);return l=w(l,l.next),T=w(T,T.next),L(l,t,r,n,s,i),void L(T,t,r,n,s,i)}y=y.next}l=l.next}while(l!==e)}function B(e,t){return e.x-t.x}function H(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function G(e,t){var r=function J(e,t){var r,n=t,s=e.x,i=e.y,l=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var y=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=s&&y>l){if(l=y,y===s){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(s===l)return r;var T,R=r,ee=r.x,X=r.y,O=1/0;n=r;do{s>=n.x&&n.x>=ee&&s!==n.x&&N(i<X?s:l,i,ee,X,i<X?l:s,i,n.x,n.y)&&(T=Math.abs(i-n.y)/(s-n.x),p(n,e)&&(T<O||T===O&&(n.x>r.x||n.x===r.x&&M(r,n)))&&(r=n,O=T)),n=n.next}while(n!==R);return r}(e,t);if(!r)return t;var n=x(r,e),s=w(r,r.next);let i=H(n);return w(i,i.next),s=H(s),H(t===r?s:t)}function M(e,t){return f(e.prev,e,t.prev)<0&&f(t.next,e,e.next)<0}function te(e,t,r,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Q(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function N(e,t,r,n,s,i,l,y){return(s-l)*(t-y)-(e-l)*(i-y)>=0&&(e-l)*(n-y)-(r-l)*(t-y)>=0&&(r-l)*(i-y)-(s-l)*(n-y)>=0}function q(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function v(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&a(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(p(e,t)&&p(t,e)&&function g(e,t){var r=e,n=!1,s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(f(e.prev,e,t.prev)||f(e,t.prev,t))||o(e,t)&&f(e.prev,e,e.next)>0&&f(t.prev,t,t.next)>0)}function f(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function o(e,t){return e.x===t.x&&e.y===t.y}function a(e,t,r,n){var s=c(f(e,t,r)),i=c(f(e,t,n)),l=c(f(r,n,e)),y=c(f(r,n,t));return s!==i&&l!==y||!(0!==s||!u(e,r,t))||!(0!==i||!u(e,n,t))||!(0!==l||!u(r,e,n))||!(0!==y||!u(r,t,n))}function u(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function c(e){return e>0?1:e<0?-1:0}function p(e,t){return f(e.prev,e,e.next)<0?f(e,t,e.next)>=0&&f(e,e.prev,t)>=0:f(e,t,e.prev)<0||f(e,e.next,t)<0}function x(e,t){var r=new V(e.i,e.x,e.y),n=new V(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function C(e,t,r,n){var s=new V(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function I(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function V(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,r,n){for(var s=0,i=t,l=r-n;i<r;i+=n)s+=(e[l]-e[i])*(e[i+1]+e[l+1]),l=i;return s}return U.deviation=function(e,t,r,n){var s=t&&t.length,l=Math.abs(A(e,0,s?t[0]*r:e.length,r));if(s)for(var y=0,T=t.length;y<T;y++)l-=Math.abs(A(e,t[y]*r,y<T-1?t[y+1]*r:e.length,r));var X=0;for(y=0;y<n.length;y+=3){var O=n[y]*r,z=n[y+1]*r,E=n[y+2]*r;X+=Math.abs((e[O]-e[E])*(e[z+1]-e[O+1])-(e[O]-e[z])*(e[E+1]-e[O+1]))}return 0===l&&0===X?0:Math.abs((X-l)/l)},U.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var i=0;i<e[s].length;i++)for(var l=0;l<t;l++)r.vertices.push(e[s][i][l]);s>0&&r.holes.push(n+=e[s-1].length)}return r},U}())&&(S.exports=h);const W=K.exports},83100:(F,_,d)=>{function S(L){return L=L||globalThis.location.hostname,w.some(m=>null!=(null==L?void 0:L.match(m)))}function b(L,m){return L&&(m=m||globalThis.location.hostname)?null!=m.match(K)||null!=m.match(U)?L.replace("static.arcgis.com","staticdev.arcgis.com"):null!=m.match(W)||null!=m.match(P)?L.replace("static.arcgis.com","staticqa.arcgis.com"):L:L}d.d(_,{XO:()=>S,pJ:()=>b});const K=/^devext.arcgis.com$/,W=/^qaext.arcgis.com$/,U=/^[\w-]*\.mapsdevext.arcgis.com$/,P=/^[\w-]*\.mapsqa.arcgis.com$/,w=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,K,W,/^jsapps.esri.com$/,U,P]},43289:(F,_,d)=>{d.d(_,{Or:()=>$,k3:()=>B,s5:()=>Y,vX:()=>J});const W=128/Math.PI,k=1/Math.LN2;function j(M,Z){return(M%=Z)>=0?M:M+Z}function $(M){return j(M*W,256)}function Y(M){return j(.7111111111111111*M,256)}function B(M){return Math.log(M)*k}function J(M,Z,D){return M>=Z&&M<=D||M>=D&&M<=Z}},61261:(F,_,d)=>{var S,b,m;function h(m){switch(m){case"left":return S.Left;case"right":return S.Right;case"center":return S.Center}}function K(m){switch(m){case"top":return b.Top;case"middle":return b.Center;case"baseline":return b.Baseline;case"bottom":return b.Bottom}}function W(m){switch(m){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[S.Right,b.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[S.Center,b.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[S.Left,b.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[S.Right,b.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[S.Center,b.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[S.Left,b.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[S.Right,b.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[S.Center,b.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[S.Left,b.Top];default:return console.debug(`Found invalid placement type ${m}`),[S.Center,b.Center]}}function U(m){switch(m){case S.Right:return-1;case S.Center:return 0;case S.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${m}`),0}}function P(m){switch(m){case b.Top:return 1;case b.Center:return 0;case b.Bottom:case b.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${m}`),0}}function w(m){switch(m){case"left":return S.Left;case"right":return S.Right;case"center":return S.Center}}function L(m){switch(m){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}d.d(_,{Hd:()=>w,M7:()=>S,NS:()=>L,TR:()=>b,b7:()=>K,g:()=>U,kH:()=>h,qv:()=>W,tf:()=>P}),(m=S||(S={}))[m.Left=-1]="Left",m[m.Center=0]="Center",m[m.Right=1]="Right",function(m){m[m.Top=1]="Top",m[m.Center=0]="Center",m[m.Bottom=-1]="Bottom",m[m.Baseline=2]="Baseline"}(b||(b={}))},18716:(F,_,d)=>{d.d(_,{CA:()=>f,Gq:()=>A,Xp:()=>q,a:()=>I,dk:()=>x,hF:()=>a,jj:()=>o,jy:()=>N,m2:()=>u,mE:()=>C,qr:()=>V});var S=d(26584),b=d(61261),h=d(39406);const te=Object.keys(h.mD).filter(e=>"number"==typeof h.mD[e]).reduce((e,t)=>ne(re({},e),{[t]:h.mD[t]}),{});function N(e){return e===h.mD.OUTLINE_FILL||e===h.mD.OUTLINE_FILL_SIMPLE}function q(e){return function Q(e){return e===h.mD.SIMPLE||e===h.mD.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function f(e){return N(e.symbologyType)}function o(e,t){switch(e){case h.LW.FILL:return x.from(t);case h.LW.LINE:return I.from(t);case h.LW.MARKER:return C.from(t);case h.LW.TEXT:return V.from(t);case h.LW.LABEL:return A.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function a(e){switch(u.load(e).geometryType){case h.LW.MARKER:return new C(e);case h.LW.FILL:return new x(e);case h.LW.LINE:return new I(e);case h.LW.TEXT:return new V(e);case h.LW.LABEL:return new A(e)}}class u{constructor(t){this._data=0,this._data=t}static load(t){const r=this.shared;return r.data=t,r}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(t){this.setBits(t,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(t){this.setBit(20,t)}get sdf(){return!!this.bit(11)}set sdf(t){this.setBit(11,t)}get pattern(){return!!this.bit(12)}set pattern(t){this.setBit(12,t)}get textureBinding(){return this.bits(0,8)}set textureBinding(t){this.setBits(t,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(t){this.setBits(t,21,26)}get geometryTypeString(){switch(this.geometryType){case h.LW.FILL:return"fill";case h.LW.MARKER:return"marker";case h.LW.LINE:return"line";case h.LW.TEXT:return"text";case h.LW.LABEL:return"label";default:throw new S.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,r){const n=1<<t;r?this._data|=n:this._data&=~n}bit(t){return(this._data&1<<t)>>t}setBits(t,r,n){for(let s=r,i=0;s<n;s++,i++)this.setBit(s,0!=(t&1<<i))}bits(t,r){let n=0;for(let s=t,i=0;s<r;s++,i++)n|=this.bit(s)<<i;return n}hasVV(){return!1}setVV(t,r){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:h.mD[this.symbologyType],options:te,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}u.shared=new u(0);const c=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(t){this.setBit(16,t)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(t){this.setBit(17,t)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(t){this.setBit(18,t)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(t){this.setBit(19,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,r){super.setVV(t,r);const n=function K(e,t,r){const n=h.X.SIZE_FIELD_STOPS|h.X.SIZE_MINMAX_VALUE|h.X.SIZE_SCALE_STOPS|h.X.SIZE_UNIT_VALUE,s=(t&(h.mf.FIELD_TARGETS_OUTLINE|h.mf.MINMAX_TARGETS_OUTLINE|h.mf.SCALE_TARGETS_OUTLINE|h.mf.UNIT_TARGETS_OUTLINE))>>>4;return e===h.LW.LINE&&r.isOutline||e===h.LW.FILL&&N(r.symbologyType)?n&s:n&~s}(this.geometryType,t,r)&t;this.vvSizeMinMaxValue=!!(n&h.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(n&h.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(n&h.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(n&h.X.SIZE_SCALE_STOPS)}},v=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(t){this.setBit(15,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,r){super.setVV(t,r),this.vvRotation=!r.isOutline&&!!(t&h.X.ROTATION)}},p=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(t){this.setBit(13,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,r){super.setVV(t,r),this.vvColor=!r.isOutline&&!!(t&h.X.COLOR)}},g=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(t){this.setBit(14,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,r){super.setVV(t,r),this.vvOpacity=!r.isOutline&&!!(t&h.X.OPACITY)}};class x extends(p(g(c(u)))){static load(t){const r=this.shared;return r.data=t,r}static from(t){const{symbologyType:r,vvFlags:n}=t,s=this.load(0);return s.geometryType=h.LW.FILL,s.symbologyType=r,r!==h.mD.DOT_DENSITY&&s.setVV(n,t),s.data}getVariation(){return ne(re({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}x.shared=new x(0);class C extends(p(g(v(c(u))))){static load(t){const r=this.shared;return r.data=t,r}static from(t){const{symbologyType:r,vvFlags:n}=t,s=this.load(0);return s.geometryType=h.LW.MARKER,s.symbologyType=r,r!==h.mD.HEATMAP&&s.setVV(n,t),s.data}getVariation(){return ne(re({},super.getVariation()),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}C.shared=new C(0);class I extends(p(g(c(u)))){static load(t){const r=this.shared;return r.data=t,r}static from(t){const r=this.load(0);return r.geometryType=h.LW.LINE,r.symbologyType=t.symbologyType,r.setVV(t.vvFlags,t),r.data}getVariation(){return ne(re({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}I.shared=new I(0);class V extends(p(g(v(c(u))))){static load(t){const r=this.shared;return r.data=t,r}static from(t){const r=this.load(0);return r.geometryType=h.LW.TEXT,r.symbologyType=t.symbologyType,r.setVV(t.vvFlags,t),r.data}getVariation(){return ne(re({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}V.shared=new V(0);class A extends(c(u)){static load(t){const r=this.shared;return r.data=t,r}static from(t){const r=this.load(0);return r.geometryType=h.LW.LABEL,r.symbologyType=t.symbologyType,r.setVV(t.vvFlags,t),r.mapAligned=(0,b.NS)(t.placement),r.data}getVariation(){return ne(re({},super.getVariation()),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}A.shared=new A(0)},61517:(F,_,d)=>{d.r(_),d.d(_,{default:()=>f});var S=d(15861),b=d(17626),h=d(986),U=(d(26584),d(8314),d(63290)),P=d(62208),w=d(10699),j=(d(90912),d(85931),d(82255),d(76898)),$=d(84682),Y=d(65234),B=d(99666),H=d(55130),G=d(246),J=d(1825),M=d(32940),Z=d(32954),D=d(13112);class te{constructor(a){this._remoteClient=a,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}destroy(){}fetchResource(a,u){var c=this;return(0,S.Z)(function*(){const v=c._resourceMap,p=v.get(a);if(p)return p;let g=c._inFlightResourceMap.get(a);if(g)return g;try{g=c._remoteClient.invoke("tileRenderer.fetchResource",{url:a},re({},u)),c._inFlightResourceMap.set(a,g),g.then(x=>(c._inFlightResourceMap.delete(a),v.set(a,x),x))}catch(x){return(0,w.D_)(x)?null:{width:0,height:0}}return g})()}getResource(a){var u;return null!=(u=this._resourceMap.get(a))?u:null}}function Q(o,a){return(!o.minScale||o.minScale>=a)&&(!o.maxScale||o.maxScale<=a)}function N(o){const a=o.message,u={message:{data:{},tileKey:a.tileKey,tileKeyOrigin:a.tileKeyOrigin,version:a.version},transferList:new Array};for(const c in a.data){const v=a.data[c];if(u.message.data[c]=null,(0,P.pC)(v)){const p=v.stride,g=v.indices.slice(0),x=v.vertices.slice(0),C=v.records.slice(0),I={stride:p,indices:g,vertices:x,records:C,metrics:(0,P.yw)(v.metrics,V=>V.slice(0))};u.transferList.push(g,x,C),u.message.data[c]=I}}return u}U.Z.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");let q=class extends D.Z{constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new te(this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(o){this._bufferIds.forEach(a=>{a.forEach(o)})}update(o,a){var u=this;return(0,S.Z)(function*(){const c=a.schema.processors[0];if("symbol"!==c.type)return;const v=(0,$.Hg)(u._schema,c);(0,$.uD)(v,"mesh")&&(o.mesh=!0,o.why.mesh.push("Symbology changed"),u._schema=c,u._factory=u._createFactory(c),u._factory.update(c,u.tileStore.tileScheme.tileInfo))})()}onTileMessage(o,a,u,c){return(0,w.k_)(c),this._onTileData(o,a,u,c)}onTileClear(o){return this._bufferData.delete(o.key.id),this._bufferIds.delete(o.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:o.id,data:{clear:!0}})}onTileError(o,a,u){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:o.id,error:a},{signal:u.signal})}onTileUpdate(o){for(const a of o.removed)this._bufferData.has(a.key.id)&&this._bufferData.delete(a.key.id),this._bufferIds.has(a.key.id)&&this._bufferIds.delete(a.key.id);for(const a of o.added)this._bufferData.forEach(u=>{for(const c of u)c.message.tileKey===a.id&&this._updateTileMesh("append",a,N(c),[],!1,!1,null)})}_addBufferData(o,a){this._bufferData.has(o)||this._bufferData.set(o,[]),this._bufferData.get(o).push(N(a))}_createFactory(o){const{geometryType:a,objectIdField:u,fields:c}=this.service,p={geometryType:a,fields:c,spatialReference:Y.Z.fromJSON(this.spatialReference)},g=new J.Wr((I,V)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",I,V),this.tileStore.tileScheme.tileInfo),{matcher:x,aggregateMatcher:C}=o.mesh;return this._store=g,this._matchers.feature=(0,M.fL)(x,g,p,this._resourceManagerProxy),this._matchers.aggregate=(0,P.yw)(C,I=>(0,M.fL)(I,g,p,this._resourceManagerProxy)),new G.j(a,u,g)}_onTileData(o,a,u,c){var v=this;return(0,S.Z)(function*(){(0,w.k_)(c);const{type:p,addOrUpdate:g,remove:x,clear:C,end:I}=a,V=!!v._schema.mesh.sortKey;if(!g)return v.remoteClient.invoke("tileRenderer.onTileData",{tileKey:o.id,data:{type:p,addOrUpdate:null,remove:x,clear:C,end:I,sort:V}},c);const A=v._processFeatures(o,g,u,c,a.status.version);try{const e=yield A;if((0,P.Wi)(e))return v.remoteClient.invoke("tileRenderer.onTileData",{tileKey:o.id,data:{type:p,addOrUpdate:null,remove:x,clear:C,end:I,sort:V}},c);const t=[];for(const r of e){let n=!1;const s=r.message.bufferIds,i=o.key.id,l=r.message.tileKey;if(i!==l&&(0,P.pC)(s)){if(!v.tileStore.get(l)){v._addBufferData(i,r),t.push(r);continue}let y=v._bufferIds.get(l);y||(y=new Set,v._bufferIds.set(l,y));const T=Array.from(s);for(const R of T){if(y.has(R)){n=!0;break}y.add(R)}}n||(v._addBufferData(i,r),t.push(r))}yield Promise.all(t.map(r=>{const n=o.key.id===r.message.tileKey;return v._updateTileMesh(p,o,r,n?a.remove:[],n&&a.end,a.clear,c.signal)}))}catch(e){v._handleError(o,e,c)}})()}_updateTileMesh(o,a,u,c,v,p,g){var x=this;return(0,S.Z)(function*(){const C=o,I=u.message.tileKey,V=!!x._schema.mesh.sortKey;I!==a.key.id&&(v=!1);const A=(0,P.yw)(u,n=>n.message),e=(0,P.yw)(u,n=>n.transferList)||[],t={type:C,addOrUpdate:A,remove:c,clear:p,end:v,sort:V},r={transferList:(0,P.Wg)(e)||[],signal:g};return(0,w.k_)(r),x.remoteClient.invoke("tileRenderer.onTileData",{tileKey:I,data:t},r)})()}_processFeatures(o,a,u,c,v){var p=this;return(0,S.Z)(function*(){if((0,P.Wi)(a)||!a.hasFeatures)return null;const g={transform:o.transform,hasZ:!1,hasM:!1},x=p._factory,C={viewingMode:"",scale:o.scale},I=yield p._matchers.feature,V=yield p._matchers.aggregate;(0,w.k_)(c);const A=p._getLabelInfos(o,a);return yield x.analyze(a.getCursor(),p._resourceManagerProxy,I,V,g,C),(0,w.k_)(c),p._writeFeatureSet(o,a,g,A,x,u,v)})()}_writeFeatureSet(o,a,u,c,v,p,g){const x=a.getSize(),C=new H._(o.key.id,{features:x,records:x,metrics:0},this._schema.mesh.matcher.symbologyType,p,!0,g),I={viewingMode:"",scale:o.scale},V=a.getCursor();for(;V.next();)try{const e=V.getDisplayId(),t=(0,P.pC)(c)?c.get(e):null;v.writeCursor(C,V,u,I,o.level,t,this._resourceManagerProxy)}catch(e){}return C.serialize(o.tileInfoView.tileInfo.isWrappable)}_handleError(o,a,u){if(!(0,w.D_)(a))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:o.id,error:a.message},{signal:u.signal})}_getLabelingSchemaForScale(o){const a=this._schema.mesh.labels;if((0,P.Wi)(a))return null;if("subtype"===a.type){const c={type:"subtype",classes:{}};let v=!1;for(const p in a.classes){const g=a.classes[p].filter(x=>Q(x,o.scale));v=v||!!g.length,c.classes[p]=g}return v?c:null}const u=a.classes.filter(c=>Q(c,o.scale));return u.length?{type:"simple",classes:u}:null}_getLabels(o,a){var u;if("subtype"===a.type){const v=(0,P.s3)(this.service.subtypeField,"Expected to find subtype Field"),p=o.readAttribute(v);return null==p?[]:null!=(u=a.classes[p])?u:[]}return a.classes}_getLabelInfos(o,a){const u=this._getLabelingSchemaForScale(o);if((0,P.Wi)(u))return null;const c=new Map,v=a.getCursor();for(;v.next();){const p=v.getDisplayId(),g=[],x=(0,B.nE)(p),C=x&&1!==v.readAttribute("cluster_count")?"aggregate":"feature",I=this._getLabels(v,u);for(const V of I){if(V.target!==C)continue;const e=v.getStorage().getComputedStringAtIndex(x&&"feature"===C?v.readAttribute("referenceId"):p,V.fieldIndex);if(!e)continue;const t=(0,h.E)(e.toString()),n=t[1];this._store.getMosaicItem(V.symbol,(0,Z._)(t[0])).then(s=>{g[V.index]={glyphs:s.glyphMosaicItems,rtl:n,index:V.index}})}c.set(p,g)}return c}};q=(0,b._)([(0,j.j)("esri.views.2d.layers.features.processors.SymbolProcessor")],q);const f=q},11263:(F,_,d)=>{d.d(_,{xS:()=>q,B3:()=>N});var S=d(15861),b=d(84175),h=d(39406),K=d(18716);const W={marker:h.LW.MARKER,fill:h.LW.FILL,line:h.LW.LINE,text:h.LW.TEXT};class U{constructor(o,a,u,c){const v={minScale:null==a?void 0:a.minScale,maxScale:null==a?void 0:a.maxScale},p=function P(f){return f.minScale||f.maxScale?f.minScale+"-"+f.maxScale:""}(v);this.layers=o,this.data=a,this.hash=this._createHash()+p,this.rendererKey=u;const g={isOutline:!1,placement:null,symbologyType:h.mD.DEFAULT,vvFlags:u};for(const x of o){const C=W[x.type];g.isOutline="line"===x.type&&x.isOutline,x.materialKey=(0,K.jj)(C,g),x.maxVVSize=c,x.scaleInfo=v,x.templateHash+=p}}get type(){return"expanded-cim"}_createHash(){let o="";for(const a of this.layers)o+=a.templateHash;return o}}var w=d(83100),L=d(26584),m=d(62208),k=d(10699),j=d(21726),$=d(84687),Y=d(29840),B=d(78241);function H(f,o,a){return G.apply(this,arguments)}function G(){return(G=(0,S.Z)(function*(f,o,a){if(!f.name)throw new L.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");if(f.styleName&&"Esri2DPointSymbolsStyle"===f.styleName)return J(f,a);try{return Z(yield(0,B.n2)(f,o,a),f.name,o,a)}catch(u){return(0,k.k_)(u),null}})).apply(this,arguments)}function J(f,o){return M.apply(this,arguments)}function M(){return(M=(0,S.Z)(function*(f,o){const a=B.wm.replace(/\{SymbolName\}/gi,f.name);try{const u=yield(0,B.EJ)(a,o);return(0,B.KV)(u.data)}catch(u){return(0,k.k_)(u),null}})).apply(this,arguments)}function Z(f,o,a,u){return D.apply(this,arguments)}function D(){return(D=(0,S.Z)(function*(f,o,a,u){const c=f.data,v={portal:a&&(0,m.pC)(a.portal)?a.portal:$.Z.getDefault(),url:(0,j.mN)(f.baseUrl),origin:"portal-item"},p=c.items.find(x=>x.name===o);if(!p)throw new L.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${o}' could not be found`,{symbolName:o});let g=(0,Y.f)((0,B.v9)(p,"cimRef"),v);(0,w.XO)()&&(g=(0,w.pJ)(g));try{const x=yield(0,B.EJ)(g,u);return(0,B.KV)(x.data)}catch(x){return(0,k.k_)(x),null}})).apply(this,arguments)}const Q=function(){var f=(0,S.Z)(function*(o,a,u){return new U(yield(0,b.c)(o.data,a,u),o.data,o.rendererKey,o.maxVVSize)});return function(a,u,c){return f.apply(this,arguments)}}(),N=function(){var f=(0,S.Z)(function*(o,a,u,c){if(!o)return null;if("cim"===o.type)return Q(o,a,u);if("web-style"===o.type){const v={type:"cim",data:yield H(o,null,c),rendererKey:o.rendererKey,maxVVSize:o.maxVVSize};return Q(v,a,u)}return o});return function(a,u,c,v){return f.apply(this,arguments)}}();function q(f){if(!f)return null;const{type:o,cim:a,url:u,materialHash:c}=f,v={cim:a,type:o,mosaicHash:c,url:u,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(o){case"marker":v.size=f.size,v.path=f.path,v.animatedSymbolProperties=f.animatedSymbolProperties;break;case"line":v.dashTemplate=f.dashTemplate;break;case"text":v.text=f.text,v.fontName=f.fontName}return v}}}]);