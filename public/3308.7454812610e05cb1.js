"use strict";var de=Object.defineProperty,fe=Object.defineProperties,he=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,oe=(N,z,m)=>z in N?de(N,z,{enumerable:!0,configurable:!0,writable:!0,value:m}):N[z]=m,te=(N,z)=>{for(var m in z||(z={}))me.call(z,m)&&oe(N,m,z[m]);if(re)for(var m of re(z))ge.call(z,m)&&oe(N,m,z[m]);return N},le=(N,z)=>fe(N,he(z));(self.webpackChunkchasse_pwa_front=self.webpackChunkchasse_pwa_front||[]).push([[3308],{83308:(N,z,m)=>{m.d(z,{y:()=>X,r:()=>S});var A=m(15861),w=m(62208),j=m(27105),Y=m(15176),W=m(7848),O=m(37053),b=m(50736),R=m(63930);class C{constructor(t,e,i){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=i,this.featureAdapter=e;const r=t.outFields;if(r&&!r.includes("*")){this.outFields=r;let s=0;for(const n of r){const o=(0,b.hr)(n),l=this.fieldsIndex.get(o),h=l?null:(0,b.Jc)(o,i),y=l?l.name:(0,b.nu)(n)||"FIELD_EXP_"+s++;this._fieldDataCache.set(n,{alias:y,clause:h})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(e=>this.getAttributes(e)),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,i){const r=i?i.name:e;let s=null;return this._fieldDataCache.has(r)?s=this._fieldDataCache.get(r).clause:i||(s=(0,b.Jc)(e,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:s})),i?this.featureAdapter.getAttribute(t,r):s.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,e){const i=e.normalizationType,r=e.normalizationTotal;let s=this.getFieldValue(t,e.field,e.fieldInfo);if(i&&Number.isFinite(s)){const n=this.getFieldValue(t,e.normalizationField,e.normalizationFieldInfo);s=(0,R.fk)(s,i,n,r)}return s}getExpressionValue(t,e,i,r){const s={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},n=r.createExecContext(s,i);return r.executeFunction(e,n)}getExpressionValues(t,e,i,r){const s={fields:this.fieldsIndex.fields};return t.map(n=>{const o={attributes:this.featureAdapter.getAttributes(n),layer:s},l=r.createExecContext(o,i);return r.executeFunction(e,l)})}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,b.Jc)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testFeature(t,this.featureAdapter)}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,b.Jc)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const i={};for(const r of e){const{alias:s,clause:n}=this._fieldDataCache.get(r);i[s]=n?n.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,s)}return i}_processAttributesForDistinctValues(t){if((0,w.Wi)(t)||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const n of e){const{alias:o}=this._fieldDataCache.get(n);i.push(t[o])}else for(const n in t)i.push(t[n]);const r=`${(e||["*"]).join(",")}=${i.join(",")}`;let s=this._returnDistinctMap.get(r)||0;return this._returnDistinctMap.set(r,++s),s>1?null:t}}var S,E,Q=m(82959),M=m(6185),B=m(36630),J=m(46679);class X{constructor(t,e,i){this.items=t,this.query=e,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.fieldsIndex=i.fieldsIndex,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.featureAdapter=i.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new C(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:e,having:i,outStatistics:r}=this.query;if(!(null==e?void 0:e.length))return 1;const n=new Map,o=new Map,l=new Set;for(const h of r){const{statisticType:y}=h,V="exceedslimit"!==y?h.onStatisticField:void 0;if(!o.has(V)){const T=[];for(const a of e){const u=this._getAttributeValues(t,a,n);T.push(u)}o.set(V,this._calculateUniqueValues(T,t.returnDistinctValues))}const _=o.get(V);for(const T in _){const{data:a,items:u}=_[T],p=a.join(",");i&&!t.validateItems(u,i)||l.add(p)}}return l.size}createQueryResponse(){var t=this;return(0,A.Z)(function*(){let e;return e=t.query.outStatistics?t.query.outStatistics.some(i=>"exceedslimit"===i.statisticType)?t._createExceedsLimitQueryResponse(t.query):yield t._createStatisticsQueryResponse(t.query):t._createFeatureQueryResponse(t.query),t.query.returnQueryGeometry&&(e.queryGeometry=(0,O.JY)(t.query.outSR)&&!(0,O.fS)(t.query.geometry.spatialReference,t.query.outSR)?(0,M.S2)(te({spatialReference:t.query.outSR},(0,Q.iV)(t.query.geometry,t.query.geometry.spatialReference,t.query.outSR))):(0,M.S2)(te({spatialReference:t.query.outSR},t.query.geometry))),e})()}createSnappingResponse(t,e){const i=this.featureAdapter,r=function D(E,t){return E?t?4:3:t?3:2}(this.hasZ,this.hasM),{x:s,y:n}=t.point,o="number"==typeof t.distance?t.distance:t.distance.x,l="number"==typeof t.distance?t.distance:t.distance.y,h={candidates:[]},y="esriGeometryPolygon"===this.geometryType,V=this._getPointCreator(t.point,this.spatialReference,e);for(const _ of this.items){const T=i.getGeometry(_);if((0,w.Wi)(T))continue;const{coords:a,lengths:u}=T;if(t.types&S.EDGE){let p=0;for(let g=0;g<u.length;g++){const x=u[g];for(let v=0;v<x;v++,p+=r){const I=a[p],f=a[p+1];if(v!==x-1){const F=a[p+r],P=a[p+r+1],{x:Z,y:G}=q(s,n,I,f,F,P),k=(s-Z)/o,U=(n-G)/l,L=k*k+U*U;L<=1&&h.candidates.push({type:"edge",objectId:i.getObjectId(_),distance:Math.sqrt(L),target:V(Z,G),start:V(I,f),end:V(F,P)})}}}}if(t.types&S.VERTEX){const p=y?a.length-r:a.length;for(let g=0;g<p;g+=r){const x=a[g],v=a[g+1],I=(s-x)/o,f=(n-v)/l,F=I*I+f*f;F<=1&&h.candidates.push({type:"vertex",objectId:i.getObjectId(_),distance:Math.sqrt(F),target:V(x,v)})}}}return h.candidates.sort((_,T)=>_.distance-T.distance),h}_getPointCreator(t,e,i){const r=(0,w.pC)(i)&&!(0,O.fS)(e,i)?s=>(0,Q.iV)(s,e,i):s=>s;return null!=t.z&&null!=t.m?(s,n)=>r({x:s,y:n,z:t.z,m:t.m}):null!=t.z?(s,n)=>r({x:s,y:n,z:t.z}):null!=t.m?(s,n)=>r({x:s,y:n,m:t.m}):(s,n)=>r({x:s,y:n})}createSummaryStatisticsResponse(t){var e=this;return(0,A.Z)(function*(){const{field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,minValue:l,maxValue:h,scale:y}=t,V=e.fieldsIndex.isDateField(i),_=yield e._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,scale:y}),T=(0,R.S5)({normalizationType:n,normalizationField:s,minValue:l,maxValue:h}),a=e.fieldsIndex.get(i),u={value:.5,fieldType:null==a?void 0:a.type},p=(0,B.qN)(a)?(0,R.H0)({values:_,supportsNullCount:T,percentileParams:u}):(0,R.i5)({values:_,minValue:l,maxValue:h,useSampleStdDev:!n,supportsNullCount:T,percentileParams:u});return(0,R.F_)(p,V)})()}createUniqueValuesResponse(t){var e=this;return(0,A.Z)(function*(){const{field:i,valueExpression:r,domain:s,returnAllCodedValues:n,scale:o}=t,l=yield e._getDataValues({field:i,valueExpression:r,scale:o}),h=(0,R.eT)(l);return(0,R.Qm)(h,s,n)})()}createClassBreaksResponse(t){var e=this;return(0,A.Z)(function*(){const{field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:h,minValue:y,maxValue:V,numClasses:_,scale:T}=t,a=yield e._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,scale:T}),u=(0,R.G2)(a,{field:i,normalizationField:s,normalizationType:n,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:h,minValue:y,maxValue:V,numClasses:_});return(0,R.DL)(u,l)})()}createHistogramResponse(t){var e=this;return(0,A.Z)(function*(){const{field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:h,minValue:y,maxValue:V,numBins:_,scale:T}=t,a=yield e._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:n,normalizationTotal:o,scale:T});return(0,R.oF)(a,{field:i,normalizationField:s,normalizationType:n,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:h,minValue:y,maxValue:V,numBins:_})})()}_sortFeatures(t,e,i){if(t.length>1&&e&&e.length)for(const r of e.reverse()){const s=r.split(" "),n=s[0],o=this.fieldsIndex.get(n),l=s[1]&&"desc"===s[1].toLowerCase(),h=(0,R.Lq)(null==o?void 0:o.type,l);t.sort((y,V)=>{const _=i(y,n,o),T=i(V,n,o);return h(_,T)})}}_createFeatureQueryResponse(t){const e=this.items,{geometryType:i,hasM:r,hasZ:s,objectIdField:n,spatialReference:o}=this,{outFields:l,outSR:h,quantizationParameters:y,resultRecordCount:V,resultOffset:_,returnZ:T,returnM:a}=t,u=null!=V&&e.length>(_||0)+V,p=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map(g=>this.fieldsIndex.get(g)));return{exceededTransferLimit:u,features:this._createFeatures(t,e),fields:p,geometryType:i,hasM:r&&a,hasZ:s&&T,objectIdFieldName:n,spatialReference:(0,M.S2)(h||o),transform:y&&(0,W.vY)(y)||null}}_createFeatures(t,e){const i=new C(t,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:s}=this,{orderByFields:n,quantizationParameters:o,returnGeometry:l,returnCentroid:h,maxAllowableOffset:y,resultOffset:V,resultRecordCount:_,returnZ:T=!1,returnM:a=!1}=t,u=s&&T,p=r&&a;let g=[],x=0;const v=[...e];if(this._sortFeatures(v,n,(f,F,P)=>i.getFieldValue(f,F,P)),l||h){const f=(0,W.vY)(o);if(l&&!h)for(const F of v)g[x++]={attributes:i.getAttributes(F),geometry:(0,M.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(F),y,f,u,p)};else if(!l&&h)for(const F of v)g[x++]={attributes:i.getAttributes(F),centroid:(0,M.EG)(this,this.featureAdapter.getCentroid(F,this),f)};else for(const F of v)g[x++]={attributes:i.getAttributes(F),centroid:(0,M.EG)(this,this.featureAdapter.getCentroid(F,this),f),geometry:(0,M.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(F),y,f,u,p)}}else for(const f of v){const F=i.getAttributes(f);F&&(g[x++]={attributes:F})}const I=V||0;return null!=_&&(g=g.slice(I,Math.min(g.length,I+_))),g}_createExceedsLimitQueryResponse(t){let e=!1,i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const n of t.outStatistics)if("exceedslimit"===n.statisticType){i=null!=n.maxPointCount?n.maxPointCount:Number.POSITIVE_INFINITY,r=null!=n.maxRecordCount?n.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=n.maxVertexCount?n.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)e=this.items.length>i;else if(this.items.length>r)e=!0;else{const n=this.hasZ?this.hasM?4:3:this.hasM?3:2,o=this.featureAdapter;e=this.items.reduce((l,h)=>{const y=o.getGeometry(h);return l+((0,w.pC)(y)&&y.coords.length||0)},0)/n>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(e)}}]}}_createStatisticsQueryResponse(t){var e=this;return(0,A.Z)(function*(){const i={attributes:{}},r=[],s=new Map,n=new Map,o=new Map,l=new Map,h=new C(t,e.featureAdapter,e.fieldsIndex),y=t.outStatistics,{groupByFieldsForStatistics:V,having:_,orderByFields:T}=t,a=V&&V.length,u=!!a,p=u&&V[0],g=u&&!e.fieldsIndex.get(p);for(const v of y){const{outStatisticFieldName:I,statisticType:f}=v,F=v,P="exceedslimit"!==f?v.onStatisticField:void 0,Z="percentile_disc"===f||"percentile_cont"===f,G="EnvelopeAggregate"===f||"CentroidAggregate"===f||"ConvexHullAggregate"===f,k=u&&1===a&&(P===p||g)&&"count"===f;if(u){if(!o.has(P)){const L=[];for(const ie of V){const ee=e._getAttributeValues(h,ie,s);L.push(ee)}o.set(P,e._calculateUniqueValues(L,h.returnDistinctValues))}const U=o.get(P);for(const L in U){const{count:ie,data:ee,items:se,itemPositions:ue}=U[L],ne=ee.join(",");if(!_||h.validateItems(se,_)){const H=l.get(ne)||{attributes:{}};if(G){H.aggregateGeometries||(H.aggregateGeometries={});const{aggregateGeometries:K,outStatisticFieldName:$}=yield e._getAggregateGeometry(F,se);H.aggregateGeometries[$]=K}else{let K=null;if(k)K=ie;else{const $=e._getAttributeValues(h,P,s),ae=ue.map(ce=>$[ce]);K=Z&&"statisticParameters"in F?e._getPercentileValue(F,ae):e._getStatisticValue(F,ae,null,h.returnDistinctValues)}H.attributes[I]=K}V.forEach((K,$)=>H.attributes[e.fieldsIndex.get(K)?K:`EXPR_${$+1}`]=ee[$]),l.set(ne,H)}}}else if(G){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:U,outStatisticFieldName:L}=yield e._getAggregateGeometry(F,e.items);i.aggregateGeometries[L]=U}else{const U=e._getAttributeValues(h,P,s);i.attributes[I]=Z&&"statisticParameters"in F?e._getPercentileValue(F,U):e._getStatisticValue(F,U,n,h.returnDistinctValues)}r.push({name:I,alias:I,type:"esriFieldTypeDouble"})}const x=u?Array.from(l.values()):[i];return e._sortFeatures(x,T,(v,I)=>v.attributes[I]),{fields:r,features:x}})()}_getAggregateGeometry(t,e){var i=this;return(0,A.Z)(function*(){const r=yield Promise.all([m.e(4918),m.e(8592)]).then(m.bind(m,32825)),{statisticType:s,outStatisticFieldName:n}=t,{featureAdapter:o,spatialReference:l,geometryType:h,hasZ:y,hasM:V}=i,_=e.map(u=>(0,M.Op)(h,y,V,o.getGeometry(u))),T=r.convexHull(l,_,!0)[0],a={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===s){const u=T?(0,Y._w)(T):(0,Y.aO)(r.union(l,_));a.aggregateGeometries=le(te({},u),{spatialReference:l}),a.outStatisticFieldName=n||"extent"}else if("CentroidAggregate"===s){const u=T?(0,j.tO)(T):(0,j.$G)((0,Y.aO)(r.union(l,_)));a.aggregateGeometries={x:u[0],y:u[1],spatialReference:l},a.outStatisticFieldName=n||"centroid"}else"ConvexHullAggregate"===s&&(a.aggregateGeometries=T,a.outStatisticFieldName=n||"convexHull");return a})()}_getStatisticValue(t,e,i,r){const{onStatisticField:s,statisticType:n}=t;let o=null;return o=(null==i?void 0:i.has(s))?i.get(s):(0,B.qN)(this.fieldsIndex.get(s))?(0,R.H0)({values:e,returnDistinct:r}):(0,R.i5)({values:e,minValue:null,maxValue:null,useSampleStdDev:!0}),i&&i.set(s,o),o["var"===n?"variance":n]}_getPercentileValue(t,e){const{onStatisticField:i,statisticParameters:r,statisticType:s}=t,{value:n,orderBy:o}=r,l=this.fieldsIndex.get(i);return(0,R.XL)(e,{value:n,orderBy:o,fieldType:null==l?void 0:l.type,isDiscrete:"percentile_disc"===s})}_getAttributeValues(t,e,i){if(i.has(e))return i.get(e);const r=this.fieldsIndex.get(e),s=this.items.map(n=>t.getFieldValue(n,e,r));return i.set(e,s),s}_getAttributeNormalizedValues(t,e){return this.items.map(i=>t.getNormalizedValue(i,{field:e.field,fieldInfo:this.fieldsIndex.get(e.field),normalizationField:e.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(e.normalizationField),normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal}))}_getAttributeExpressionValues(t,e,i){var r=this;return(0,A.Z)(function*(){const{arcadeUtils:s}=yield(0,J.LC)(),n=s.createFunction(e),o=i&&s.getViewInfo(i);return t.getExpressionValues(r.items,n,o,s)})()}_calculateUniqueValues(t,e){const i={},r=this.items,s=r.length;for(let n=0;n<s;n++){const o=r[n],l=[];for(const y of t)l.push(y[n]);const h=l.join(",");e?null==i[h]&&(i[h]={count:1,data:l,items:[o],itemPositions:[n]}):null==i[h]?i[h]={count:1,data:l,items:[o],itemPositions:[n]}:(i[h].count++,i[h].items.push(o),i[h].itemPositions.push(n))}return i}_getDataValues(t){var e=this;return(0,A.Z)(function*(){const i=new C(e.query,e.featureAdapter,e.fieldsIndex),{valueExpression:r,field:s,normalizationField:n,normalizationType:o,normalizationTotal:l,scale:h}=t;return r?e._getAttributeExpressionValues(i,r,r?{viewingMode:"map",scale:h,spatialReference:e.query.outSR||e.spatialReference}:null):e._getAttributeNormalizedValues(i,{field:s,normalizationField:n,normalizationType:o,normalizationTotal:l})})()}}function q(E,t,e,i,r,s){const n=r-e,o=s-i,y=Math.min(1,Math.max(0,((E-e)*n+(t-i)*o)/(n*n+o*o)));return{x:e+n*y,y:i+o*y}}(E=S||(S={}))[E.NONE=0]="NONE",E[E.EDGE=1]="EDGE",E[E.VERTEX=2]="VERTEX"},50736:(N,z,m)=>{m.d(z,{nu:()=>X,hr:()=>J,Jc:()=>M,G3:()=>q,Of:()=>B,z4:()=>Q,hO:()=>C});var A=m(26584),w=m(78498),j=m(10410);const W=new class Y{constructor(S,E){this._cache=new w.Z(S),this._invalidCache=new w.Z(E)}get(S,E){const t=`${E.uid}:${S}`,e=this._cache.get(t);if(e)return e;if(void 0!==this._invalidCache.get(t))return null;try{const i=j.WhereClause.create(S,E);return this._cache.put(t,i),i}catch(i){return this._invalidCache.put(t,null),null}}}(50,500),O="feature-store:unsupported-query",b=" as ",R=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function C(D,S){if(!S)return!0;const E=W.get(S,D);if(!E)throw new A.Z(O,"invalid SQL expression",{where:S});if(!E.isStandardized)throw new A.Z(O,"where clause is not standard",{where:S});return B(D,E.fieldNames,"where clause contains missing fields"),!0}function Q(D,S,E){if(!S)return!0;const t=W.get(S,D);if(!t)throw new A.Z(O,"invalid SQL expression",{having:S});if(!t.isAggregate)throw new A.Z(O,"having does not contain a valid aggregate function",{having:S});if(B(D,t.fieldNames,"having contains missing fields"),!t.getExpressions().every(i=>{const{aggregateType:r,field:s}=i,n=D.has(s)&&D.get(s).name;return E.some(o=>{const{onStatisticField:l,statisticType:h}=o;return(D.has(l)&&D.get(l).name)===n&&h.toLowerCase().trim()===r})}))throw new A.Z(O,"expressions in having should also exist in outStatistics",{having:S});return!0}function M(D,S){return D?W.get(D,S):null}function B(D,S,E,t=!0){const e=[];for(const i of S)if("*"!==i&&!D.has(i))if(t){const r=J(i);try{const s=M(r,D);if(!s)throw new A.Z(O,"invalid SQL expression",{where:r});if(!s.isStandardized)throw new A.Z(O,"expression is not standard",{clause:s});B(D,s.fieldNames,"expression contains missing fields")}catch(s){const n=s&&s.details;if(n&&(n.clause||n.where))throw s;n&&n.missingFields?e.push(...n.missingFields):e.push(i)}}else e.push(i);if(e.length)throw new A.Z(O,E,{missingFields:e})}function J(D){return D.split(b)[0]}function X(D){return D.split(b)[1]}function q(D,S){const E=S.get(D);return!!E&&!R.has(E.type)}},6185:(N,z,m)=>{m.d(z,{EG:()=>E,Op:()=>e,S2:()=>V,Up:()=>i,j6:()=>s,vF:()=>J});var A=m(15861),w=m(2076),j=m(62208),Y=m(16730),W=m(15176),O=m(91179),b=m(13924),R=m(37053),C=m(82054),Q=m(88071),M=m(82959);const B=new w.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J=Object.freeze({}),X=new Q.Z,q=new Q.Z,D=new Q.Z,S={esriGeometryPoint:C.fQ,esriGeometryPolyline:C.J6,esriGeometryPolygon:C.eG,esriGeometryMultipoint:C.Iv};function E(a,u,p,g=a.hasZ,x=a.hasM){if((0,j.Wi)(u))return null;const v=a.hasZ&&g,I=a.hasM&&x;if(p){const f=(0,C.Nh)(D,u,a.hasZ,a.hasM,"esriGeometryPoint",p,g,x);return(0,C.fQ)(f,v,I)}return(0,C.fQ)(u,v,I)}function e(a,u,p,g,x,v,I=u,f=p){const F=u&&I,P=p&&f,Z=(0,j.pC)(g)?"coords"in g?g:g.geometry:null;if((0,j.Wi)(Z))return null;if(x){let G=(0,C.zj)(q,Z,u,p,a,x,I,f);return v&&(G=(0,C.Nh)(D,G,F,P,a,v)),S[a](G,F,P)}if(v){const G=(0,C.Nh)(D,Z,u,p,a,v,I,f);return S[a](G,F,P)}return(0,C.hY)(X,Z,u,p,I,f),S[a](X,F,P)}function i(a,u,p){return r.apply(this,arguments)}function r(){return(r=(0,A.Z)(function*(a,u,p){const{outFields:g,orderByFields:x,groupByFieldsForStatistics:v,outStatistics:I}=a;if(g)for(let f=0;f<g.length;f++)g[f]=g[f].trim();if(x)for(let f=0;f<x.length;f++)x[f]=x[f].trim();if(v)for(let f=0;f<v.length;f++)v[f]=v[f].trim();if(I)for(let f=0;f<I.length;f++)I[f].onStatisticField&&(I[f].onStatisticField=I[f].onStatisticField.trim());return a.geometry&&!a.outSR&&(a.outSR=a.geometry.spatialReference),s(a,u,p)})).apply(this,arguments)}function s(a,u,p){return n.apply(this,arguments)}function n(){return(n=(0,A.Z)(function*(a,u,p){if(!a)return null;let{where:g}=a;if(a.where=g=g&&g.trim(),(!g||/^1 *= *1$/.test(g)||u&&u===g)&&(a.where=null),!a.geometry)return a;let x=yield o(a);if(a.distance=0,a.units=null,"esriSpatialRelEnvelopeIntersects"===a.spatialRel){const{spatialReference:F}=a.geometry;x=(0,W.aO)(x),x.spatialReference=F}a.geometry=x,yield(0,M._W)(x.spatialReference,p);const v=(yield(0,b.aX)((0,O.im)(x)))[0];if((0,j.Wi)(v))throw J;const I=v.toJSON(),f=yield(0,M.iV)(I,I.spatialReference,p);if(!f)throw J;return f.spatialReference=p,a.geometry=f,a})).apply(this,arguments)}function o(a){return l.apply(this,arguments)}function l(){return(l=(0,A.Z)(function*(a){const{geometry:u,distance:p,units:g}=a;if(null==p||"vertexAttributes"in u)return u;const x=u.spatialReference,v=g?B.fromJSON(g):(0,Y.qE)(x),I=x&&((0,R.sT)(x)||(0,R.sS)(x))?u:yield(0,M._W)(x,R.Zn).then(()=>(0,M.iV)(u,R.Zn));return(yield h())(I.spatialReference,I,p,v)})).apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return(y=(0,A.Z)(function*(){return(yield Promise.all([m.e(4918),m.e(8592)]).then(m.bind(m,32825))).geodesicBuffer})).apply(this,arguments)}function V(a){return a&&_ in a?JSON.parse(JSON.stringify(a,T)):a}const _="_geVersion",T=(a,u)=>a!==_?u:void 0}}]);